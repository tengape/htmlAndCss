/**Released Version v3.0.8,BUILD 167,Time 1646286759833. Fengmap Javascript SDK , see: https://www.fengmap.com for details**/
!function(t,i){"object"==typeof exports&&"object"==typeof module?module.exports=i(require("fs")):"function"==typeof define&&define.amd?define(["fs"],i):"object"==typeof exports?exports.fengmap=i(require("fs")):t.fengmap=i(t.fs)}(this,function(__WEBPACK_EXTERNAL_MODULE__47__){return d=[function(t,i,n){"use strict";var r,e,s=t.exports=n(2),o=n(16);s.codegen=n(40),s.fetch=n(41),s.path=n(42),s.fs=s.inquire("fs"),s.toArray=function(t){if(t){for(var i=Object.keys(t),n=new Array(i.length),r=0;r<i.length;)n[r]=t[i[r++]];return n}return[]},s.toObject=function(t){for(var i={},n=0;n<t.length;){var r=t[n++],e=t[n++];void 0!==e&&(i[r]=e)}return i};var u=/\\/g,h=/"/g;s.isReserved=function(t){return/^(?:do|if|in|for|let|new|try|var|case|else|enum|eval|false|null|this|true|void|with|break|catch|class|const|super|throw|while|yield|delete|export|import|public|return|static|switch|typeof|default|extends|finally|package|private|continue|debugger|function|arguments|interface|protected|implements|instanceof)$/.test(t)},s.safeProp=function(t){return!/^[$\w_]+$/.test(t)||s.isReserved(t)?'["'+t.replace(u,"\\\\").replace(h,'\\"')+'"]':"."+t},s.ucFirst=function(t){return t.charAt(0).toUpperCase()+t.substring(1)};var a=/_([a-z])/g;s.camelCase=function(t){return t.substring(0,1)+t.substring(1).replace(a,function(t,i){return i.toUpperCase()})},s.compareFieldsById=function(t,i){return t.id-i.id},s.decorateType=function(t,i){if(t.$type)return i&&t.$type.name!==i&&(s.decorateRoot.remove(t.$type),t.$type.name=i,s.decorateRoot.add(t.$type)),t.$type;i=new(r=r||n(18))(i||t.name);return s.decorateRoot.add(i),i.ctor=t,Object.defineProperty(t,"$type",{value:i,enumerable:!1}),Object.defineProperty(t.prototype,"$type",{value:i,enumerable:!1}),i};var f=0;s.decorateEnum=function(t){if(t.$type)return t.$type;var i=new(e=e||n(3))("Enum"+f++,t);return s.decorateRoot.add(i),Object.defineProperty(t,"$type",{value:i,enumerable:!1}),i},s.setProperty=function(t,i,n){if("object"!=typeof t)throw TypeError("dst must be an object");if(!i)throw TypeError("path must be specified");return function t(i,n,r){var e=n.shift();return 0<n.length?i[e]=t(i[e]||{},n,r):((n=i[e])&&(r=[].concat(n).concat(r)),i[e]=r),i}(t,i=i.split("."),n)},Object.defineProperty(s,"decorateRoot",{get:function(){return o.decorated||(o.decorated=new(n(26)))}})},function(t,i,n){"use strict";!function(o){function u(t,i){for(var n=0;n<i.length;n++){var r=i[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var h=null;i.a=function(){function t(){!function(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}(this,t)}var i,n,r,e;function s(){return e.apply(this,arguments)}return i=t,n=null,r=[{key:"global",value:(e=function(){if("undefined"!=typeof self&&null!==self&&0!==Object.keys(self).length)return self;if("undefined"!=typeof window&&null!==window&&0!==Object.keys(window).length)return window;if(null!=o&&0!==Object.keys(o).length)return o;if("undefined"==typeof my)throw new Error("unable to locate global object");var t;return h||(t=my.getAppIdSync(),h={location:{host:t.appId+".hybrid.alipay-eco.com"}}),h},s.toString=function(){return e.toString()},s)}],n&&u(i.prototype,n),r&&u(i,r),t}()}.call(this,n(8))},function(t,n,s){"use strict";!function(t){var r=n;function e(t,i,n){for(var r=Object.keys(i),e=0;e<r.length;++e)void 0!==t[r[e]]&&n||(t[r[e]]=i[r[e]]);return t}function i(t){function n(t,i){if(!(this instanceof n))return new n(t,i);Object.defineProperty(this,"message",{get:function(){return t}}),Error.captureStackTrace?Error.captureStackTrace(this,n):Object.defineProperty(this,"stack",{value:(new Error).stack||""}),i&&e(this,i)}return(n.prototype=Object.create(Error.prototype)).constructor=n,Object.defineProperty(n.prototype,"name",{get:function(){return t}}),n.prototype.toString=function(){return this.name+": "+this.message},n}r.asPromise=s(13),r.base64=s(31),r.EventEmitter=s(32),r.float=s(33),r.inquire=s(14),r.utf8=s(34),r.pool=s(35),r.LongBits=s(36),r.isNode=Boolean(void 0!==t&&t&&t.process&&t.process.versions&&t.process.versions.node),r.global=r.isNode&&t||"undefined"!=typeof window&&window||"undefined"!=typeof self&&self||this,r.emptyArray=Object.freeze?Object.freeze([]):[],r.emptyObject=Object.freeze?Object.freeze({}):{},r.isInteger=Number.isInteger||function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t},r.isString=function(t){return"string"==typeof t||t instanceof String},r.isObject=function(t){return t&&"object"==typeof t},r.isset=r.isSet=function(t,i){var n=t[i];return!(null==n||!t.hasOwnProperty(i))&&("object"!=typeof n||0<(Array.isArray(n)?n:Object.keys(n)).length)},r.Buffer=function(){try{var t=r.inquire("buffer").Buffer;return t.prototype.utf8Write?t:null}catch(t){return null}}(),r.u=null,r.v=null,r.newBuffer=function(t){return"number"==typeof t?r.Buffer?r.v(t):new r.Array(t):r.Buffer?r.u(t):"undefined"==typeof Uint8Array?t:new Uint8Array(t)},r.Array="undefined"!=typeof Uint8Array?Uint8Array:Array,r.Long=r.global.dcodeIO&&r.global.dcodeIO.Long||r.global.Long||r.inquire("long"),r.key2Re=/^true|false|0|1$/,r.key32Re=/^-?(?:0|[1-9][0-9]*)$/,r.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,r.longToHash=function(t){return t?r.LongBits.from(t).toHash():r.LongBits.zeroHash},r.longFromHash=function(t,i){t=r.LongBits.fromHash(t);return r.Long?r.Long.fromBits(t.lo,t.hi,i):t.toNumber(Boolean(i))},r.merge=e,r.lcFirst=function(t){return t.charAt(0).toLowerCase()+t.substring(1)},r.newError=i,r.ProtocolError=i("ProtocolError"),r.oneOfGetter=function(t){for(var n={},i=0;i<t.length;++i)n[t[i]]=1;return function(){for(var t=Object.keys(this),i=t.length-1;-1<i;--i)if(1===n[t[i]]&&void 0!==this[t[i]]&&null!==this[t[i]])return t[i]}},r.oneOfSetter=function(n){return function(t){for(var i=0;i<n.length;++i)n[i]!==t&&delete this[n[i]]}},r.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},r._=function(){var n=r.Buffer;n?(r.u=n.from!==Uint8Array.from&&n.from||function(t,i){return new n(t,i)},r.v=n.allocUnsafe||function(t){return new n(t)}):r.u=r.v=null}}.call(this,s(8))},function(t,i,n){"use strict";t.exports=s;var u=n(4);((s.prototype=Object.create(u.prototype)).constructor=s).className="Enum";var r=n(6),e=n(0);function s(t,i,n,r,e){if(u.call(this,t,n),i&&"object"!=typeof i)throw TypeError("values must be an object");if(this.valuesById={},this.values=Object.create(this.valuesById),this.comment=r,this.comments=e||{},this.reserved=void 0,i)for(var s=Object.keys(i),o=0;o<s.length;++o)"number"==typeof i[s[o]]&&(this.valuesById[this.values[s[o]]=i[s[o]]]=s[o])}s.fromJSON=function(t,i){t=new s(t,i.values,i.options,i.comment,i.comments);return t.reserved=i.reserved,t},s.prototype.toJSON=function(t){t=!!t&&Boolean(t.keepComments);return e.toObject(["options",this.options,"values",this.values,"reserved",this.reserved&&this.reserved.length?this.reserved:void 0,"comment",t?this.comment:void 0,"comments",t?this.comments:void 0])},s.prototype.add=function(t,i,n){if(!e.isString(t))throw TypeError("name must be a string");if(!e.isInteger(i))throw TypeError("id must be an integer");if(void 0!==this.values[t])throw Error("duplicate name '"+t+"' in "+this);if(this.isReservedId(i))throw Error("id "+i+" is reserved in "+this);if(this.isReservedName(t))throw Error("name '"+t+"' is reserved in "+this);if(void 0!==this.valuesById[i]){if(!this.options||!this.options.allow_alias)throw Error("duplicate id "+i+" in "+this);this.values[t]=i}else this.valuesById[this.values[t]=i]=t;return this.comments[t]=n||null,this},s.prototype.remove=function(t){if(!e.isString(t))throw TypeError("name must be a string");var i=this.values[t];if(null==i)throw Error("name '"+t+"' does not exist in "+this);return delete this.valuesById[i],delete this.values[t],delete this.comments[t],this},s.prototype.isReservedId=function(t){return r.isReservedId(this.reserved,t)},s.prototype.isReservedName=function(t){return r.isReservedName(this.reserved,t)}},function(t,i,n){"use strict";(t.exports=e).className="ReflectionObject";var r,o=n(0);function e(t,i){if(!o.isString(t))throw TypeError("name must be a string");if(i&&!o.isObject(i))throw TypeError("options must be an object");this.options=i,this.parsedOptions=null,this.name=t,this.parent=null,this.resolved=!1,this.comment=null,this.filename=null}Object.defineProperties(e.prototype,{root:{get:function(){for(var t=this;null!==t.parent;)t=t.parent;return t}},fullName:{get:function(){for(var t=[this.name],i=this.parent;i;)t.unshift(i.name),i=i.parent;return t.join(".")}}}),e.prototype.toJSON=function(){throw Error()},e.prototype.onAdd=function(t){this.parent&&this.parent!==t&&this.parent.remove(this),this.parent=t,this.resolved=!1;t=t.root;t instanceof r&&t.O(this)},e.prototype.onRemove=function(t){t=t.root;t instanceof r&&t.M(this),this.parent=null,this.resolved=!1},e.prototype.resolve=function(){return this.resolved||this.root instanceof r&&(this.resolved=!0),this},e.prototype.getOption=function(t){if(this.options)return this.options[t]},e.prototype.setOption=function(t,i,n){return n&&this.options&&void 0!==this.options[t]||((this.options||(this.options={}))[t]=i),this},e.prototype.setParsedOption=function(i,t,n){this.parsedOptions||(this.parsedOptions=[]);var r,e,s=this.parsedOptions;return n?(e=s.find(function(t){return Object.prototype.hasOwnProperty.call(t,i)}))?(r=e[i],o.setProperty(r,n,t)):((e={})[i]=o.setProperty({},n,t),s.push(e)):((e={})[i]=t,s.push(e)),this},e.prototype.setOptions=function(t,i){if(t)for(var n=Object.keys(t),r=0;r<n.length;++r)this.setOption(n[r],t[n[r]],i);return this},e.prototype.toString=function(){var t=this.constructor.className,i=this.fullName;return i.length?t+" "+i:t},e._=function(t){r=t}},function(t,i,n){"use strict";t.exports=o;var u=n(4);((o.prototype=Object.create(u.prototype)).constructor=o).className="Field";var r,e=n(3),h=n(7),a=n(0),f=/^required|optional|repeated$/;function o(t,i,n,r,e,s,o){if(a.isObject(r)?(o=e,s=r,r=e=void 0):a.isObject(e)&&(o=s,s=e,e=void 0),u.call(this,t,s),!a.isInteger(i)||i<0)throw TypeError("id must be a non-negative integer");if(!a.isString(n))throw TypeError("type must be a string");if(void 0!==r&&!f.test(r=r.toString().toLowerCase()))throw TypeError("rule must be a string rule");if(void 0!==e&&!a.isString(e))throw TypeError("extend must be a string");this.rule=r&&"optional"!==r?r:void 0,this.type=n,this.id=i,this.extend=e||void 0,this.required="required"===r,this.optional=!this.required,this.repeated="repeated"===r,this.map=!1,this.message=null,this.partOf=null,this.typeDefault=null,this.defaultValue=null,this.long=!!a.Long&&void 0!==h.long[n],this.bytes="bytes"===n,this.resolvedType=null,this.extensionField=null,this.declaringField=null,this.j=null,this.comment=o}o.fromJSON=function(t,i){return new o(t,i.id,i.type,i.rule,i.extend,i.options,i.comment)},Object.defineProperty(o.prototype,"packed",{get:function(){return null===this.j&&(this.j=!1!==this.getOption("packed")),this.j}}),o.prototype.setOption=function(t,i,n){return"packed"===t&&(this.j=null),u.prototype.setOption.call(this,t,i,n)},o.prototype.toJSON=function(t){t=!!t&&Boolean(t.keepComments);return a.toObject(["rule","optional"!==this.rule&&this.rule||void 0,"type",this.type,"id",this.id,"extend",this.extend,"options",this.options,"comment",t?this.comment:void 0])},o.prototype.resolve=function(){return this.resolved?this:(void 0===(this.typeDefault=h.defaults[this.type])&&(this.resolvedType=(this.declaringField||this).parent.lookupTypeOrEnum(this.type),this.resolvedType instanceof r?this.typeDefault=null:this.typeDefault=this.resolvedType.values[Object.keys(this.resolvedType.values)[0]]),this.options&&null!=this.options.default&&(this.typeDefault=this.options.default,this.resolvedType instanceof e&&"string"==typeof this.typeDefault&&(this.typeDefault=this.resolvedType.values[this.typeDefault])),this.options&&(!0!==this.options.packed&&(void 0===this.options.packed||!this.resolvedType||this.resolvedType instanceof e)||delete this.options.packed,Object.keys(this.options).length||(this.options=void 0)),this.long?(this.typeDefault=a.Long.fromNumber(this.typeDefault,"u"===this.type.charAt(0)),Object.freeze&&Object.freeze(this.typeDefault)):this.bytes&&"string"==typeof this.typeDefault&&(a.base64.test(this.typeDefault)?a.base64.decode(this.typeDefault,t=a.newBuffer(a.base64.length(this.typeDefault)),0):a.utf8.write(this.typeDefault,t=a.newBuffer(a.utf8.length(this.typeDefault)),0),this.typeDefault=t),this.map?this.defaultValue=a.emptyObject:this.repeated?this.defaultValue=a.emptyArray:this.defaultValue=this.typeDefault,this.parent instanceof r&&(this.parent.ctor.prototype[this.name]=this.defaultValue),u.prototype.resolve.call(this));var t},o.d=function(n,r,e,s){return"function"==typeof r?r=a.decorateType(r).name:r&&"object"==typeof r&&(r=a.decorateEnum(r).name),function(t,i){a.decorateType(t.constructor).add(new o(i,n,r,e,{default:s}))}},o._=function(t){r=t}},function(t,i,n){"use strict";t.exports=f;var r=n(4);((f.prototype=Object.create(r.prototype)).constructor=f).className="Namespace";var e,s,o,u=n(5),h=n(0);function a(t,i){if(t&&t.length){for(var n={},r=0;r<t.length;++r)n[t[r].name]=t[r].toJSON(i);return n}}function f(t,i){r.call(this,t,i),this.nested=void 0,this.k=null}function c(t){return t.k=null,t}f.fromJSON=function(t,i){return new f(t,i.options).addJSON(i.nested)},f.arrayToJSON=a,f.isReservedId=function(t,i){if(t)for(var n=0;n<t.length;++n)if("string"!=typeof t[n]&&t[n][0]<=i&&t[n][1]>i)return!0;return!1},f.isReservedName=function(t,i){if(t)for(var n=0;n<t.length;++n)if(t[n]===i)return!0;return!1},Object.defineProperty(f.prototype,"nestedArray",{get:function(){return this.k||(this.k=h.toArray(this.nested))}}),f.prototype.toJSON=function(t){return h.toObject(["options",this.options,"nested",a(this.nestedArray,t)])},f.prototype.addJSON=function(t){if(t)for(var i,n=Object.keys(t),r=0;r<n.length;++r)i=t[n[r]],this.add((void 0!==i.fields?e:void 0!==i.values?o:void 0!==i.methods?s:void 0!==i.id?u:f).fromJSON(n[r],i));return this},f.prototype.get=function(t){return this.nested&&this.nested[t]||null},f.prototype.getEnum=function(t){if(this.nested&&this.nested[t]instanceof o)return this.nested[t].values;throw Error("no such enum: "+t)},f.prototype.add=function(t){if(!(t instanceof u&&void 0!==t.extend||t instanceof e||t instanceof o||t instanceof s||t instanceof f))throw TypeError("object must be a valid nested object");if(this.nested){var i=this.get(t.name);if(i){if(!(i instanceof f&&t instanceof f)||i instanceof e||i instanceof s)throw Error("duplicate name '"+t.name+"' in "+this);for(var n=i.nestedArray,r=0;r<n.length;++r)t.add(n[r]);this.remove(i),this.nested||(this.nested={}),t.setOptions(i.options,!0)}}else this.nested={};return(this.nested[t.name]=t).onAdd(this),c(this)},f.prototype.remove=function(t){if(!(t instanceof r))throw TypeError("object must be a ReflectionObject");if(t.parent!==this)throw Error(t+" is not a member of "+this);return delete this.nested[t.name],Object.keys(this.nested).length||(this.nested=void 0),t.onRemove(this),c(this)},f.prototype.define=function(t,i){if(h.isString(t))t=t.split(".");else if(!Array.isArray(t))throw TypeError("illegal path");if(t&&t.length&&""===t[0])throw Error("path must be relative");for(var n=this;0<t.length;){var r=t.shift();if(n.nested&&n.nested[r]){if(!((n=n.nested[r])instanceof f))throw Error("path conflicts with non-namespace objects")}else n.add(n=new f(r))}return i&&n.addJSON(i),n},f.prototype.resolveAll=function(){for(var t=this.nestedArray,i=0;i<t.length;)t[i]instanceof f?t[i++].resolveAll():t[i++].resolve();return this.resolve()},f.prototype.lookup=function(t,i,n){if("boolean"==typeof i?(n=i,i=void 0):i&&!Array.isArray(i)&&(i=[i]),h.isString(t)&&t.length){if("."===t)return this.root;t=t.split(".")}else if(!t.length)return this;if(""===t[0])return this.root.lookup(t.slice(1),i);var r=this.get(t[0]);if(r){if(1===t.length){if(!i||-1<i.indexOf(r.constructor))return r}else if(r instanceof f&&(r=r.lookup(t.slice(1),i,!0)))return r}else for(var e=0;e<this.nestedArray.length;++e)if(this.k[e]instanceof f&&(r=this.k[e].lookup(t,i,!0)))return r;return null===this.parent||n?null:this.parent.lookup(t,i)},f.prototype.lookupType=function(t){var i=this.lookup(t,[e]);if(!i)throw Error("no such type: "+t);return i},f.prototype.lookupEnum=function(t){var i=this.lookup(t,[o]);if(!i)throw Error("no such Enum '"+t+"' in "+this);return i},f.prototype.lookupTypeOrEnum=function(t){var i=this.lookup(t,[e,o]);if(!i)throw Error("no such Type or Enum '"+t+"' in "+this);return i},f.prototype.lookupService=function(t){var i=this.lookup(t,[s]);if(!i)throw Error("no such Service '"+t+"' in "+this);return i},f._=function(t,i,n){e=t,s=i,o=n}},function(t,i,n){"use strict";var i=i,n=n(0),e=["double","float","int32","uint32","sint32","fixed32","sfixed32","int64","uint64","sint64","fixed64","sfixed64","bool","string","bytes"];function r(t,i){var n=0,r={};for(i|=0;n<t.length;)r[e[n+i]]=t[n++];return r}i.basic=r([1,5,0,0,0,5,5,0,0,0,1,1,0,2,2]),i.defaults=r([0,0,0,0,0,0,0,0,0,0,0,0,!1,"",n.emptyArray,null]),i.long=r([0,0,0,1,1],7),i.mapKey=r([0,0,0,5,5,0,0,0,1,1,0,2],2),i.packed=r([1,5,0,0,0,5,5,0,0,0,1,1,0])},function(t,i){var n=function(){return this}();try{n=n||new Function("return this")()}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,i,n){"use strict";t.exports=c;var r,e=n(2),s=e.LongBits,o=e.base64,u=e.utf8;function h(t,i,n){this.fn=t,this.len=i,this.next=void 0,this.val=n}function a(){}function f(t){this.head=t.head,this.tail=t.tail,this.len=t.len,this.next=t.states}function c(){this.len=0,this.head=new h(a,0,0),this.tail=this.head,this.states=null}function l(){return e.Buffer?function(){return(c.create=function(){return new r})()}:function(){return new c}}function v(t,i,n){i[n]=255&t}function d(t,i){this.len=t,this.next=void 0,this.val=i}function y(t,i,n){for(;t.hi;)i[n++]=127&t.lo|128,t.lo=(t.lo>>>7|t.hi<<25)>>>0,t.hi>>>=7;for(;127<t.lo;)i[n++]=127&t.lo|128,t.lo=t.lo>>>7;i[n++]=t.lo}function b(t,i,n){i[n]=255&t,i[n+1]=t>>>8&255,i[n+2]=t>>>16&255,i[n+3]=t>>>24}c.create=l(),c.alloc=function(t){return new e.Array(t)},e.Array!==Array&&(c.alloc=e.pool(c.alloc,e.Array.prototype.subarray)),c.prototype.T=function(t,i,n){return this.tail=this.tail.next=new h(t,i,n),this.len+=i,this},(d.prototype=Object.create(h.prototype)).fn=function(t,i,n){for(;127<t;)i[n++]=127&t|128,t>>>=7;i[n]=t},c.prototype.uint32=function(t){return this.len+=(this.tail=this.tail.next=new d((t>>>=0)<128?1:t<16384?2:t<2097152?3:t<268435456?4:5,t)).len,this},c.prototype.int32=function(t){return t<0?this.T(y,10,s.fromNumber(t)):this.uint32(t)},c.prototype.sint32=function(t){return this.uint32((t<<1^t>>31)>>>0)},c.prototype.int64=c.prototype.uint64=function(t){t=s.from(t);return this.T(y,t.length(),t)},c.prototype.sint64=function(t){t=s.from(t).zzEncode();return this.T(y,t.length(),t)},c.prototype.bool=function(t){return this.T(v,1,t?1:0)},c.prototype.sfixed32=c.prototype.fixed32=function(t){return this.T(b,4,t>>>0)},c.prototype.sfixed64=c.prototype.fixed64=function(t){t=s.from(t);return this.T(b,4,t.lo).T(b,4,t.hi)},c.prototype.float=function(t){return this.T(e.float.writeFloatLE,4,t)},c.prototype.double=function(t){return this.T(e.float.writeDoubleLE,8,t)};var p=e.Array.prototype.set?function(t,i,n){i.set(t,n)}:function(t,i,n){for(var r=0;r<t.length;++r)i[n+r]=t[r]};c.prototype.bytes=function(t){var i,n=t.length>>>0;return n?(e.isString(t)&&(i=c.alloc(n=o.length(t)),o.decode(t,i,0),t=i),this.uint32(n).T(p,n,t)):this.T(v,1,0)},c.prototype.string=function(t){var i=u.length(t);return i?this.uint32(i).T(u.write,i,t):this.T(v,1,0)},c.prototype.fork=function(){return this.states=new f(this),this.head=this.tail=new h(a,0,0),this.len=0,this},c.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new h(a,0,0),this.len=0),this},c.prototype.ldelim=function(){var t=this.head,i=this.tail,n=this.len;return this.reset().uint32(n),n&&(this.tail.next=t.next,this.tail=i,this.len+=n),this},c.prototype.finish=function(){for(var t=this.head.next,i=this.constructor.alloc(this.len),n=0;t;)t.fn(t.val,i,n),n+=t.len,t=t.next;return i},c._=function(t){r=t,c.create=l(),r._()}},function(t,i,n){"use strict";t.exports=h;var r,e=n(2),s=e.LongBits,o=e.utf8;function u(t,i){return RangeError("index out of range: "+t.pos+" + "+(i||1)+" > "+t.len)}function h(t){this.buf=t,this.pos=0,this.len=t.length}function a(){return e.Buffer?function(t){return(h.create=function(t){return e.Buffer.isBuffer(t)?new r(t):c(t)})(t)}:c}var f,c="undefined"!=typeof Uint8Array?function(t){if(t instanceof Uint8Array||Array.isArray(t))return new h(t);throw Error("illegal buffer")}:function(t){if(Array.isArray(t))return new h(t);throw Error("illegal buffer")};function l(){var t=new s(0,0),i=0;if(!(4<this.len-this.pos)){for(;i<3;++i){if(this.pos>=this.len)throw u(this);if(t.lo=(t.lo|(127&this.buf[this.pos])<<7*i)>>>0,this.buf[this.pos++]<128)return t}return t.lo=(t.lo|(127&this.buf[this.pos++])<<7*i)>>>0,t}for(;i<4;++i)if(t.lo=(t.lo|(127&this.buf[this.pos])<<7*i)>>>0,this.buf[this.pos++]<128)return t;if(t.lo=(t.lo|(127&this.buf[this.pos])<<28)>>>0,t.hi=(t.hi|(127&this.buf[this.pos])>>4)>>>0,this.buf[this.pos++]<128)return t;if(i=0,4<this.len-this.pos){for(;i<5;++i)if(t.hi=(t.hi|(127&this.buf[this.pos])<<7*i+3)>>>0,this.buf[this.pos++]<128)return t}else for(;i<5;++i){if(this.pos>=this.len)throw u(this);if(t.hi=(t.hi|(127&this.buf[this.pos])<<7*i+3)>>>0,this.buf[this.pos++]<128)return t}throw Error("invalid varint encoding")}function v(t,i){return(t[i-4]|t[i-3]<<8|t[i-2]<<16|t[i-1]<<24)>>>0}function d(){if(this.pos+8>this.len)throw u(this,8);return new s(v(this.buf,this.pos+=4),v(this.buf,this.pos+=4))}h.create=a(),h.prototype.R=e.Array.prototype.subarray||e.Array.prototype.slice,h.prototype.uint32=(f=4294967295,function(){if(f=(127&this.buf[this.pos])>>>0,this.buf[this.pos++]<128)return f;if(f=(f|(127&this.buf[this.pos])<<7)>>>0,this.buf[this.pos++]<128)return f;if(f=(f|(127&this.buf[this.pos])<<14)>>>0,this.buf[this.pos++]<128)return f;if(f=(f|(127&this.buf[this.pos])<<21)>>>0,this.buf[this.pos++]<128)return f;if(f=(f|(15&this.buf[this.pos])<<28)>>>0,this.buf[this.pos++]<128)return f;if((this.pos+=5)>this.len)throw this.pos=this.len,u(this,10);return f}),h.prototype.int32=function(){return 0|this.uint32()},h.prototype.sint32=function(){var t=this.uint32();return t>>>1^-(1&t)|0},h.prototype.bool=function(){return 0!==this.uint32()},h.prototype.fixed32=function(){if(this.pos+4>this.len)throw u(this,4);return v(this.buf,this.pos+=4)},h.prototype.sfixed32=function(){if(this.pos+4>this.len)throw u(this,4);return 0|v(this.buf,this.pos+=4)},h.prototype.float=function(){if(this.pos+4>this.len)throw u(this,4);var t=e.float.readFloatLE(this.buf,this.pos);return this.pos+=4,t},h.prototype.double=function(){if(this.pos+8>this.len)throw u(this,4);var t=e.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,t},h.prototype.bytes=function(){var t=this.uint32(),i=this.pos,n=this.pos+t;if(n>this.len)throw u(this,t);return this.pos+=t,Array.isArray(this.buf)?this.buf.slice(i,n):i===n?new this.buf.constructor(0):this.R.call(this.buf,i,n)},h.prototype.string=function(){var t=this.bytes();return o.read(t,0,t.length)},h.prototype.skip=function(t){if("number"==typeof t){if(this.pos+t>this.len)throw u(this,t);this.pos+=t}else do{if(this.pos>=this.len)throw u(this)}while(128&this.buf[this.pos++]);return this},h.prototype.skipType=function(t){switch(t){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;4!=(t=7&this.uint32());)this.skipType(t);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+t+" at offset "+this.pos)}return this},h._=function(t){r=t,h.create=a(),r._();var i=e.Long?"toLong":"toNumber";e.merge(h.prototype,{int64:function(){return l.call(this)[i](!1)},uint64:function(){return l.call(this)[i](!0)},sint64:function(){return l.call(this).zzDecode()[i](!1)},fixed64:function(){return d.call(this)[i](!0)},sfixed64:function(){return d.call(this)[i](!1)}})}},function(t,i,n){"use strict";t.exports=o;var e=n(4);((o.prototype=Object.create(e.prototype)).constructor=o).className="OneOf";var r=n(5),s=n(0);function o(t,i,n,r){if(Array.isArray(i)||(n=i,i=void 0),e.call(this,t,n),void 0!==i&&!Array.isArray(i))throw TypeError("fieldNames must be an Array");this.oneof=i||[],this.fieldsArray=[],this.comment=r}function u(t){if(t.parent)for(var i=0;i<t.fieldsArray.length;++i)t.fieldsArray[i].parent||t.parent.add(t.fieldsArray[i])}o.fromJSON=function(t,i){return new o(t,i.oneof,i.options,i.comment)},o.prototype.toJSON=function(t){t=!!t&&Boolean(t.keepComments);return s.toObject(["options",this.options,"oneof",this.oneof,"comment",t?this.comment:void 0])},o.prototype.add=function(t){if(!(t instanceof r))throw TypeError("field must be a Field");return t.parent&&t.parent!==this.parent&&t.parent.remove(t),this.oneof.push(t.name),this.fieldsArray.push(t),u(t.partOf=this),this},o.prototype.remove=function(t){if(!(t instanceof r))throw TypeError("field must be a Field");var i=this.fieldsArray.indexOf(t);if(i<0)throw Error(t+" is not a member of "+this);return this.fieldsArray.splice(i,1),-1<(i=this.oneof.indexOf(t.name))&&this.oneof.splice(i,1),t.partOf=null,this},o.prototype.onAdd=function(t){e.prototype.onAdd.call(this,t);for(var i=0;i<this.oneof.length;++i){var n=t.get(this.oneof[i]);n&&!n.partOf&&(n.partOf=this).fieldsArray.push(n)}u(this)},o.prototype.onRemove=function(t){for(var i,n=0;n<this.fieldsArray.length;++n)(i=this.fieldsArray[n]).parent&&i.parent.remove(i);e.prototype.onRemove.call(this,t)},o.d=function(){for(var n=new Array(arguments.length),t=0;t<arguments.length;)n[t]=arguments[t++];return function(t,i){s.decorateType(t.constructor).add(new o(i,n)),Object.defineProperty(t,i,{get:s.oneOfGetter(n),set:s.oneOfSetter(n)})}}},function(t,i,n){"use strict";t.exports=e;var r=n(2);function e(t){if(t)for(var i=Object.keys(t),n=0;n<i.length;++n)this[i[n]]=t[i[n]]}e.create=function(t){return this.$type.create(t)},e.encode=function(t,i){return this.$type.encode(t,i)},e.encodeDelimited=function(t,i){return this.$type.encodeDelimited(t,i)},e.decode=function(t){return this.$type.decode(t)},e.decodeDelimited=function(t){return this.$type.decodeDelimited(t)},e.verify=function(t){return this.$type.verify(t)},e.fromObject=function(t){return this.$type.fromObject(t)},e.toObject=function(t,i){return this.$type.toObject(t,i)},e.prototype.toJSON=function(){return this.$type.toObject(this,r.toJSONOptions)}},function(t,i,n){"use strict";t.exports=function(t,i){var n=new Array(arguments.length-1),s=0,r=2,o=!0;for(;r<arguments.length;)n[s++]=arguments[r++];return new Promise(function(r,e){n[s]=function(t){if(o)if(o=!1,t)e(t);else{for(var i=new Array(arguments.length-1),n=0;n<i.length;)i[n++]=arguments[n];r.apply(null,i)}};try{t.apply(i||null,n)}catch(t){o&&(o=!1,e(t))}})}},function(module,exports,__webpack_require__){"use strict";function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(e){}return null}module.exports=inquire},function(t,i,n){"use strict";i.Service=n(39)},function(t,i,n){"use strict";t.exports={}},function(t,i,n){"use strict";t.exports=function(t){for(var i,n=c.codegen(["m","w"],t.name+"$encode")("if(!w)")("w=Writer.create()"),r=t.fieldsArray.slice().sort(c.compareFieldsById),e=0;e<r.length;++e){var s=r[e].resolve(),o=t.A.indexOf(s),u=s.resolvedType instanceof a?"int32":s.type,h=f.basic[u];i="m"+c.safeProp(s.name),s.map?(n("if(%s!=null&&Object.hasOwnProperty.call(m,%j)){",i,s.name)("for(var ks=Object.keys(%s),i=0;i<ks.length;++i){",i)("w.uint32(%i).fork().uint32(%i).%s(ks[i])",(s.id<<3|2)>>>0,8|f.mapKey[s.keyType],s.keyType),void 0===h?n("types[%i].encode(%s[ks[i]],w.uint32(18).fork()).ldelim().ldelim()",o,i):n(".uint32(%i).%s(%s[ks[i]]).ldelim()",16|h,u,i),n("}")("}")):s.repeated?(n("if(%s!=null&&%s.length){",i,i),s.packed&&void 0!==f.packed[u]?n("w.uint32(%i).fork()",(s.id<<3|2)>>>0)("for(var i=0;i<%s.length;++i)",i)("w.%s(%s[i])",u,i)("w.ldelim()"):(n("for(var i=0;i<%s.length;++i)",i),void 0===h?l(n,s,o,i+"[i]"):n("w.uint32(%i).%s(%s[i])",(s.id<<3|h)>>>0,u,i)),n("}")):(s.optional&&n("if(%s!=null&&Object.hasOwnProperty.call(m,%j))",i,s.name),void 0===h?l(n,s,o,i):n("w.uint32(%i).%s(%s)",(s.id<<3|h)>>>0,u,i))}return n("return w")};var a=n(3),f=n(7),c=n(0);function l(t,i,n,r){return i.resolvedType.group?t("types[%i].encode(%s,w.uint32(%i)).uint32(%i)",n,r,(i.id<<3|3)>>>0,(i.id<<3|4)>>>0):t("types[%i].encode(%s,w.uint32(%i).fork()).ldelim()",n,r,(i.id<<3|2)>>>0)}},function(t,i,n){"use strict";t.exports=w;var o=n(6);((w.prototype=Object.create(o.prototype)).constructor=w).className="Type";var u=n(3),h=n(11),a=n(5),f=n(19),c=n(20),e=n(12),s=n(10),l=n(9),v=n(0),d=n(17),y=n(22),b=n(23),p=n(24),m=n(25);function w(t,i){o.call(this,t,i),this.fields={},this.oneofs=void 0,this.extensions=void 0,this.reserved=void 0,this.group=void 0,this.S=null,this.A=null,this.I=null,this.N=null}function r(t){return t.S=t.A=t.I=null,delete t.encode,delete t.decode,delete t.verify,t}Object.defineProperties(w.prototype,{fieldsById:{get:function(){if(this.S)return this.S;this.S={};for(var t=Object.keys(this.fields),i=0;i<t.length;++i){var n=this.fields[t[i]],r=n.id;if(this.S[r])throw Error("duplicate id "+r+" in "+this);this.S[r]=n}return this.S}},fieldsArray:{get:function(){return this.A||(this.A=v.toArray(this.fields))}},oneofsArray:{get:function(){return this.I||(this.I=v.toArray(this.oneofs))}},ctor:{get:function(){return this.N||(this.ctor=w.generateConstructor(this)())},set:function(t){var i=t.prototype;i instanceof e||((t.prototype=new e).constructor=t,v.merge(t.prototype,i)),t.$type=t.prototype.$type=this,v.merge(t,e,!0),this.N=t;for(var n=0;n<this.fieldsArray.length;++n)this.A[n].resolve();for(var r={},n=0;n<this.oneofsArray.length;++n)r[this.I[n].resolve().name]={get:v.oneOfGetter(this.I[n].oneof),set:v.oneOfSetter(this.I[n].oneof)};n&&Object.defineProperties(t.prototype,r)}}}),w.generateConstructor=function(t){for(var i,n=v.codegen(["p"],t.name),r=0;r<t.fieldsArray.length;++r)(i=t.A[r]).map?n("this%s={}",v.safeProp(i.name)):i.repeated&&n("this%s=[]",v.safeProp(i.name));return n("if(p)for(var ks=Object.keys(p),i=0;i<ks.length;++i)if(p[ks[i]]!=null)")("this[ks[i]]=p[ks[i]]")},w.fromJSON=function(t,i){var n=new w(t,i.options);n.extensions=i.extensions,n.reserved=i.reserved;for(var r=Object.keys(i.fields),e=0;e<r.length;++e)n.add((void 0!==i.fields[r[e]].keyType?f:a).fromJSON(r[e],i.fields[r[e]]));if(i.oneofs)for(r=Object.keys(i.oneofs),e=0;e<r.length;++e)n.add(h.fromJSON(r[e],i.oneofs[r[e]]));if(i.nested)for(r=Object.keys(i.nested),e=0;e<r.length;++e){var s=i.nested[r[e]];n.add((void 0!==s.id?a:void 0!==s.fields?w:void 0!==s.values?u:void 0!==s.methods?c:o).fromJSON(r[e],s))}return i.extensions&&i.extensions.length&&(n.extensions=i.extensions),i.reserved&&i.reserved.length&&(n.reserved=i.reserved),i.group&&(n.group=!0),i.comment&&(n.comment=i.comment),n},w.prototype.toJSON=function(t){var i=o.prototype.toJSON.call(this,t),n=!!t&&Boolean(t.keepComments);return v.toObject(["options",i&&i.options||void 0,"oneofs",o.arrayToJSON(this.oneofsArray,t),"fields",o.arrayToJSON(this.fieldsArray.filter(function(t){return!t.declaringField}),t)||{},"extensions",this.extensions&&this.extensions.length?this.extensions:void 0,"reserved",this.reserved&&this.reserved.length?this.reserved:void 0,"group",this.group||void 0,"nested",i&&i.nested||void 0,"comment",n?this.comment:void 0])},w.prototype.resolveAll=function(){for(var t=this.fieldsArray,i=0;i<t.length;)t[i++].resolve();for(var n=this.oneofsArray,i=0;i<n.length;)n[i++].resolve();return o.prototype.resolveAll.call(this)},w.prototype.get=function(t){return this.fields[t]||this.oneofs&&this.oneofs[t]||this.nested&&this.nested[t]||null},w.prototype.add=function(t){if(this.get(t.name))throw Error("duplicate name '"+t.name+"' in "+this);if(t instanceof a&&void 0===t.extend){if((this.S||this.fieldsById)[t.id])throw Error("duplicate id "+t.id+" in "+this);if(this.isReservedId(t.id))throw Error("id "+t.id+" is reserved in "+this);if(this.isReservedName(t.name))throw Error("name '"+t.name+"' is reserved in "+this);return t.parent&&t.parent.remove(t),(this.fields[t.name]=t).message=this,t.onAdd(this),r(this)}return t instanceof h?(this.oneofs||(this.oneofs={}),(this.oneofs[t.name]=t).onAdd(this),r(this)):o.prototype.add.call(this,t)},w.prototype.remove=function(t){if(t instanceof a&&void 0===t.extend){if(!this.fields||this.fields[t.name]!==t)throw Error(t+" is not a member of "+this);return delete this.fields[t.name],t.parent=null,t.onRemove(this),r(this)}if(t instanceof h){if(!this.oneofs||this.oneofs[t.name]!==t)throw Error(t+" is not a member of "+this);return delete this.oneofs[t.name],t.parent=null,t.onRemove(this),r(this)}return o.prototype.remove.call(this,t)},w.prototype.isReservedId=function(t){return o.isReservedId(this.reserved,t)},w.prototype.isReservedName=function(t){return o.isReservedName(this.reserved,t)},w.prototype.create=function(t){return new this.ctor(t)},w.prototype.setup=function(){for(var t=this.fullName,i=[],n=0;n<this.fieldsArray.length;++n)i.push(this.A[n].resolve().resolvedType);this.encode=d(this)({Writer:l,types:i,util:v}),this.decode=y(this)({Reader:s,types:i,util:v}),this.verify=b(this)({types:i,util:v}),this.fromObject=p.fromObject(this)({types:i,util:v}),this.toObject=p.toObject(this)({types:i,util:v});var r=m[t];return r&&((t=Object.create(this)).fromObject=this.fromObject,this.fromObject=r.fromObject.bind(t),t.toObject=this.toObject,this.toObject=r.toObject.bind(t)),this},w.prototype.encode=function(t,i){return this.setup().encode(t,i)},w.prototype.encodeDelimited=function(t,i){return this.encode(t,i&&i.len?i.fork():i).ldelim()},w.prototype.decode=function(t,i){return this.setup().decode(t,i)},w.prototype.decodeDelimited=function(t){return t instanceof s||(t=s.create(t)),this.decode(t,t.uint32())},w.prototype.verify=function(t){return this.setup().verify(t)},w.prototype.fromObject=function(t){return this.setup().fromObject(t)},w.prototype.toObject=function(t,i){return this.setup().toObject(t,i)},w.d=function(i){return function(t){v.decorateType(t,i)}}},function(t,i,n){"use strict";t.exports=s;var o=n(5);((s.prototype=Object.create(o.prototype)).constructor=s).className="MapField";var r=n(7),u=n(0);function s(t,i,n,r,e,s){if(o.call(this,t,i,r,void 0,void 0,e,s),!u.isString(n))throw TypeError("keyType must be a string");this.keyType=n,this.resolvedKeyType=null,this.map=!0}s.fromJSON=function(t,i){return new s(t,i.id,i.keyType,i.type,i.options,i.comment)},s.prototype.toJSON=function(t){t=!!t&&Boolean(t.keepComments);return u.toObject(["keyType",this.keyType,"type",this.type,"id",this.id,"extend",this.extend,"options",this.options,"comment",t?this.comment:void 0])},s.prototype.resolve=function(){if(this.resolved)return this;if(void 0===r.mapKey[this.keyType])throw Error("invalid key type: "+this.keyType);return o.prototype.resolve.call(this)},s.d=function(n,r,e){return"function"==typeof e?e=u.decorateType(e).name:e&&"object"==typeof e&&(e=u.decorateEnum(e).name),function(t,i){u.decorateType(t.constructor).add(new s(i,n,r,e))}}},function(t,i,n){"use strict";t.exports=o;var r=n(6);((o.prototype=Object.create(r.prototype)).constructor=o).className="Service";var s=n(21),u=n(0),h=n(15);function o(t,i){r.call(this,t,i),this.methods={},this.L=null}function e(t){return t.L=null,t}o.fromJSON=function(t,i){var n=new o(t,i.options);if(i.methods)for(var r=Object.keys(i.methods),e=0;e<r.length;++e)n.add(s.fromJSON(r[e],i.methods[r[e]]));return i.nested&&n.addJSON(i.nested),n.comment=i.comment,n},o.prototype.toJSON=function(t){var i=r.prototype.toJSON.call(this,t),n=!!t&&Boolean(t.keepComments);return u.toObject(["options",i&&i.options||void 0,"methods",r.arrayToJSON(this.methodsArray,t)||{},"nested",i&&i.nested||void 0,"comment",n?this.comment:void 0])},Object.defineProperty(o.prototype,"methodsArray",{get:function(){return this.L||(this.L=u.toArray(this.methods))}}),o.prototype.get=function(t){return this.methods[t]||r.prototype.get.call(this,t)},o.prototype.resolveAll=function(){for(var t=this.methodsArray,i=0;i<t.length;++i)t[i].resolve();return r.prototype.resolve.call(this)},o.prototype.add=function(t){if(this.get(t.name))throw Error("duplicate name '"+t.name+"' in "+this);return t instanceof s?e((this.methods[t.name]=t).parent=this):r.prototype.add.call(this,t)},o.prototype.remove=function(t){if(t instanceof s){if(this.methods[t.name]!==t)throw Error(t+" is not a member of "+this);return delete this.methods[t.name],t.parent=null,e(this)}return r.prototype.remove.call(this,t)},o.prototype.create=function(t,i,n){for(var r,e=new h.Service(t,i,n),s=0;s<this.methodsArray.length;++s){var o=u.lcFirst((r=this.L[s]).resolve().name).replace(/[^$\w_]/g,"");e[o]=u.codegen(["r","c"],u.isReserved(o)?o+"_":o)("return this.rpcCall(m,q,s,r,c)")({m:r,q:r.resolvedRequestType.ctor,s:r.resolvedResponseType.ctor})}return e}},function(t,i,n){"use strict";t.exports=r;var a=n(4);((r.prototype=Object.create(a.prototype)).constructor=r).className="Method";var f=n(0);function r(t,i,n,r,e,s,o,u,h){if(f.isObject(e)?(o=e,e=s=void 0):f.isObject(s)&&(o=s,s=void 0),void 0!==i&&!f.isString(i))throw TypeError("type must be a string");if(!f.isString(n))throw TypeError("requestType must be a string");if(!f.isString(r))throw TypeError("responseType must be a string");a.call(this,t,o),this.type=i||"rpc",this.requestType=n,this.requestStream=!!e||void 0,this.responseType=r,this.responseStream=!!s||void 0,this.resolvedRequestType=null,this.resolvedResponseType=null,this.comment=u,this.parsedOptions=h}r.fromJSON=function(t,i){return new r(t,i.type,i.requestType,i.responseType,i.requestStream,i.responseStream,i.options,i.comment,i.parsedOptions)},r.prototype.toJSON=function(t){t=!!t&&Boolean(t.keepComments);return f.toObject(["type","rpc"!==this.type&&this.type||void 0,"requestType",this.requestType,"requestStream",this.requestStream,"responseType",this.responseType,"responseStream",this.responseStream,"options",this.options,"comment",t?this.comment:void 0,"parsedOptions",this.parsedOptions])},r.prototype.resolve=function(){return this.resolved?this:(this.resolvedRequestType=this.parent.lookupType(this.requestType),this.resolvedResponseType=this.parent.lookupType(this.responseType),a.prototype.resolve.call(this))}},function(t,i,n){"use strict";t.exports=function(t){var i=a.codegen(["r","l"],t.name+"$decode")("if(!(r instanceof Reader))")("r=Reader.create(r)")("var c=l===undefined?r.len:r.pos+l,m=new this.ctor"+(t.fieldsArray.filter(function(t){return t.map}).length?",k,value":""))("while(r.pos<c){")("var t=r.uint32()");t.group&&i("if((t&7)===4)")("break");i("switch(t>>>3){");for(var n=0;n<t.fieldsArray.length;++n){var r=t.A[n].resolve(),e=r.resolvedType instanceof u?"int32":r.type,s="m"+a.safeProp(r.name);i("case %i:",r.id),r.map?(i("if(%s===util.emptyObject)",s)("%s={}",s)("var c2 = r.uint32()+r.pos"),void 0!==h.defaults[r.keyType]?i("k=%j",h.defaults[r.keyType]):i("k=null"),void 0!==h.defaults[e]?i("value=%j",h.defaults[e]):i("value=null"),i("while(r.pos<c2){")("var tag2=r.uint32()")("switch(tag2>>>3){")("case 1: k=r.%s(); break",r.keyType)("case 2:"),void 0===h.basic[e]?i("value=types[%i].decode(r,r.uint32())",n):i("value=r.%s()",e),i("break")("default:")("r.skipType(tag2&7)")("break")("}")("}"),void 0!==h.long[r.keyType]?i('%s[typeof k==="object"?util.longToHash(k):k]=value',s):i("%s[k]=value",s)):r.repeated?(i("if(!(%s&&%s.length))",s,s)("%s=[]",s),void 0!==h.packed[e]&&i("if((t&7)===2){")("var c2=r.uint32()+r.pos")("while(r.pos<c2)")("%s.push(r.%s())",s,e)("}else"),void 0===h.basic[e]?i(r.resolvedType.group?"%s.push(types[%i].decode(r))":"%s.push(types[%i].decode(r,r.uint32()))",s,n):i("%s.push(r.%s())",s,e)):void 0===h.basic[e]?i(r.resolvedType.group?"%s=types[%i].decode(r)":"%s=types[%i].decode(r,r.uint32())",s,n):i("%s=r.%s()",s,e),i("break")}for(i("default:")("r.skipType(t&7)")("break")("}")("}"),n=0;n<t.A.length;++n){var o=t.A[n];o.required&&i("if(!m.hasOwnProperty(%j))",o.name)("throw util.ProtocolError(%j,{instance:m})","missing required '"+o.name+"'")}return i("return m")};var u=n(3),h=n(7),a=n(0)},function(t,i,n){"use strict";t.exports=function(t){var i=h.codegen(["m"],t.name+"$verify")('if(typeof m!=="object"||m===null)')("return%j","object expected"),n=t.oneofsArray,r={};n.length&&i("var p={}");for(var e=0;e<t.fieldsArray.length;++e){var s,o=t.A[e].resolve(),u="m"+h.safeProp(o.name);o.optional&&i("if(%s!=null&&m.hasOwnProperty(%j)){",u,o.name),o.map?(i("if(!util.isObject(%s))",u)("return%j",a(o,"object"))("var k=Object.keys(%s)",u)("for(var i=0;i<k.length;++i){"),function(t,i,n){switch(i.keyType){case"int32":case"uint32":case"sint32":case"fixed32":case"sfixed32":t("if(!util.key32Re.test(%s))",n)("return%j",a(i,"integer key"));break;case"int64":case"uint64":case"sint64":case"fixed64":case"sfixed64":t("if(!util.key64Re.test(%s))",n)("return%j",a(i,"integer|Long key"));break;case"bool":t("if(!util.key2Re.test(%s))",n)("return%j",a(i,"boolean key"))}}(i,o,"k[i]"),f(i,o,e,u+"[k[i]]")("}")):o.repeated?(i("if(!Array.isArray(%s))",u)("return%j",a(o,"array"))("for(var i=0;i<%s.length;++i){",u),f(i,o,e,u+"[i]")("}")):(o.partOf&&(s=h.safeProp(o.partOf.name),1===r[o.partOf.name]&&i("if(p%s===1)",s)("return%j",o.partOf.name+": multiple values"),r[o.partOf.name]=1,i("p%s=1",s)),f(i,o,e,u)),o.optional&&i("}")}return i("return null")};var o=n(3),h=n(0);function a(t,i){return t.name+": "+i+(t.repeated&&"array"!==i?"[]":t.map&&"object"!==i?"{k:"+t.keyType+"}":"")+" expected"}function f(t,i,n,r){if(i.resolvedType)if(i.resolvedType instanceof o){t("switch(%s){",r)("default:")("return%j",a(i,"enum value"));for(var e=Object.keys(i.resolvedType.values),s=0;s<e.length;++s)t("case %i:",i.resolvedType.values[e[s]]);t("break")("}")}else t("{")("var e=types[%i].verify(%s);",n,r)("if(e)")("return%j+e",i.name+".")("}");else switch(i.type){case"int32":case"uint32":case"sint32":case"fixed32":case"sfixed32":t("if(!util.isInteger(%s))",r)("return%j",a(i,"integer"));break;case"int64":case"uint64":case"sint64":case"fixed64":case"sfixed64":t("if(!util.isInteger(%s)&&!(%s&&util.isInteger(%s.low)&&util.isInteger(%s.high)))",r,r,r,r)("return%j",a(i,"integer|Long"));break;case"float":case"double":t('if(typeof %s!=="number")',r)("return%j",a(i,"number"));break;case"bool":t('if(typeof %s!=="boolean")',r)("return%j",a(i,"boolean"));break;case"string":t("if(!util.isString(%s))",r)("return%j",a(i,"string"));break;case"bytes":t('if(!(%s&&typeof %s.length==="number"||util.isString(%s)))',r,r,r)("return%j",a(i,"buffer"))}return t}},function(t,i,n){"use strict";var i=i,l=n(3),v=n(0);function o(t,i,n,r){if(i.resolvedType)if(i.resolvedType instanceof l){t("switch(d%s){",r);for(var e=i.resolvedType.values,s=Object.keys(e),o=0;o<s.length;++o)i.repeated&&e[s[o]]===i.typeDefault&&t("default:"),t("case%j:",s[o])("case %i:",e[s[o]])("m%s=%j",r,e[s[o]])("break");t("}")}else t('if(typeof d%s!=="object")',r)("throw TypeError(%j)",i.fullName+": object expected")("m%s=types[%i].fromObject(d%s)",r,n,r);else{var u=!1;switch(i.type){case"double":case"float":t("m%s=Number(d%s)",r,r);break;case"uint32":case"fixed32":t("m%s=d%s>>>0",r,r);break;case"int32":case"sint32":case"sfixed32":t("m%s=d%s|0",r,r);break;case"uint64":u=!0;case"int64":case"sint64":case"fixed64":case"sfixed64":t("if(util.Long)")("(m%s=util.Long.fromValue(d%s)).unsigned=%j",r,r,u)('else if(typeof d%s==="string")',r)("m%s=parseInt(d%s,10)",r,r)('else if(typeof d%s==="number")',r)("m%s=d%s",r,r)('else if(typeof d%s==="object")',r)("m%s=new util.LongBits(d%s.low>>>0,d%s.high>>>0).toNumber(%s)",r,r,r,u?"true":"");break;case"bytes":t('if(typeof d%s==="string")',r)("util.base64.decode(d%s,m%s=util.newBuffer(util.base64.length(d%s)),0)",r,r,r)("else if(d%s.length)",r)("m%s=d%s",r,r);break;case"string":t("m%s=String(d%s)",r,r);break;case"bool":t("m%s=Boolean(d%s)",r,r)}}return t}function d(t,i,n,r){if(i.resolvedType)i.resolvedType instanceof l?t("d%s=o.enums===String?types[%i].values[m%s]:m%s",r,n,r,r):t("d%s=types[%i].toObject(m%s,o)",r,n,r);else{var e=!1;switch(i.type){case"double":case"float":t("d%s=o.json&&!isFinite(m%s)?String(m%s):m%s",r,r,r,r);break;case"uint64":e=!0;case"int64":case"sint64":case"fixed64":case"sfixed64":t('if(typeof m%s==="number")',r)("d%s=o.longs===String?String(m%s):m%s",r,r,r)("else")("d%s=o.longs===String?util.Long.prototype.toString.call(m%s):o.longs===Number?new util.LongBits(m%s.low>>>0,m%s.high>>>0).toNumber(%s):m%s",r,r,r,r,e?"true":"",r);break;case"bytes":t("d%s=o.bytes===String?util.base64.encode(m%s,0,m%s.length):o.bytes===Array?Array.prototype.slice.call(m%s):m%s",r,r,r,r,r);break;default:t("d%s=m%s",r,r)}}return t}i.fromObject=function(t){var i=t.fieldsArray,n=v.codegen(["d"],t.name+"$fromObject")("if(d instanceof this.ctor)")("return d");if(!i.length)return n("return new this.ctor");n("var m=new this.ctor");for(var r=0;r<i.length;++r){var e=i[r].resolve(),s=v.safeProp(e.name);e.map?(n("if(d%s){",s)('if(typeof d%s!=="object")',s)("throw TypeError(%j)",e.fullName+": object expected")("m%s={}",s)("for(var ks=Object.keys(d%s),i=0;i<ks.length;++i){",s),o(n,e,r,s+"[ks[i]]")("}")("}")):e.repeated?(n("if(d%s){",s)("if(!Array.isArray(d%s))",s)("throw TypeError(%j)",e.fullName+": array expected")("m%s=[]",s)("for(var i=0;i<d%s.length;++i){",s),o(n,e,r,s+"[i]")("}")("}")):(e.resolvedType instanceof l||n("if(d%s!=null){",s),o(n,e,r,s),e.resolvedType instanceof l||n("}"))}return n("return m")},i.toObject=function(t){var i=t.fieldsArray.slice().sort(v.compareFieldsById);if(!i.length)return v.codegen()("return {}");for(var n=v.codegen(["m","o"],t.name+"$toObject")("if(!o)")("o={}")("var d={}"),r=[],e=[],s=[],o=0;o<i.length;++o)i[o].partOf||(i[o].resolve().repeated?r:i[o].map?e:s).push(i[o]);if(r.length){for(n("if(o.arrays||o.defaults){"),o=0;o<r.length;++o)n("d%s=[]",v.safeProp(r[o].name));n("}")}if(e.length){for(n("if(o.objects||o.defaults){"),o=0;o<e.length;++o)n("d%s={}",v.safeProp(e[o].name));n("}")}if(s.length){for(n("if(o.defaults){"),o=0;o<s.length;++o){var u,h=s[o],a=v.safeProp(h.name);h.resolvedType instanceof l?n("d%s=o.enums===String?%j:%j",a,h.resolvedType.valuesById[h.typeDefault],h.typeDefault):h.long?n("if(util.Long){")("var n=new util.Long(%i,%i,%j)",h.typeDefault.low,h.typeDefault.high,h.typeDefault.unsigned)("d%s=o.longs===String?n.toString():o.longs===Number?n.toNumber():n",a)("}else")("d%s=o.longs===String?%j:%i",a,h.typeDefault.toString(),h.typeDefault.toNumber()):h.bytes?(u="["+Array.prototype.slice.call(h.typeDefault).join(",")+"]",n("if(o.bytes===String)d%s=%j",a,String.fromCharCode.apply(String,h.typeDefault))("else{")("d%s=%s",a,u)("if(o.bytes!==Array)d%s=util.newBuffer(d%s)",a,a)("}")):n("d%s=%j",a,h.typeDefault)}n("}")}for(var f=!1,o=0;o<i.length;++o){var h=i[o],c=t.A.indexOf(h),a=v.safeProp(h.name);h.map?(f||(f=!0,n("var ks2")),n("if(m%s&&(ks2=Object.keys(m%s)).length){",a,a)("d%s={}",a)("for(var j=0;j<ks2.length;++j){"),d(n,h,c,a+"[ks2[j]]")("}")):h.repeated?(n("if(m%s&&m%s.length){",a,a)("d%s=[]",a)("for(var j=0;j<m%s.length;++j){",a),d(n,h,c,a+"[j]")("}")):(n("if(m%s!=null&&m.hasOwnProperty(%j)){",a,h.name),d(n,h,c,a),h.partOf&&n("if(o.oneofs)")("d%s=%j",v.safeProp(h.partOf.name),h.name)),n("}")}return n("return d")}},function(t,i,n){"use strict";var i=i,s=n(12);i[".google.protobuf.Any"]={fromObject:function(t){if(t&&t["@type"]){var i=t["@type"].substring(t["@type"].lastIndexOf("/")+1),n=this.lookup(i);if(n){i="."===t["@type"].charAt(0)?t["@type"].substr(1):t["@type"];return-1===i.indexOf("/")&&(i="/"+i),this.create({type_url:i,value:n.encode(n.fromObject(t)).finish()})}}return this.fromObject(t)},toObject:function(t,i){var n,r="",e="";if(i&&i.json&&t.type_url&&t.value&&(e=t.type_url.substring(t.type_url.lastIndexOf("/")+1),r=t.type_url.substring(0,t.type_url.lastIndexOf("/")+1),(n=this.lookup(e))&&(t=n.decode(t.value))),t instanceof this.ctor||!(t instanceof s))return this.toObject(t,i);i=t.$type.toObject(t,i),t="."===t.$type.fullName[0]?t.$type.fullName.substr(1):t.$type.fullName;return i["@type"]=e=(r=""===r?"type.googleapis.com/":r)+t,i}}},function(t,i,n){"use strict";t.exports=h;var r=n(6);((h.prototype=Object.create(r.prototype)).constructor=h).className="Root";var e,v,d,s=n(5),o=n(3),u=n(11),y=n(0);function h(t){r.call(this,"",t),this.deferred=[],this.files=[]}function b(){}h.fromJSON=function(t,i){return i=i||new h,t.options&&i.setOptions(t.options),i.addJSON(t.nested)},h.prototype.resolvePath=y.path.resolve,h.prototype.fetch=y.fetch,h.prototype.load=function t(i,s,e){"function"==typeof s&&(e=s,s=void 0);var o=this;if(!e)return y.asPromise(t,o,i,s);var u=e===b;function h(t,i){if(e){var n=e;if(e=null,u)throw t;n(t,i)}}function a(t){var i=t.lastIndexOf("google/protobuf/");if(-1<i){i=t.substring(i);if(i in d)return i}return null}function f(t,i){try{if(y.isString(i)&&"{"===i.charAt(0)&&(i=JSON.parse(i)),y.isString(i)){v.filename=t;var n,r=v(i,o,s),e=0;if(r.imports)for(;e<r.imports.length;++e)(n=a(r.imports[e])||o.resolvePath(t,r.imports[e]))&&c(n);if(r.weakImports)for(e=0;e<r.weakImports.length;++e)(n=a(r.weakImports[e])||o.resolvePath(t,r.weakImports[e]))&&c(n,!0)}else o.setOptions(i.options).addJSON(i.nested)}catch(t){h(t)}u||l||h(null,o)}function c(n,r){if(!(-1<o.files.indexOf(n)))if(o.files.push(n),n in d)u?f(n,d[n]):(++l,setTimeout(function(){--l,f(n,d[n])}));else if(u){var t;try{t=y.fs.readFileSync(n).toString("utf8")}catch(t){return void(r||h(t))}f(n,t)}else++l,o.fetch(n,function(t,i){--l,e&&(t?r?l||h(null,o):h(t):f(n,i))})}var l=0;y.isString(i)&&(i=[i]);for(var n,r=0;r<i.length;++r)(n=o.resolvePath("",i[r]))&&c(n);if(u)return o;l||h(null,o)},h.prototype.loadSync=function(t,i){if(!y.isNode)throw Error("not supported");return this.load(t,i,b)},h.prototype.resolveAll=function(){if(this.deferred.length)throw Error("unresolvable extensions: "+this.deferred.map(function(t){return"'extend "+t.extend+"' in "+t.parent.fullName}).join(", "));return r.prototype.resolveAll.call(this)};var a=/^[A-Z]/;function f(t,i){var n=i.parent.lookup(i.extend);if(n){var r=new s(i.fullName,i.id,i.type,i.rule,void 0,i.options);return(r.declaringField=i).extensionField=r,n.add(r),1}}h.prototype.O=function(t){if(t instanceof s)void 0===t.extend||t.extensionField||f(0,t)||this.deferred.push(t);else if(t instanceof o)a.test(t.name)&&(t.parent[t.name]=t.values);else if(!(t instanceof u)){if(t instanceof e)for(var i=0;i<this.deferred.length;)f(0,this.deferred[i])?this.deferred.splice(i,1):++i;for(var n=0;n<t.nestedArray.length;++n)this.O(t.k[n]);a.test(t.name)&&(t.parent[t.name]=t)}},h.prototype.M=function(t){var i;if(t instanceof s)void 0!==t.extend&&(t.extensionField?(t.extensionField.parent.remove(t.extensionField),t.extensionField=null):-1<(i=this.deferred.indexOf(t))&&this.deferred.splice(i,1));else if(t instanceof o)a.test(t.name)&&delete t.parent[t.name];else if(t instanceof r){for(var n=0;n<t.nestedArray.length;++n)this.M(t.k[n]);a.test(t.name)&&delete t.parent[t.name]}},h._=function(t,i,n){e=t,v=i,d=n}},function(t,i,n){"use strict";t.exports=n(29)},function(t,i,n){"use strict";!function(s){function e(t,i){for(var n=0;n<i.length;n++){var r=i[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var o=n(47),t=(n(48),function(){function t(){!function(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}(this,t),this.P=null,this.D=400,this.F=null,this.C=null,this.U=new Map}var i,n,r;return i=t,(n=[{key:"url",get:function(){return this.P}},{key:"status",get:function(){return this.D}},{key:"responseType",get:function(){return this.F},set:function(t){this.F=t}},{key:"response",get:function(){return this.C}},{key:"open",value:function(t,i){"GET"==t&&(this.P=i)}},{key:"addEventListener",value:function(t,i){var n=this.U.get(t);n||this.U.set(t,n=[]),n.push(i)}},{key:"send",value:function(){var i=this,t=this.P,n=o.createReadStream(t),r=[],e=0;this.C=null,n.on("readable",function(){var t=n.read();null!=t&&(r.push(t),e+=t.length,i.C?i.C=s.concat([i.C,new s(t)],e):i.C=new s(t))}),n.on("end",function(){i.D=200,i.B("load")}),n.on("error",function(t){i.D=400,i.B("error",t)})}}])&&e(i.prototype,n),r&&e(i,r),t}());Object.assign(t.prototype,{B:function(t,i){if(0!=this.U.size){var n=this.U.get(t);if(n)for(var r=0;r<n.length;r++)n[r]&&n[r](i)}}}),i.a=t}.call(this,n(43).Buffer)},function(t,i,n){"use strict";var r=t.exports=n(30);r.build="light",r.load=function(t,i,n){return(i="function"==typeof i?(n=i,new r.Root):i||new r.Root).load(t,n)},r.loadSync=function(t,i){return(i=i||new r.Root).loadSync(t)},r.encoder=n(17),r.decoder=n(22),r.verifier=n(23),r.converter=n(24),r.ReflectionObject=n(4),r.Namespace=n(6),r.Root=n(26),r.Enum=n(3),r.Type=n(18),r.Field=n(5),r.OneOf=n(11),r.MapField=n(19),r.Service=n(20),r.Method=n(21),r.Message=n(12),r.wrappers=n(25),r.types=n(7),r.util=n(0),r.ReflectionObject._(r.Root),r.Namespace._(r.Type,r.Service,r.Enum),r.Root._(r.Type),r.Field._(r.Type)},function(t,i,n){"use strict";var r=i;function e(){r.util._(),r.Writer._(r.BufferWriter),r.Reader._(r.BufferReader)}r.build="minimal",r.Writer=n(9),r.BufferWriter=n(37),r.Reader=n(10),r.BufferReader=n(38),r.util=n(2),r.rpc=n(15),r.roots=n(16),r.configure=e,e()},function(t,i,n){"use strict";i.length=function(t){var i=t.length;if(!i)return 0;for(var n=0;1<--i%4&&"="===t.charAt(i);)++n;return Math.ceil(3*t.length)/4-n};for(var a=new Array(64),h=new Array(123),r=0;r<64;)h[a[r]=r<26?r+65:r<52?r+71:r<62?r-4:r-59|43]=r++;i.encode=function(t,i,n){for(var r,e=null,s=[],o=0,u=0;i<n;){var h=t[i++];switch(u){case 0:s[o++]=a[h>>2],r=(3&h)<<4,u=1;break;case 1:s[o++]=a[r|h>>4],r=(15&h)<<2,u=2;break;case 2:s[o++]=a[r|h>>6],s[o++]=a[63&h],u=0}8191<o&&((e=e||[]).push(String.fromCharCode.apply(String,s)),o=0)}return u&&(s[o++]=a[r],s[o++]=61,1===u&&(s[o++]=61)),e?(o&&e.push(String.fromCharCode.apply(String,s.slice(0,o))),e.join("")):String.fromCharCode.apply(String,s.slice(0,o))};var f="invalid encoding";i.decode=function(t,i,n){for(var r,e=n,s=0,o=0;o<t.length;){var u=t.charCodeAt(o++);if(61===u&&1<s)break;if(void 0===(u=h[u]))throw Error(f);switch(s){case 0:r=u,s=1;break;case 1:i[n++]=r<<2|(48&u)>>4,r=u,s=2;break;case 2:i[n++]=(15&r)<<4|(60&u)>>2,r=u,s=3;break;case 3:i[n++]=(3&r)<<6|u,s=0}}if(1===s)throw Error(f);return n-e},i.test=function(t){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(t)}},function(t,i,n){"use strict";function r(){this.U={}}(t.exports=r).prototype.on=function(t,i,n){return(this.U[t]||(this.U[t]=[])).push({fn:i,ctx:n||this}),this},r.prototype.off=function(t,i){if(void 0===t)this.U={};else if(void 0===i)this.U[t]=[];else for(var n=this.U[t],r=0;r<n.length;)n[r].fn===i?n.splice(r,1):++r;return this},r.prototype.emit=function(t){var i=this.U[t];if(i){for(var n=[],r=1;r<arguments.length;)n.push(arguments[r++]);for(r=0;r<i.length;)i[r].fn.apply(i[r++].ctx,n)}return this}},function(t,i,n){"use strict";function r(t){function i(t,i,n,r){var e=i<0?1:0;0===(i=e?-i:i)?t(0<1/i?0:2147483648,n,r):isNaN(i)?t(2143289344,n,r):t(34028234663852886e22<i?(e<<31|2139095040)>>>0:i<11754943508222875e-54?(e<<31|Math.round(i/1401298464324817e-60))>>>0:(e<<31|(e=Math.floor(Math.log(i)/Math.LN2))+127<<23|8388607&Math.round(i*Math.pow(2,-e)*8388608))>>>0,n,r)}function n(t,i,n){t=t(i,n),i=2*(t>>31)+1,n=t>>>23&255,t&=8388607;return 255==n?t?NaN:1/0*i:0==n?1401298464324817e-60*i*t:i*Math.pow(2,n-150)*(8388608+t)}function r(t,i,n){u[0]=t,i[n]=h[0],i[n+1]=h[1],i[n+2]=h[2],i[n+3]=h[3]}function e(t,i,n){u[0]=t,i[n]=h[3],i[n+1]=h[2],i[n+2]=h[1],i[n+3]=h[0]}function s(t,i){return h[0]=t[i],h[1]=t[i+1],h[2]=t[i+2],h[3]=t[i+3],u[0]}function o(t,i){return h[3]=t[i],h[2]=t[i+1],h[1]=t[i+2],h[0]=t[i+3],u[0]}var u,h,a,f,c;function l(t,i,n,r,e,s){var o,u,h=r<0?1:0;0===(r=h?-r:r)?(t(0,e,s+i),t(0<1/r?0:2147483648,e,s+n)):isNaN(r)?(t(0,e,s+i),t(2146959360,e,s+n)):17976931348623157e292<r?(t(0,e,s+i),t((h<<31|2146435072)>>>0,e,s+n)):r<22250738585072014e-324?(t((o=r/5e-324)>>>0,e,s+i),t((h<<31|o/4294967296)>>>0,e,s+n)):(1024===(u=Math.floor(Math.log(r)/Math.LN2))&&(u=1023),t(4503599627370496*(o=r*Math.pow(2,-u))>>>0,e,s+i),t((h<<31|u+1023<<20|1048576*o&1048575)>>>0,e,s+n))}function v(t,i,n,r,e){i=t(r,e+i),r=t(r,e+n),e=2*(r>>31)+1,n=r>>>20&2047,i=4294967296*(1048575&r)+i;return 2047==n?i?NaN:1/0*e:0==n?5e-324*e*i:e*Math.pow(2,n-1075)*(i+4503599627370496)}function d(t,i,n){a[0]=t,i[n]=f[0],i[n+1]=f[1],i[n+2]=f[2],i[n+3]=f[3],i[n+4]=f[4],i[n+5]=f[5],i[n+6]=f[6],i[n+7]=f[7]}function y(t,i,n){a[0]=t,i[n]=f[7],i[n+1]=f[6],i[n+2]=f[5],i[n+3]=f[4],i[n+4]=f[3],i[n+5]=f[2],i[n+6]=f[1],i[n+7]=f[0]}function b(t,i){return f[0]=t[i],f[1]=t[i+1],f[2]=t[i+2],f[3]=t[i+3],f[4]=t[i+4],f[5]=t[i+5],f[6]=t[i+6],f[7]=t[i+7],a[0]}function p(t,i){return f[7]=t[i],f[6]=t[i+1],f[5]=t[i+2],f[4]=t[i+3],f[3]=t[i+4],f[2]=t[i+5],f[1]=t[i+6],f[0]=t[i+7],a[0]}return"undefined"!=typeof Float32Array?(u=new Float32Array([-0]),h=new Uint8Array(u.buffer),c=128===h[3],t.writeFloatLE=c?r:e,t.writeFloatBE=c?e:r,t.readFloatLE=c?s:o,t.readFloatBE=c?o:s):(t.writeFloatLE=i.bind(null,m),t.writeFloatBE=i.bind(null,w),t.readFloatLE=n.bind(null,_),t.readFloatBE=n.bind(null,g)),"undefined"!=typeof Float64Array?(a=new Float64Array([-0]),f=new Uint8Array(a.buffer),c=128===f[7],t.writeDoubleLE=c?d:y,t.writeDoubleBE=c?y:d,t.readDoubleLE=c?b:p,t.readDoubleBE=c?p:b):(t.writeDoubleLE=l.bind(null,m,0,4),t.writeDoubleBE=l.bind(null,w,4,0),t.readDoubleLE=v.bind(null,_,0,4),t.readDoubleBE=v.bind(null,g,4,0)),t}function m(t,i,n){i[n]=255&t,i[n+1]=t>>>8&255,i[n+2]=t>>>16&255,i[n+3]=t>>>24}function w(t,i,n){i[n]=t>>>24,i[n+1]=t>>>16&255,i[n+2]=t>>>8&255,i[n+3]=255&t}function _(t,i){return(t[i]|t[i+1]<<8|t[i+2]<<16|t[i+3]<<24)>>>0}function g(t,i){return(t[i]<<24|t[i+1]<<16|t[i+2]<<8|t[i+3])>>>0}t.exports=r(r)},function(t,i,n){"use strict";i.length=function(t){for(var i,n=0,r=0;r<t.length;++r)(i=t.charCodeAt(r))<128?n+=1:i<2048?n+=2:55296==(64512&i)&&56320==(64512&t.charCodeAt(r+1))?(++r,n+=4):n+=3;return n},i.read=function(t,i,n){if(n-i<1)return"";for(var r,e=null,s=[],o=0;i<n;)(r=t[i++])<128?s[o++]=r:191<r&&r<224?s[o++]=(31&r)<<6|63&t[i++]:239<r&&r<365?(r=((7&r)<<18|(63&t[i++])<<12|(63&t[i++])<<6|63&t[i++])-65536,s[o++]=55296+(r>>10),s[o++]=56320+(1023&r)):s[o++]=(15&r)<<12|(63&t[i++])<<6|63&t[i++],8191<o&&((e=e||[]).push(String.fromCharCode.apply(String,s)),o=0);return e?(o&&e.push(String.fromCharCode.apply(String,s.slice(0,o))),e.join("")):String.fromCharCode.apply(String,s.slice(0,o))},i.write=function(t,i,n){for(var r,e,s=n,o=0;o<t.length;++o)(r=t.charCodeAt(o))<128?i[n++]=r:(r<2048?i[n++]=r>>6|192:(55296==(64512&r)&&56320==(64512&(e=t.charCodeAt(o+1)))?(++o,i[n++]=(r=65536+((1023&r)<<10)+(1023&e))>>18|240,i[n++]=r>>12&63|128):i[n++]=r>>12|224,i[n++]=r>>6&63|128),i[n++]=63&r|128);return n-s}},function(t,i,n){"use strict";t.exports=function(i,n,t){var r=t||8192,e=r>>>1,s=null,o=r;return function(t){if(t<1||e<t)return i(t);r<o+t&&(s=i(r),o=0);t=n.call(s,o,o+=t);return 7&o&&(o=1+(7|o)),t}}},function(t,i,n){"use strict";t.exports=e;var r=n(2);function e(t,i){this.lo=t>>>0,this.hi=i>>>0}var s=e.zero=new e(0,0);s.toNumber=function(){return 0},s.zzEncode=s.zzDecode=function(){return this},s.length=function(){return 1};e.zeroHash="\0\0\0\0\0\0\0\0";e.fromNumber=function(t){if(0===t)return s;var i=t<0,n=(t=i?-t:t)>>>0,t=(t-n)/4294967296>>>0;return i&&(t=~t>>>0,n=~n>>>0,4294967295<++n&&(n=0,4294967295<++t&&(t=0))),new e(n,t)},e.from=function(t){if("number"==typeof t)return e.fromNumber(t);if(r.isString(t)){if(!r.Long)return e.fromNumber(parseInt(t,10));t=r.Long.fromString(t)}return t.low||t.high?new e(t.low>>>0,t.high>>>0):s},e.prototype.toNumber=function(t){if(!t&&this.hi>>>31){var i=1+~this.lo>>>0,t=~this.hi>>>0;return-(i+4294967296*(t=!i?t+1>>>0:t))}return this.lo+4294967296*this.hi},e.prototype.toLong=function(t){return r.Long?new r.Long(0|this.lo,0|this.hi,Boolean(t)):{low:0|this.lo,high:0|this.hi,unsigned:Boolean(t)}};var o=String.prototype.charCodeAt;e.fromHash=function(t){return"\0\0\0\0\0\0\0\0"===t?s:new e((o.call(t,0)|o.call(t,1)<<8|o.call(t,2)<<16|o.call(t,3)<<24)>>>0,(o.call(t,4)|o.call(t,5)<<8|o.call(t,6)<<16|o.call(t,7)<<24)>>>0)},e.prototype.toHash=function(){return String.fromCharCode(255&this.lo,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,255&this.hi,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},e.prototype.zzEncode=function(){var t=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^t)>>>0,this.lo=(this.lo<<1^t)>>>0,this},e.prototype.zzDecode=function(){var t=-(1&this.lo);return this.lo=((this.lo>>>1|this.hi<<31)^t)>>>0,this.hi=(this.hi>>>1^t)>>>0,this},e.prototype.length=function(){var t=this.lo,i=(this.lo>>>28|this.hi<<4)>>>0,n=this.hi>>>24;return 0==n?0==i?t<16384?t<128?1:2:t<2097152?3:4:i<16384?i<128?5:6:i<2097152?7:8:n<128?9:10}},function(t,i,n){"use strict";t.exports=s;var r=n(9);(s.prototype=Object.create(r.prototype)).constructor=s;var e=n(2);function s(){r.call(this)}function o(t,i,n){t.length<40?e.utf8.write(t,i,n):i.utf8Write?i.utf8Write(t,n):i.write(t,n)}s._=function(){s.alloc=e.v,s.writeBytesBuffer=e.Buffer&&e.Buffer.prototype instanceof Uint8Array&&"set"===e.Buffer.prototype.set.name?function(t,i,n){i.set(t,n)}:function(t,i,n){if(t.copy)t.copy(i,n,0,t.length);else for(var r=0;r<t.length;)i[n++]=t[r++]}},s.prototype.bytes=function(t){var i=(t=e.isString(t)?e.u(t,"base64"):t).length>>>0;return this.uint32(i),i&&this.T(s.writeBytesBuffer,i,t),this},s.prototype.string=function(t){var i=e.Buffer.byteLength(t);return this.uint32(i),i&&this.T(o,i,t),this},s._()},function(t,i,n){"use strict";t.exports=s;var r=n(10);(s.prototype=Object.create(r.prototype)).constructor=s;var e=n(2);function s(t){r.call(this,t)}s._=function(){e.Buffer&&(s.prototype.R=e.Buffer.prototype.slice)},s.prototype.string=function(){var t=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+t,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+t,this.len))},s._()},function(t,i,n){"use strict";t.exports=r;var u=n(2);function r(t,i,n){if("function"!=typeof t)throw TypeError("rpcImpl must be a function");u.EventEmitter.call(this),this.rpcImpl=t,this.requestDelimited=Boolean(i),this.responseDelimited=Boolean(n)}((r.prototype=Object.create(u.EventEmitter.prototype)).constructor=r).prototype.rpcCall=function t(n,i,r,e,s){if(!e)throw TypeError("request must be specified");var o=this;if(!s)return u.asPromise(t,o,n,i,r,e);if(o.rpcImpl)try{return o.rpcImpl(n,i[o.requestDelimited?"encodeDelimited":"encode"](e).finish(),function(t,i){if(t)return o.emit("error",t,n),s(t);if(null!==i){if(!(i instanceof r))try{i=r[o.responseDelimited?"decodeDelimited":"decode"](i)}catch(t){return o.emit("error",t,n),s(t)}return o.emit("data",i,n),s(null,i)}o.end(!0)})}catch(t){return o.emit("error",t,n),void setTimeout(function(){s(t)},0)}else setTimeout(function(){s(Error("already ended"))},0)},r.prototype.end=function(t){return this.rpcImpl&&(t||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this}},function(t,i,n){"use strict";function r(i,n){"string"==typeof i&&(n=i,i=void 0);var h=[];function a(t){if("string"!=typeof t){var i="return "+(i=f());if(t){for(var n=Object.keys(t),r=new Array(n.length+1),e=new Array(n.length),s=0;s<n.length;)r[s]=n[s],e[s]=t[n[s++]];return r[s]=i,Function.apply(null,r).apply(null,e)}return Function(i)()}for(var o=new Array(arguments.length-1),u=0;u<o.length;)o[u]=arguments[++u];if(u=0,t=t.replace(/%([%dfijs])/g,function(t,i){var n=o[u++];switch(i){case"d":case"f":return String(Number(n));case"i":return String(Math.floor(n));case"j":return JSON.stringify(n);case"s":return String(n)}return"%"}),u!==o.length)throw Error("parameter count mismatch");return h.push(t),a}function f(t){return"function "+(t||n||"")+"("+(i&&i.join(",")||"")+"){\n  "+h.join("\n  ")+"\n}"}return a.toString=f,a}(t.exports=r).verbose=!1},function(t,i,n){"use strict";t.exports=u;var s=n(13),o=n(14)("fs");function u(n,r,e){return r="function"==typeof r?(e=r,{}):r||{},e?!r.xhr&&o&&o.readFile?o.readFile(n,function(t,i){return t&&"undefined"!=typeof XMLHttpRequest?u.xhr(n,r,e):t?e(t):e(null,r.binary?i:i.toString("utf8"))}):u.xhr(n,r,e):s(u,this,n,r)}u.xhr=function(t,n,r){var e=new XMLHttpRequest;e.onreadystatechange=function(){if(4===e.readyState){if(0!==e.status&&200!==e.status)return r(Error("status "+e.status));if(n.binary){if(!(t=e.response))for(var t=[],i=0;i<e.responseText.length;++i)t.push(255&e.responseText.charCodeAt(i));return r(null,"undefined"!=typeof Uint8Array?new Uint8Array(t):t)}return r(null,e.responseText)}},n.binary&&("overrideMimeType"in e&&e.overrideMimeType("text/plain; charset=x-user-defined"),e.responseType="arraybuffer"),e.open("GET",t),e.send()}},function(t,i,n){"use strict";var i=i,e=i.isAbsolute=function(t){return/^(?:\/|\w+:)/.test(t)},r=i.normalize=function(t){var i=(t=t.replace(/\\/g,"/").replace(/\/{2,}/g,"/")).split("/"),n=e(t),t="";n&&(t=i.shift()+"/");for(var r=0;r<i.length;)".."===i[r]?0<r&&".."!==i[r-1]?i.splice(--r,2):n?i.splice(r,1):++r:"."===i[r]?i.splice(r,1):++r;return t+i.join("/")};i.resolve=function(t,i,n){return n||(i=r(i)),!e(i)&&(t=(t=!n?r(t):t).replace(/(?:\/|^)[^/]+$/,"")).length?r(t+"/"+i):i}},function(t,I,N){"use strict";!function(t){var u=N(44),s=N(45),o=N(46);function n(){return c.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function e(t,i){if(n()<i)throw new RangeError("Invalid typed array length");return c.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(i)).__proto__=c.prototype:(t=null===t?new c(i):t).length=i,t}function c(t,i,n){if(!(c.TYPED_ARRAY_SUPPORT||this instanceof c))return new c(t,i,n);if("number"!=typeof t)return r(this,t,i,n);if("string"==typeof i)throw new Error("If encoding is specified then the first argument must be a string");return a(this,t)}function r(t,i,n,r){if("number"==typeof i)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&i instanceof ArrayBuffer?function(t,i,n,r){if(i.byteLength,n<0||i.byteLength<n)throw new RangeError("'offset' is out of bounds");if(i.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");i=void 0===n&&void 0===r?new Uint8Array(i):void 0===r?new Uint8Array(i,n):new Uint8Array(i,n,r);c.TYPED_ARRAY_SUPPORT?(t=i).__proto__=c.prototype:t=f(t,i);return t}(t,i,n,r):"string"==typeof i?function(t,i,n){"string"==typeof n&&""!==n||(n="utf8");if(!c.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|v(i,n),n=(t=e(t,r)).write(i,n);n!==r&&(t=t.slice(0,n));return t}(t,i,n):function(t,i){if(c.isBuffer(i)){var n=0|l(i.length);return 0===(t=e(t,n)).length?t:(i.copy(t,0,0,n),t)}if(i){if("undefined"!=typeof ArrayBuffer&&i.buffer instanceof ArrayBuffer||"length"in i)return"number"!=typeof i.length||function(t){return t!=t}(i.length)?e(t,0):f(t,i);if("Buffer"===i.type&&o(i.data))return f(t,i.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(t,i)}function h(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function a(t,i){if(h(i),t=e(t,i<0?0:0|l(i)),!c.TYPED_ARRAY_SUPPORT)for(var n=0;n<i;++n)t[n]=0;return t}function f(t,i){var n=i.length<0?0:0|l(i.length);t=e(t,n);for(var r=0;r<n;r+=1)t[r]=255&i[r];return t}function l(t){if(t>=n())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+n().toString(16)+" bytes");return 0|t}function v(t,i){if(c.isBuffer(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;var n=(t="string"!=typeof t?""+t:t).length;if(0===n)return 0;for(var r=!1;;)switch(i){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return R(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return A(t).length;default:if(r)return R(t).length;i=(""+i).toLowerCase(),r=!0}}function i(t,i,n){var r,e,s,o=!1;if((i=void 0===i||i<0?0:i)>this.length)return"";if((n=void 0===n||n>this.length?this.length:n)<=0)return"";if((n>>>=0)<=(i>>>=0))return"";for(t=t||"utf8";;)switch(t){case"hex":return function(t,i,n){var r=t.length;(!i||i<0)&&(i=0);(!n||n<0||r<n)&&(n=r);for(var e="",s=i;s<n;++s)e+=function(t){return t<16?"0"+t.toString(16):t.toString(16)}(t[s]);return e}(this,i,n);case"utf8":case"utf-8":return w(this,i,n);case"ascii":return function(t,i,n){var r="";n=Math.min(t.length,n);for(var e=i;e<n;++e)r+=String.fromCharCode(127&t[e]);return r}(this,i,n);case"latin1":case"binary":return function(t,i,n){var r="";n=Math.min(t.length,n);for(var e=i;e<n;++e)r+=String.fromCharCode(t[e]);return r}(this,i,n);case"base64":return r=this,s=n,0===(e=i)&&s===r.length?u.fromByteArray(r):u.fromByteArray(r.slice(e,s));case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return function(t,i,n){for(var r=t.slice(i,n),e="",s=0;s<r.length;s+=2)e+=String.fromCharCode(r[s]+256*r[s+1]);return e}(this,i,n);default:if(o)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),o=!0}}function d(t,i,n){var r=t[i];t[i]=t[n],t[n]=r}function y(t,i,n,r,e){if(0===t.length)return-1;if("string"==typeof n?(r=n,n=0):2147483647<n?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,(n=(n=isNaN(n)?e?0:t.length-1:n)<0?t.length+n:n)>=t.length){if(e)return-1;n=t.length-1}else if(n<0){if(!e)return-1;n=0}if("string"==typeof i&&(i=c.from(i,r)),c.isBuffer(i))return 0===i.length?-1:b(t,i,n,r,e);if("number"==typeof i)return i&=255,c.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?(e?Uint8Array.prototype.indexOf:Uint8Array.prototype.lastIndexOf).call(t,i,n):b(t,[i],n,r,e);throw new TypeError("val must be string, number or Buffer")}function b(t,i,n,r,e){var s=1,o=t.length,u=i.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(t.length<2||i.length<2)return-1;o/=s=2,u/=2,n/=2}function h(t,i){return 1===s?t[i]:t.readUInt16BE(i*s)}if(e)for(var a=-1,f=n;f<o;f++)if(h(t,f)===h(i,-1===a?0:f-a)){if(f-(a=-1===a?f:a)+1===u)return a*s}else-1!==a&&(f-=f-a),a=-1;else for(f=n=o<n+u?o-u:n;0<=f;f--){for(var c=!0,l=0;l<u;l++)if(h(t,f+l)!==h(i,l)){c=!1;break}if(c)return f}return-1}function p(t,i,n,r){return S(function(t){for(var i=[],n=0;n<t.length;++n)i.push(255&t.charCodeAt(n));return i}(i),t,n,r)}function m(t,i,n,r){return S(function(t,i){for(var n,r,e=[],s=0;s<t.length&&!((i-=2)<0);++s)r=t.charCodeAt(s),n=r>>8,r=r%256,e.push(r),e.push(n);return e}(i,t.length-n),t,n,r)}function w(t,i,n){n=Math.min(t.length,n);for(var r=[],e=i;e<n;){var s,o,u,h,a=t[e],f=null,c=239<a?4:223<a?3:191<a?2:1;if(e+c<=n)switch(c){case 1:a<128&&(f=a);break;case 2:128==(192&(s=t[e+1]))&&127<(h=(31&a)<<6|63&s)&&(f=h);break;case 3:s=t[e+1],o=t[e+2],128==(192&s)&&128==(192&o)&&2047<(h=(15&a)<<12|(63&s)<<6|63&o)&&(h<55296||57343<h)&&(f=h);break;case 4:s=t[e+1],o=t[e+2],u=t[e+3],128==(192&s)&&128==(192&o)&&128==(192&u)&&65535<(h=(15&a)<<18|(63&s)<<12|(63&o)<<6|63&u)&&h<1114112&&(f=h)}null===f?(f=65533,c=1):65535<f&&(f-=65536,r.push(f>>>10&1023|55296),f=56320|1023&f),r.push(f),e+=c}return function(t){var i=t.length;if(i<=_)return String.fromCharCode.apply(String,t);var n="",r=0;for(;r<i;)n+=String.fromCharCode.apply(String,t.slice(r,r+=_));return n}(r)}I.Buffer=c,I.SlowBuffer=function(t){+t!=t&&(t=0);return c.alloc(+t)},I.INSPECT_MAX_BYTES=50,c.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:function(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(t){return!1}}(),I.kMaxLength=n(),c.poolSize=8192,c.G=function(t){return t.__proto__=c.prototype,t},c.from=function(t,i,n){return r(null,t,i,n)},c.TYPED_ARRAY_SUPPORT&&(c.prototype.__proto__=Uint8Array.prototype,c.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&c[Symbol.species]===c&&Object.defineProperty(c,Symbol.species,{value:null,configurable:!0})),c.alloc=function(t,i,n){return r=null,i=i,n=n,h(t=t),!(t<=0)&&void 0!==i?"string"==typeof n?e(r,t).fill(i,n):e(r,t).fill(i):e(r,t);var r},c.allocUnsafe=function(t){return a(null,t)},c.allocUnsafeSlow=function(t){return a(null,t)},c.isBuffer=function(t){return!(null==t||!t.Z)},c.compare=function(t,i){if(!c.isBuffer(t)||!c.isBuffer(i))throw new TypeError("Arguments must be Buffers");if(t===i)return 0;for(var n=t.length,r=i.length,e=0,s=Math.min(n,r);e<s;++e)if(t[e]!==i[e]){n=t[e],r=i[e];break}return n<r?-1:r<n?1:0},c.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},c.concat=function(t,i){if(!o(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return c.alloc(0);if(void 0===i)for(e=i=0;e<t.length;++e)i+=t[e].length;for(var n=c.allocUnsafe(i),r=0,e=0;e<t.length;++e){var s=t[e];if(!c.isBuffer(s))throw new TypeError('"list" argument must be an Array of Buffers');s.copy(n,r),r+=s.length}return n},c.byteLength=v,c.prototype.Z=!0,c.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var i=0;i<t;i+=2)d(this,i,i+1);return this},c.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var i=0;i<t;i+=4)d(this,i,i+3),d(this,i+1,i+2);return this},c.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var i=0;i<t;i+=8)d(this,i,i+7),d(this,i+1,i+6),d(this,i+2,i+5),d(this,i+3,i+4);return this},c.prototype.toString=function(){var t=0|this.length;return 0==t?"":0===arguments.length?w(this,0,t):i.apply(this,arguments)},c.prototype.equals=function(t){if(!c.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===c.compare(this,t)},c.prototype.inspect=function(){var t="",i=I.INSPECT_MAX_BYTES;return 0<this.length&&(t=this.toString("hex",0,i).match(/.{2}/g).join(" "),this.length>i&&(t+=" ... ")),"<Buffer "+t+">"},c.prototype.compare=function(t,i,n,r,e){if(!c.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===n&&(n=t?t.length:0),void 0===r&&(r=0),void 0===e&&(e=this.length),(i=void 0===i?0:i)<0||n>t.length||r<0||e>this.length)throw new RangeError("out of range index");if(e<=r&&n<=i)return 0;if(e<=r)return-1;if(n<=i)return 1;if(this===t)return 0;for(var s=(e>>>=0)-(r>>>=0),o=(n>>>=0)-(i>>>=0),u=Math.min(s,o),h=this.slice(r,e),a=t.slice(i,n),f=0;f<u;++f)if(h[f]!==a[f]){s=h[f],o=a[f];break}return s<o?-1:o<s?1:0},c.prototype.includes=function(t,i,n){return-1!==this.indexOf(t,i,n)},c.prototype.indexOf=function(t,i,n){return y(this,t,i,n,!0)},c.prototype.lastIndexOf=function(t,i,n){return y(this,t,i,n,!1)},c.prototype.write=function(t,i,n,r){if(void 0===i)r="utf8",n=this.length,i=0;else if(void 0===n&&"string"==typeof i)r=i,n=this.length,i=0;else{if(!isFinite(i))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");i|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var e=this.length-i;if((void 0===n||e<n)&&(n=e),0<t.length&&(n<0||i<0)||i>this.length)throw new RangeError("Attempt to write outside buffer bounds");r=r||"utf8";for(var s,o,u,h=!1;;)switch(r){case"hex":return function(t,i,n,r){n=Number(n)||0;var e=t.length-n;if((!r||e<(r=Number(r)))&&(r=e),(e=i.length)%2!=0)throw new TypeError("Invalid hex string");e/2<r&&(r=e/2);for(var s=0;s<r;++s){var o=parseInt(i.substr(2*s,2),16);if(isNaN(o))return s;t[n+s]=o}return s}(this,t,i,n);case"utf8":case"utf-8":return o=i,u=n,S(R(t,(s=this).length-o),s,o,u);case"ascii":return p(this,t,i,n);case"latin1":case"binary":return p(this,t,i,n);case"base64":return s=this,o=i,u=n,S(A(t),s,o,u);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return m(this,t,i,n);default:if(h)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),h=!0}},c.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this.W||this,0)}};var _=4096;function g(t,i,n){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(n<t+i)throw new RangeError("Trying to access beyond buffer length")}function x(t,i,n,r,e,s){if(!c.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e<i||i<s)throw new RangeError('"value" argument is out of bounds');if(n+r>t.length)throw new RangeError("Index out of range")}function O(t,i,n,r){i<0&&(i=65535+i+1);for(var e=0,s=Math.min(t.length-n,2);e<s;++e)t[n+e]=(i&255<<8*(r?e:1-e))>>>8*(r?e:1-e)}function M(t,i,n,r){i<0&&(i=4294967295+i+1);for(var e=0,s=Math.min(t.length-n,4);e<s;++e)t[n+e]=i>>>8*(r?e:3-e)&255}function j(t,i,n,r){if(n+r>t.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function E(t,i,n,r,e){return e||j(t,0,n,4),s.write(t,i,n,r,23,4),n+4}function k(t,i,n,r,e){return e||j(t,0,n,8),s.write(t,i,n,r,52,8),n+8}c.prototype.slice=function(t,i){var n=this.length;if((t=~~t)<0?(t+=n)<0&&(t=0):n<t&&(t=n),(i=void 0===i?n:~~i)<0?(i+=n)<0&&(i=0):n<i&&(i=n),i<t&&(i=t),c.TYPED_ARRAY_SUPPORT)(e=this.subarray(t,i)).__proto__=c.prototype;else for(var r=i-t,e=new c(r,void 0),s=0;s<r;++s)e[s]=this[s+t];return e},c.prototype.readUIntLE=function(t,i,n){t|=0,i|=0,n||g(t,i,this.length);for(var r=this[t],e=1,s=0;++s<i&&(e*=256);)r+=this[t+s]*e;return r},c.prototype.readUIntBE=function(t,i,n){t|=0,i|=0,n||g(t,i,this.length);for(var r=this[t+--i],e=1;0<i&&(e*=256);)r+=this[t+--i]*e;return r},c.prototype.readUInt8=function(t,i){return i||g(t,1,this.length),this[t]},c.prototype.readUInt16LE=function(t,i){return i||g(t,2,this.length),this[t]|this[t+1]<<8},c.prototype.readUInt16BE=function(t,i){return i||g(t,2,this.length),this[t]<<8|this[t+1]},c.prototype.readUInt32LE=function(t,i){return i||g(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},c.prototype.readUInt32BE=function(t,i){return i||g(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},c.prototype.readIntLE=function(t,i,n){t|=0,i|=0,n||g(t,i,this.length);for(var r=this[t],e=1,s=0;++s<i&&(e*=256);)r+=this[t+s]*e;return(e*=128)<=r&&(r-=Math.pow(2,8*i)),r},c.prototype.readIntBE=function(t,i,n){t|=0,i|=0,n||g(t,i,this.length);for(var r=i,e=1,s=this[t+--r];0<r&&(e*=256);)s+=this[t+--r]*e;return(e*=128)<=s&&(s-=Math.pow(2,8*i)),s},c.prototype.readInt8=function(t,i){return i||g(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},c.prototype.readInt16LE=function(t,i){i||g(t,2,this.length);t=this[t]|this[t+1]<<8;return 32768&t?4294901760|t:t},c.prototype.readInt16BE=function(t,i){i||g(t,2,this.length);t=this[t+1]|this[t]<<8;return 32768&t?4294901760|t:t},c.prototype.readInt32LE=function(t,i){return i||g(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},c.prototype.readInt32BE=function(t,i){return i||g(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},c.prototype.readFloatLE=function(t,i){return i||g(t,4,this.length),s.read(this,t,!0,23,4)},c.prototype.readFloatBE=function(t,i){return i||g(t,4,this.length),s.read(this,t,!1,23,4)},c.prototype.readDoubleLE=function(t,i){return i||g(t,8,this.length),s.read(this,t,!0,52,8)},c.prototype.readDoubleBE=function(t,i){return i||g(t,8,this.length),s.read(this,t,!1,52,8)},c.prototype.writeUIntLE=function(t,i,n,r){t=+t,i|=0,n|=0,r||x(this,t,i,n,Math.pow(2,8*n)-1,0);var e=1,s=0;for(this[i]=255&t;++s<n&&(e*=256);)this[i+s]=t/e&255;return i+n},c.prototype.writeUIntBE=function(t,i,n,r){t=+t,i|=0,n|=0,r||x(this,t,i,n,Math.pow(2,8*n)-1,0);var e=n-1,s=1;for(this[i+e]=255&t;0<=--e&&(s*=256);)this[i+e]=t/s&255;return i+n},c.prototype.writeUInt8=function(t,i,n){return t=+t,i|=0,n||x(this,t,i,1,255,0),c.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[i]=255&t,i+1},c.prototype.writeUInt16LE=function(t,i,n){return t=+t,i|=0,n||x(this,t,i,2,65535,0),c.TYPED_ARRAY_SUPPORT?(this[i]=255&t,this[i+1]=t>>>8):O(this,t,i,!0),i+2},c.prototype.writeUInt16BE=function(t,i,n){return t=+t,i|=0,n||x(this,t,i,2,65535,0),c.TYPED_ARRAY_SUPPORT?(this[i]=t>>>8,this[i+1]=255&t):O(this,t,i,!1),i+2},c.prototype.writeUInt32LE=function(t,i,n){return t=+t,i|=0,n||x(this,t,i,4,4294967295,0),c.TYPED_ARRAY_SUPPORT?(this[i+3]=t>>>24,this[i+2]=t>>>16,this[i+1]=t>>>8,this[i]=255&t):M(this,t,i,!0),i+4},c.prototype.writeUInt32BE=function(t,i,n){return t=+t,i|=0,n||x(this,t,i,4,4294967295,0),c.TYPED_ARRAY_SUPPORT?(this[i]=t>>>24,this[i+1]=t>>>16,this[i+2]=t>>>8,this[i+3]=255&t):M(this,t,i,!1),i+4},c.prototype.writeIntLE=function(t,i,n,r){t=+t,i|=0,r||x(this,t,i,n,(r=Math.pow(2,8*n-1))-1,-r);var e=0,s=1,o=0;for(this[i]=255&t;++e<n&&(s*=256);)t<0&&0===o&&0!==this[i+e-1]&&(o=1),this[i+e]=(t/s>>0)-o&255;return i+n},c.prototype.writeIntBE=function(t,i,n,r){t=+t,i|=0,r||x(this,t,i,n,(r=Math.pow(2,8*n-1))-1,-r);var e=n-1,s=1,o=0;for(this[i+e]=255&t;0<=--e&&(s*=256);)t<0&&0===o&&0!==this[i+e+1]&&(o=1),this[i+e]=(t/s>>0)-o&255;return i+n},c.prototype.writeInt8=function(t,i,n){return t=+t,i|=0,n||x(this,t,i,1,127,-128),c.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[i]=255&(t=t<0?255+t+1:t),i+1},c.prototype.writeInt16LE=function(t,i,n){return t=+t,i|=0,n||x(this,t,i,2,32767,-32768),c.TYPED_ARRAY_SUPPORT?(this[i]=255&t,this[i+1]=t>>>8):O(this,t,i,!0),i+2},c.prototype.writeInt16BE=function(t,i,n){return t=+t,i|=0,n||x(this,t,i,2,32767,-32768),c.TYPED_ARRAY_SUPPORT?(this[i]=t>>>8,this[i+1]=255&t):O(this,t,i,!1),i+2},c.prototype.writeInt32LE=function(t,i,n){return t=+t,i|=0,n||x(this,t,i,4,2147483647,-2147483648),c.TYPED_ARRAY_SUPPORT?(this[i]=255&t,this[i+1]=t>>>8,this[i+2]=t>>>16,this[i+3]=t>>>24):M(this,t,i,!0),i+4},c.prototype.writeInt32BE=function(t,i,n){return t=+t,i|=0,n||x(this,t,i,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),c.TYPED_ARRAY_SUPPORT?(this[i]=t>>>24,this[i+1]=t>>>16,this[i+2]=t>>>8,this[i+3]=255&t):M(this,t,i,!1),i+4},c.prototype.writeFloatLE=function(t,i,n){return E(this,t,i,!0,n)},c.prototype.writeFloatBE=function(t,i,n){return E(this,t,i,!1,n)},c.prototype.writeDoubleLE=function(t,i,n){return k(this,t,i,!0,n)},c.prototype.writeDoubleBE=function(t,i,n){return k(this,t,i,!1,n)},c.prototype.copy=function(t,i,n,r){if(n=n||0,r||0===r||(r=this.length),i>=t.length&&(i=t.length),(r=0<r&&r<n?n:r)===n)return 0;if(0===t.length||0===this.length)return 0;if((i=i||0)<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length);var e,s=(r=t.length-i<r-n?t.length-i+n:r)-n;if(this===t&&n<i&&i<r)for(e=s-1;0<=e;--e)t[e+i]=this[e+n];else if(s<1e3||!c.TYPED_ARRAY_SUPPORT)for(e=0;e<s;++e)t[e+i]=this[e+n];else Uint8Array.prototype.set.call(t,this.subarray(n,n+s),i);return s},c.prototype.fill=function(t,i,n,r){if("string"==typeof t){var e;if("string"==typeof i?(r=i,i=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),1!==t.length||(e=t.charCodeAt(0))<256&&(t=e),void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!c.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof t&&(t&=255);if(i<0||this.length<i||this.length<n)throw new RangeError("Out of range index");if(n<=i)return this;if(i>>>=0,n=void 0===n?this.length:n>>>0,"number"==typeof(t=t||0))for(u=i;u<n;++u)this[u]=t;else for(var s=c.isBuffer(t)?t:R(new c(t,r).toString()),o=s.length,u=0;u<n-i;++u)this[u+i]=s[u%o];return this};var T=/[^+\/0-9A-Za-z-_]/g;function R(t,i){var n;i=i||1/0;for(var r=t.length,e=null,s=[],o=0;o<r;++o){if(55295<(n=t.charCodeAt(o))&&n<57344){if(!e){if(56319<n){-1<(i-=3)&&s.push(239,191,189);continue}if(o+1===r){-1<(i-=3)&&s.push(239,191,189);continue}e=n;continue}if(n<56320){-1<(i-=3)&&s.push(239,191,189),e=n;continue}n=65536+(e-55296<<10|n-56320)}else e&&-1<(i-=3)&&s.push(239,191,189);if(e=null,n<128){if(--i<0)break;s.push(n)}else if(n<2048){if((i-=2)<0)break;s.push(n>>6|192,63&n|128)}else if(n<65536){if((i-=3)<0)break;s.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((i-=4)<0)break;s.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return s}function A(t){return u.toByteArray(function(t){var i;if((t=((i=t).trim?i.trim():i.replace(/^\s+|\s+$/g,"")).replace(T,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function S(t,i,n,r){for(var e=0;e<r&&!(e+n>=i.length||e>=t.length);++e)i[e+n]=t[e];return e}}.call(this,N(8))},function(t,i,n){"use strict";i.byteLength=function(t){var i=f(t),t=i[0],i=i[1];return 3*(t+i)/4-i},i.toByteArray=function(t){var i,n,r=f(t),e=r[0],r=r[1],s=new a(function(t,i){return 3*(t+i)/4-i}(e,r)),o=0,u=0<r?e-4:e;for(n=0;n<u;n+=4)i=h[t.charCodeAt(n)]<<18|h[t.charCodeAt(n+1)]<<12|h[t.charCodeAt(n+2)]<<6|h[t.charCodeAt(n+3)],s[o++]=i>>16&255,s[o++]=i>>8&255,s[o++]=255&i;2===r&&(i=h[t.charCodeAt(n)]<<2|h[t.charCodeAt(n+1)]>>4,s[o++]=255&i);1===r&&(i=h[t.charCodeAt(n)]<<10|h[t.charCodeAt(n+1)]<<4|h[t.charCodeAt(n+2)]>>2,s[o++]=i>>8&255,s[o++]=255&i);return s},i.fromByteArray=function(t){for(var i,n=t.length,r=n%3,e=[],s=0,o=n-r;s<o;s+=16383)e.push(function(t,i,n){for(var r,e=[],s=i;s<n;s+=3)r=(t[s]<<16&16711680)+(t[s+1]<<8&65280)+(255&t[s+2]),e.push(function(t){return u[t>>18&63]+u[t>>12&63]+u[t>>6&63]+u[63&t]}(r));return e.join("")}(t,s,o<s+16383?o:s+16383));1==r?(i=t[n-1],e.push(u[i>>2]+u[i<<4&63]+"==")):2==r&&(i=(t[n-2]<<8)+t[n-1],e.push(u[i>>10]+u[i>>4&63]+u[i<<2&63]+"="));return e.join("")};for(var u=[],h=[],a="undefined"!=typeof Uint8Array?Uint8Array:Array,r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",e=0,s=r.length;e<s;++e)u[e]=r[e],h[r.charCodeAt(e)]=e;function f(t){var i=t.length;if(0<i%4)throw new Error("Invalid string. Length must be a multiple of 4");t=t.indexOf("=");return[t=-1===t?i:t,t===i?0:4-t%4]}h["-".charCodeAt(0)]=62,h["_".charCodeAt(0)]=63},function(t,i){i.read=function(t,i,n,r,e){var s,o,u=8*e-r-1,h=(1<<u)-1,a=h>>1,f=-7,c=n?e-1:0,l=n?-1:1,n=t[i+c];for(c+=l,s=n&(1<<-f)-1,n>>=-f,f+=u;0<f;s=256*s+t[i+c],c+=l,f-=8);for(o=s&(1<<-f)-1,s>>=-f,f+=r;0<f;o=256*o+t[i+c],c+=l,f-=8);if(0===s)s=1-a;else{if(s===h)return o?NaN:1/0*(n?-1:1);o+=Math.pow(2,r),s-=a}return(n?-1:1)*o*Math.pow(2,s-r)},i.write=function(t,i,n,r,e,s){var o,u,h=8*s-e-1,a=(1<<h)-1,f=a>>1,c=23===e?Math.pow(2,-24)-Math.pow(2,-77):0,l=r?0:s-1,v=r?1:-1,s=i<0||0===i&&1/i<0?1:0;for(i=Math.abs(i),isNaN(i)||i===1/0?(u=isNaN(i)?1:0,o=a):(o=Math.floor(Math.log(i)/Math.LN2),i*(r=Math.pow(2,-o))<1&&(o--,r*=2),2<=(i+=1<=o+f?c/r:c*Math.pow(2,1-f))*r&&(o++,r/=2),a<=o+f?(u=0,o=a):1<=o+f?(u=(i*r-1)*Math.pow(2,e),o+=f):(u=i*Math.pow(2,f-1)*Math.pow(2,e),o=0));8<=e;t[n+l]=255&u,l+=v,u/=256,e-=8);for(o=o<<e|u,h+=e;0<h;t[n+l]=255&o,l+=v,o/=256,h-=8);t[n+l-v]|=128*s}},function(t,i){var n={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==n.call(t)}},function(t,i){t.exports=__WEBPACK_EXTERNAL_MODULE__47__},function(t,a,i){!function(e){function s(t,i){for(var n=0,r=t.length-1;0<=r;r--){var e=t[r];"."===e?t.splice(r,1):".."===e?(t.splice(r,1),n++):n&&(t.splice(r,1),n--)}if(i)for(;n--;)t.unshift("..");return t}function o(t,i){if(t.filter)return t.filter(i);for(var n=[],r=0;r<t.length;r++)i(t[r],r,t)&&n.push(t[r]);return n}a.resolve=function(){for(var t="",i=!1,n=arguments.length-1;-1<=n&&!i;n--){var r=0<=n?arguments[n]:e.cwd();if("string"!=typeof r)throw new TypeError("Arguments to path.resolve must be strings");r&&(t=r+"/"+t,i="/"===r.charAt(0))}return(i?"/":"")+(t=s(o(t.split("/"),function(t){return!!t}),!i).join("/"))||"."},a.normalize=function(t){var i=a.isAbsolute(t),n="/"===r(t,-1);return(t=!(t=s(o(t.split("/"),function(t){return!!t}),!i).join("/"))&&!i?".":t)&&n&&(t+="/"),(i?"/":"")+t},a.isAbsolute=function(t){return"/"===t.charAt(0)},a.join=function(){var t=Array.prototype.slice.call(arguments,0);return a.normalize(o(t,function(t,i){if("string"!=typeof t)throw new TypeError("Arguments to path.join must be strings");return t}).join("/"))},a.relative=function(t,i){function n(t){for(var i=0;i<t.length&&""===t[i];i++);for(var n=t.length-1;0<=n&&""===t[n];n--);return n<i?[]:t.slice(i,n-i+1)}t=a.resolve(t).substr(1),i=a.resolve(i).substr(1);for(var r=n(t.split("/")),e=n(i.split("/")),s=Math.min(r.length,e.length),o=s,u=0;u<s;u++)if(r[u]!==e[u]){o=u;break}for(var h=[],u=o;u<r.length;u++)h.push("..");return(h=h.concat(e.slice(o))).join("/")},a.sep="/",a.delimiter=":",a.dirname=function(t){if("string"!=typeof t&&(t+=""),0===t.length)return".";for(var i=t.charCodeAt(0),n=47===i,r=-1,e=!0,s=t.length-1;1<=s;--s)if(47===t.charCodeAt(s)){if(!e){r=s;break}}else e=!1;return-1===r?n?"/":".":n&&1===r?"/":t.slice(0,r)},a.basename=function(t,i){t=function(t){"string"!=typeof t&&(t+="");for(var i=0,n=-1,r=!0,e=t.length-1;0<=e;--e)if(47===t.charCodeAt(e)){if(!r){i=e+1;break}}else-1===n&&(r=!1,n=e+1);return-1===n?"":t.slice(i,n)}(t);return t=i&&t.substr(-1*i.length)===i?t.substr(0,t.length-i.length):t},a.extname=function(t){"string"!=typeof t&&(t+="");for(var i=-1,n=0,r=-1,e=!0,s=0,o=t.length-1;0<=o;--o){var u=t.charCodeAt(o);if(47===u){if(e)continue;n=o+1;break}-1===r&&(e=!1,r=o+1),46===u?-1===i?i=o:1!==s&&(s=1):-1!==i&&(s=-1)}return-1===i||-1===r||0===s||1===s&&i===r-1&&i===n+1?"":t.slice(i,r)};var r="b"==="ab".substr(-1)?function(t,i,n){return t.substr(i,n)}:function(t,i,n){return i<0&&(i=t.length+i),t.substr(i,n)}}.call(this,i(49))},function(t,i){var n,r,t=t.exports={};function e(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function o(i){if(n===setTimeout)return setTimeout(i,0);if((n===e||!n)&&setTimeout)return n=setTimeout,setTimeout(i,0);try{return n(i,0)}catch(t){try{return n.call(null,i,0)}catch(t){return n.call(this,i,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:e}catch(t){n=e}try{r="function"==typeof clearTimeout?clearTimeout:s}catch(t){r=s}}();var u,h=[],a=!1,f=-1;function c(){a&&u&&(a=!1,u.length?h=u.concat(h):f=-1,h.length&&l())}function l(){if(!a){var t=o(c);a=!0;for(var i=h.length;i;){for(u=h,h=[];++f<i;)u&&u[f].run();f=-1,i=h.length}u=null,a=!1,function(i){if(r===clearTimeout)return clearTimeout(i);if((r===s||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(i);try{r(i)}catch(t){try{return r.call(null,i)}catch(t){return r.call(this,i)}}}(t)}}function v(t,i){this.fun=t,this.array=i}function d(){}t.nextTick=function(t){var i=new Array(arguments.length-1);if(1<arguments.length)for(var n=1;n<arguments.length;n++)i[n-1]=arguments[n];h.push(new v(t,i)),1!==h.length||a||o(l)},v.prototype.run=function(){this.fun.apply(null,this.array)},t.title="browser",t.browser=!0,t.env={},t.argv=[],t.version="",t.versions={},t.on=d,t.addListener=d,t.once=d,t.off=d,t.removeListener=d,t.removeAllListeners=d,t.emit=d,t.prependListener=d,t.prependOnceListener=d,t.listeners=function(t){return[]},t.binding=function(t){throw new Error("process.binding is not supported")},t.cwd=function(){return"/"},t.chdir=function(t){throw new Error("process.chdir is not supported")},t.umask=function(){return 0}},function(t,i,n){"use strict";n.r(i);var u="v3.0.8",h=167,r={NONE:0,EXTRUDE_MARKER:2,IMAGE_MARKER:8,LOCATION_MARKER:16,POLYGON_MARKER:32,TEXT_MARKER:64,LINE_MARKER:128,HEAT_MAP_MARKER:512,EXTENT:1024,EXTERNAL_MODEL:2048,MODEL:4096,FACILITY:8192,LABEL:16384,DYNAMIC_MODEL_MARKER:32768,DOM_MARKER:65536,EXTENT_LAYER:1<<20,EXTERNAL_MODEL_LAYER:1<<21,MODEL_LAYER:1<<22,FACILITY_LAYER:1<<23,LABEL_LAYER:1<<24,MARKER_GROUP:1<<25};Object.freeze(r);var e=r,x={MODULE_SHORTEST:1,MODULE_BEST:2},p={PRIORITY_DEFAULT:1,PRIORITY_LIFTFIRST:2,PRIORITY_ESCALATORFIRST:3,PRIORITY_STAIRFIRST:4,PRIORITY_LIFTONLY:5,PRIORITY_ESCALATORONLY:6,PRIORITY_STAIRONLY:7,PRIORITY_ACCESSIBLEONLY:8,PRIORITY_LIFTFIRST1:9,PRIORITY_ESCALATORFIRST1:10,PRIORITY_STAIRFIRST1:11},I={ROUTE_SUCCESS:1,ROUTE_FAILED_NO_FMDBDATA:2,ROUTE_FAILED_TOO_CLOSE:3,ROUTE_FAILED_NO_DATA_START:4,ROUTE_FAILED_NO_DATA_DEST:5,ROUTE_FAILED_NO_STAIR:6,ROUTE_FAILED_NOTSUPPORT:7,ROUTE_FAILED_CANNOT_CALCULATE:8,ROUTE_FAILED_CANNOT_ARRIVE:9,ROUTE_FAILED_WAYPOINT_CALCULATE_ERROR:10,ROUTE_FAILED_NO_START_ARRIVAL:11,ROUTE_FAILED_NO_DEST_ARRIVAL:12,ROUTE_FAILED_OUTLINE:13,ROUTE_FAILED_NO_DOOR_START:14,ROUTE_FAILED_NO_DOOR_DEST:15},s={ZH:"zh",EN:"en"};var o=function t(i,n){!function(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}(this,t),this.V=i,this.Y=n};Object.assign(o.prototype,{X:function(t){return!1},H:function(t,i){}});var a=o;function f(t){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function c(t,i){return(c=Object.setPrototypeOf||function(t,i){return t.__proto__=i,t})(t,i)}function l(n){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var t,i=v(n);return t=r?(t=v(this).constructor,Reflect.construct(i,arguments,t)):i.apply(this,arguments),i=this,!(t=t)||"object"!==f(t)&&"function"!=typeof t?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(i):t}}function v(t){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var d=function(){!function(t,i){if("function"!=typeof i&&null!==i)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(i&&i.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),i&&c(t,i)}(r,a);var n=l(r);function r(t,i){return function(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}(this,r),n.call(this,t,i)}return r}();Object.assign(d.prototype,{X:function(t){return this.Y==t.fid}});var y=d;function b(t){return(b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function m(t,i){return(m=Object.setPrototypeOf||function(t,i){return t.__proto__=i,t})(t,i)}function w(n){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var t,i=_(n);return t=r?(t=_(this).constructor,Reflect.construct(i,arguments,t)):i.apply(this,arguments),i=this,!(t=t)||"object"!==b(t)&&"function"!=typeof t?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(i):t}}function _(t){return(_=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var g=function(){!function(t,i){if("function"!=typeof i&&null!==i)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(i&&i.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),i&&m(t,i)}(r,a);var n=w(r);function r(t,i){return function(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}(this,r),"object"==b((i=n.call(this,t,i)).Y)?(i.Q=i.Y.text,i.$=i.Y.fuzzy):i.Q=i.Y,i}return r}();Object.assign(g.prototype,{X:function(t){if(t.name){if(this.$&&-1!=t.name.indexOf(this.Q))return!0;if(this.Q==t.name)return!0}return!1}});var O=g;function M(t){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function j(t,i){return(j=Object.setPrototypeOf||function(t,i){return t.__proto__=i,t})(t,i)}function E(n){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var t,i=k(n);return t=r?(t=k(this).constructor,Reflect.construct(i,arguments,t)):i.apply(this,arguments),i=this,!(t=t)||"object"!==M(t)&&"function"!=typeof t?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(i):t}}function k(t){return(k=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}r=function(){!function(t,i){if("function"!=typeof i&&null!==i)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(i&&i.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),i&&j(t,i)}(r,a);var n=E(r);function r(t,i){return function(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}(this,r),"object"==M((i=n.call(this,t,i)).Y)?(i.Q=i.Y.text,i.$=i.Y.fuzzy):i.Q=i.Y,i}return r}();Object.assign(r.prototype,{X:function(t){if(t.ename){if(this.$&&-1!=t.ename.indexOf(this.Q))return!0;if(this.Q==t.ename)return!0}return!1}});var T=r;function R(t){return(R="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function A(t,i){return(A=Object.setPrototypeOf||function(t,i){return t.__proto__=i,t})(t,i)}function S(n){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var t,i=N(n);return t=r?(t=N(this).constructor,Reflect.construct(i,arguments,t)):i.apply(this,arguments),i=this,!(t=t)||"object"!==R(t)&&"function"!=typeof t?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(i):t}}function N(t){return(N=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}o=function(){!function(t,i){if("function"!=typeof i&&null!==i)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(i&&i.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),i&&A(t,i)}(r,a);var n=S(r);function r(t,i){return function(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}(this,r),(t=n.call(this,t)).Y=Array.isArray(i)?i:[i],t}return r}();Object.assign(o.prototype,{X:function(t){return-1!=this.Y.indexOf(t.type)}});var L=o;function P(t){return(P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function D(t,i){return(D=Object.setPrototypeOf||function(t,i){return t.__proto__=i,t})(t,i)}function F(n){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var t,i=C(n);return t=r?(t=C(this).constructor,Reflect.construct(i,arguments,t)):i.apply(this,arguments),i=this,!(t=t)||"object"!==P(t)&&"function"!=typeof t?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(i):t}}function C(t){return(C=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}d=function(){!function(t,i){if("function"!=typeof i&&null!==i)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(i&&i.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),i&&D(t,i)}(r,a);var n=F(r);function r(t,i){return function(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}(this,r),"object"==P((i=n.call(this,t,i)).Y)?(i.Q=i.Y.text,i.$=void 0===i.Y.fuzzy||i.Y.fuzzy):(i.Q=i.Y,i.$=!0),i}return r}();Object.assign(d.prototype,{X:function(t){if(this.$){if(t.name&&-1!=t.name.indexOf(this.Q)||t.ename&&-1!=t.ename.indexOf(this.Q))return!0}else if(t.name&&t.name==this.Q||t.ename&&t.ename==this.Q)return!0;return!1}});var U=d,g={NONE:0,POINT:1,LINE:2,POLYGON:4,MULTIPOINT:8,MULTILINE:16,MULTIPOLYGON:32,GROUP:64,EXTENT:1024,EXTERNALMODEL:2048,MODEL:4096,FACILITY:8192,LABEL:16384,EXTENTGROUP:1<<20,EXTERNALMODELGROUP:1<<21,MODELGROUP:1<<22,FACILITYGROUP:1<<23,LABELGROUP:1<<24};Object.freeze(g);var B=g,G=function(t,i,n){n=n||2;var r,e,s,o,u,h=i&&i.length,a=h?i[0]*n:t.length,f=Z(t,0,a,n,!0),c=[];if(!f||f.next===f.prev)return c;if(h&&(f=function(t,i,n,r){var e,s,o,u,h=[];for(e=0,s=i.length;e<s;e++)o=i[e]*r,u=e<s-1?i[e+1]*r:t.length,(u=Z(t,o,u,r,!1))===u.next&&(u.steiner=!0),h.push(function(t){var i=t,n=t;for(;(i.x<n.x||i.x===n.x&&i.y<n.y)&&(n=i),i=i.next,i!==t;);return n}(u));for(h.sort(q),e=0;e<h.length;e++)!function(t,i){(i=function(t,i){var n,r=i,e=t.x,s=t.y,o=-1/0;do{if(s<=r.y&&s>=r.next.y&&r.next.y!==r.y){var u=r.x+(s-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(u<=e&&o<u){if((o=u)===e){if(s===r.y)return r;if(s===r.next.y)return r.next}n=r.x<r.next.x?r:r.next}}}while(r=r.next,r!==i);if(!n)return null;if(e===o)return n;var h,a=n,f=n.x,c=n.y,l=1/0;r=n;for(;e>=r.x&&r.x>=f&&e!==r.x&&X(s<c?e:o,s,f,c,s<c?o:e,s,r.x,r.y)&&(h=Math.abs(s-r.y)/(e-r.x),K(r,t)&&(h<l||h===l&&(r.x>n.x||r.x===n.x&&function(t,i){return z(t.prev,t,i.prev)<0&&z(i.next,t,t.next)<0}(n,r)))&&(n=r,l=h)),r=r.next,r!==a;);return n}(t,i))&&(t=tt(i,t),W(i,i.next),W(t,t.next))}(h[e],n),n=W(n,n.next);return n}(t,i,f,n)),t.length>80*n){for(var l=r=t[0],v=e=t[1],d=n;d<a;d+=n)(s=t[d])<l&&(l=s),(o=t[d+1])<v&&(v=o),r<s&&(r=s),e<o&&(e=o);u=0!==(u=Math.max(r-l,e-v))?1/u:0}return V(f,c,n,l,v,u),c};function Z(t,i,n,r,e){var s,o;if(e===0<function(t,i,n,r){for(var e=0,s=i,o=n-r;s<n;s+=r)e+=(t[o]-t[s])*(t[s+1]+t[o+1]),o=s;return e}(t,i,n,r))for(s=i;s<n;s+=r)o=it(s,t[s],t[s+1],o);else for(s=n-r;i<=s;s-=r)o=it(s,t[s],t[s+1],o);return o&&H(o,o.next)&&(nt(o),o=o.next),o}function W(t,i){if(!t)return t;i=i||t;var n,r=t;do{if(n=!1,r.steiner||!H(r,r.next)&&0!==z(r.prev,r,r.next))r=r.next;else{if(nt(r),(r=i=r.prev)===r.next)break;n=!0}}while(n||r!==i);return i}function V(t,i,n,r,e,s,o){if(t){!o&&s&&function(t,i,n,r){var e=t;for(;null===e.z&&(e.z=Y(e.x,e.y,i,n,r)),e.prevZ=e.prev,e.nextZ=e.next,e=e.next,e!==t;);e.prevZ.nextZ=null,e.prevZ=null,function(t){var i,n,r,e,s,o,u,h,a=1;do{for(n=t,s=t=null,o=0;n;){for(o++,r=n,i=u=0;i<a&&(u++,r=r.nextZ);i++);for(h=a;0<u||0<h&&r;)0!==u&&(0===h||!r||n.z<=r.z)?(n=(e=n).nextZ,u--):(r=(e=r).nextZ,h--),s?s.nextZ=e:t=e,e.prevZ=s,s=e;n=r}}while(s.nextZ=null,a*=2,1<o)}(e)}(t,r,e,s);for(var u,h,a=t;t.prev!==t.next;)if(u=t.prev,h=t.next,s?function(t,i,n,r){var e=t.prev,s=t,o=t.next;if(0<=z(e,s,o))return!1;var u=(e.x<s.x?e.x<o.x?e:o:s.x<o.x?s:o).x,h=(e.y<s.y?e.y<o.y?e:o:s.y<o.y?s:o).y,a=(e.x>s.x?e.x>o.x?e:o:s.x>o.x?s:o).x,f=(e.y>s.y?e.y>o.y?e:o:s.y>o.y?s:o).y,c=Y(u,h,i,n,r),l=Y(a,f,i,n,r),v=t.prevZ,d=t.nextZ;for(;v&&v.z>=c&&d&&d.z<=l;){if(v!==t.prev&&v!==t.next&&X(e.x,e.y,s.x,s.y,o.x,o.y,v.x,v.y)&&0<=z(v.prev,v,v.next))return!1;if(v=v.prevZ,d!==t.prev&&d!==t.next&&X(e.x,e.y,s.x,s.y,o.x,o.y,d.x,d.y)&&0<=z(d.prev,d,d.next))return!1;d=d.nextZ}for(;v&&v.z>=c;){if(v!==t.prev&&v!==t.next&&X(e.x,e.y,s.x,s.y,o.x,o.y,v.x,v.y)&&0<=z(v.prev,v,v.next))return!1;v=v.prevZ}for(;d&&d.z<=l;){if(d!==t.prev&&d!==t.next&&X(e.x,e.y,s.x,s.y,o.x,o.y,d.x,d.y)&&0<=z(d.prev,d,d.next))return!1;d=d.nextZ}return!0}(t,r,e,s):function(t){var i=t.prev,n=t,r=t.next;if(0<=z(i,n,r))return!1;var e=t.next.next;for(;e!==t.prev;){if(X(i.x,i.y,n.x,n.y,r.x,r.y,e.x,e.y)&&0<=z(e.prev,e,e.next))return!1;e=e.next}return!0}(t))i.push(u.i/n),i.push(t.i/n),i.push(h.i/n),nt(t),t=h.next,a=h.next;else if((t=h)===a){o?1===o?V(t=function(t,i,n){var r=t;do{var e=r.prev,s=r.next.next}while(!H(e,s)&&Q(e,r,r.next,s)&&K(e,s)&&K(s,e)&&(i.push(e.i/n),i.push(r.i/n),i.push(s.i/n),nt(r),nt(r.next),r=t=s),r=r.next,r!==t);return W(r)}(W(t),i,n),i,n,r,e,s,2):2===o&&function(t,i,n,r,e,s){var o=t;do{for(var u=o.next.next;u!==o.prev;){if(o.i!==u.i&&function(t,i){return t.next.i!==i.i&&t.prev.i!==i.i&&!function(t,i){var n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==i.i&&n.next.i!==i.i&&Q(n,n.next,t,i))return!0}while(n=n.next,n!==t);return!1}(t,i)&&(K(t,i)&&K(i,t)&&function(t,i){var n=t,r=!1,e=(t.x+i.x)/2,s=(t.y+i.y)/2;for(;n.y>s!=n.next.y>s&&n.next.y!==n.y&&e<(n.next.x-n.x)*(s-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next,n!==t;);return r}(t,i)&&(z(t.prev,t,i.prev)||z(t,i.prev,i))||H(t,i)&&0<z(t.prev,t,t.next)&&0<z(i.prev,i,i.next))}(o,u)){var h=tt(o,u);return o=W(o,o.next),h=W(h,h.next),V(o,i,n,r,e,s),V(h,i,n,r,e,s)}u=u.next}}while(o=o.next,o!==t)}(t,i,n,r,e,s):V(W(t),i,n,r,e,s,1);break}}}function q(t,i){return t.x-i.x}function Y(t,i,n,r,e){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-n)*e)|t<<8))|t<<4))|t<<2))|t<<1))|(i=1431655765&((i=858993459&((i=252645135&((i=16711935&((i=32767*(i-r)*e)|i<<8))|i<<4))|i<<2))|i<<1))<<1}function X(t,i,n,r,e,s,o,u){return 0<=(e-o)*(i-u)-(t-o)*(s-u)&&0<=(t-o)*(r-u)-(n-o)*(i-u)&&0<=(n-o)*(s-u)-(e-o)*(r-u)}function z(t,i,n){return(i.y-t.y)*(n.x-i.x)-(i.x-t.x)*(n.y-i.y)}function H(t,i){return t.x===i.x&&t.y===i.y}function Q(t,i,n,r){var e=J(z(t,i,n)),s=J(z(t,i,r)),o=J(z(n,r,t)),u=J(z(n,r,i));return e!==s&&o!==u||(0===e&&$(t,n,i)||(0===s&&$(t,r,i)||(0===o&&$(n,t,r)||!(0!==u||!$(n,i,r)))))}function $(t,i,n){return i.x<=Math.max(t.x,n.x)&&i.x>=Math.min(t.x,n.x)&&i.y<=Math.max(t.y,n.y)&&i.y>=Math.min(t.y,n.y)}function J(t){return 0<t?1:t<0?-1:0}function K(t,i){return z(t.prev,t,t.next)<0?0<=z(t,i,t.next)&&0<=z(t,t.prev,i):z(t,i,t.prev)<0||z(t,t.next,i)<0}function tt(t,i){var n=new rt(t.i,t.x,t.y),r=new rt(i.i,i.x,i.y),e=t.next,s=i.prev;return(t.next=i).prev=t,(n.next=e).prev=n,(r.next=n).prev=r,(s.next=r).prev=s,r}function it(t,i,n,r){n=new rt(t,i,n);return r?(n.next=r.next,(n.prev=r).next.prev=n,r.next=n):(n.prev=n).next=n,n}function nt(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function rt(t,i,n){this.i=t,this.x=i,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function et(t){return function(t){if(Array.isArray(t))return st(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,i){if(t){if("string"==typeof t)return st(t,i);var n=Object.prototype.toString.call(t).slice(8,-1);return"Map"===(n="Object"===n&&t.constructor?t.constructor.name:n)||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?st(t,i):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function st(t,i){(null==i||i>t.length)&&(i=t.length);for(var n=0,r=new Array(i);n<i;n++)r[n]=t[n];return r}var ot={area:function(t){for(var i=t.length,n=0,r=i-1,e=0;e<i;r=e++)n+=t[r].x*t[e].y-t[e].x*t[r].y;return.5*n},isClockWise:function(t){return ot.area(t)<0},triangulateShape:function(t,i){var n=[],r=[],e=[];ut(t),ht(n,t);var s=t.length;i.forEach(ut);for(var o=0;o<i.length;o++)r.push(s),s+=i[o].length,ht(n,i[o]);for(var u=G(n,r),h=0;h<u.length;h+=3)e.push(u.slice(h,h+3));return e},triangulate:function(t){(e=[]).push.apply(e,et(t[0]));for(var i=[],n=1;n<t.length;n++){var r=[];r.push.apply(r,et(t[n])),i.push(r)}if(!ot.isClockWise(e))for(var e=e.reverse(),s=0,o=i.length;s<o;s++){var u=i[s];ot.isClockWise(u)&&(i[s]=u.reverse())}return ot.triangulateShape(e,i)}};function ut(t){var i,n=t.length;2<n&&(i=t[n-1],n=t[0],i.x===n.x&&i.y===n.y)&&t.pop()}function ht(t,i){for(var n=0;n<i.length;n++)t.push(i[n].x),t.push(i[n].y)}var at=1e-5,ft=Math.PI/180,ct=180/Math.PI,r=function t(){!function(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}(this,t)};Object.assign(r.prototype,{J:function(){return at},K:function(){return ft},tt:function(){return ct},it:function(t){return t<at&&-at<t},nt:function(t){return at<t},rt:function(t){return t<-at},et:function(t,i,n){n=(t.x-n.x)*(i.y-n.y)-(i.x-n.x)*(t.y-n.y);return Math.abs(n)<at?0:n},distanceOfTwoPoints:function(t,i){return t&&i?Math.sqrt((t.x-i.x)*(t.x-i.x)+(t.y-i.y)*(t.y-i.y)):Number.NaN},distance:function(t,i){return Math.sqrt(Math.pow(i.x-t.x,2)+Math.pow(i.y-t.y,2))},isPolygonContainPoint:function(t,i){for(var n=0,r=0;r<t.length;r++){var e=t[r].x,s=t[r].y,o=0,u=0,u=r<t.length-1?(o=t[r+1].x,t[r+1].y):(o=t[0].x,t[0].y);if(e===i.x&&s===i.y||o===i.x&&u===i.y)return!0;if(u!==s){var h=e+(i.y-s)*(o-e)/(u-s);if(h===i.x)return!0;e!==o?h<=Math.max(e,o)&&h>=Math.min(e,o)&&h>i.x&&h!==e&&(h===o&&0<(s-i.y)*(u-i.y)?n+=2:n++):h<=Math.max(e,o)&&h>=Math.min(e,o)&&h>i.x&&(h===o&&0<(s-i.y)*(u-i.y)?n+=2:n++)}}return 0<n%2},st:function(t,i,n,r){return!(Math.max(t.x,i.x)<Math.min(n.x,r.x))&&(!(Math.max(t.y,i.y)<Math.min(n.y,r.y))&&(!(Math.max(n.x,r.x)<Math.min(t.x,i.x))&&!(Math.max(n.y,r.y)<Math.min(t.y,i.y))))},ot:function(t,i,n,r){return!(Math.max(t.x,i.x)<Math.min(n.x,r.x))&&(!(Math.max(t.y,i.y)<Math.min(n.y,r.y))&&(!(Math.max(n.x,r.x)<Math.min(t.x,i.x))&&(!(Math.max(n.y,r.y)<Math.min(t.y,i.y))&&((0!==this.et(n,i,t)||0!==this.et(i,r,t))&&(!(this.et(n,i,t)*this.et(i,r,t)<0)&&!(this.et(t,r,n)*this.et(r,i,n)<0))))))},ut:function(t,i,n){return!(t.x<i.x)&&(!(t.y<i.y)&&(!(t.x>n.x)&&!(t.y>n.y)))},ht:function(t,i,n){var r=Math.min(i.x,n.x),e=Math.max(i.x,n.x),s=Math.min(i.y,n.y),n=Math.max(i.y,n.y);return!(t.x<r||t.x>e||t.y<s||t.y>n)},ft:function(t,i,n){var r=Math.min(n.x,i.x),e=Math.max(n.x,i.x),s=Math.min(n.y,i.y),i=Math.max(n.y,i.y);return!(t.x<r||t.x>e||t.y<s||t.y>i)},ct:function(t,i,n){for(var r,e,s=!1,o=0;o<n;o++)r=i[o],e=i[(o+1)%n],(r.y<t.y&&e.y>=t.y||e.y<t.y&&r.y>=t.y)&&(r.x<=t.x||e.x<=t.x)&&r.x+(t.y-r.y)/(e.y-r.y)*(e.x-r.x)<t.x&&(s=!s);return s},lt:function(t,i,n){return(t.x-i.x)*(n.y-i.y)==(n.x-i.x)*(t.y-i.y)&&Math.min(i.x,n.x)<=t.x&&t.x<=Math.max(i.x,n.x)&&Math.min(i.y,n.y)<=t.y&&t.y<=Math.max(i.y,n.y)},vt:function(t,i){return Math.sqrt((t.x-i.x)*(t.x-i.x)+(t.y-i.y)*(t.y-i.y))},dt:function(t,i){return(t.x-i.x)*(t.x-i.x)+(t.y-i.y)*(t.y-i.y)},yt:function(t,i,n){var r=i.x,e=i.y,s=n.x,o=n.y,u=t.x,h=t.y,a=s-r,f=o-e,c=a*a+f*f,i=u-r,n=h-e,t=i*i+n*n;if(this.it(c))return l=this.it(t)?0:t;var l,c=Math.sqrt(c),a=a/c,f=f/c,n=a*i+f*n;return l=this.nt(n)?this.rt(n-c)?(a=u-(r+n*a))*a+(f=h-(e+n*f))*f:(s=u-s)*s+(o=h-o)*o:t,this.it(l)?0:l},bt:function(t,i,n,r){var e=i.x,s=i.y,o=n.x,u=n.y,h=t.x,a=t.y,f=o-e,c=u-s,l=Math.sqrt(f*f+c*c),v=h-e,d=a-s,t=Math.sqrt(v*v+d*d);if(this.it(l))return r.x=i.x,r.y=i.y,this.it(y=t)?0:y;var f=f/l,c=c/l,d=f*v+c*d,y=this.nt(d)?this.rt(d-l)?(f=h-(e=e+d*f),c=a-(d=s+d*c),c=Math.sqrt(f*f+c*c),r.x=e,r.y=d,c):(o=h-o,u=a-u,u=Math.sqrt(o*o+u*u),r.x=n.x,r.y=n.y,u):(r.x=i.x,r.y=i.y,t);return this.it(y)?0:y},pt:function(t,i){for(var n=0,r=0,e=0,s=0;s<i;s++){var o=t[s],u=t[(s+1)%i],h=(o.x*u.y-o.y*u.x)/2;n+=h,r+=h*(o.x+u.x)/3,e+=h*(o.y+u.y)/3}return{x:r/=n,y:e/=n}},mt:function(t){for(var i=ot.triangulate([t]),n=0,r=0,e=0,s=0;s<i.length;s++){var o=t[i[s][0]],u=t[i[s][1]],h=t[i[s][2]],a=u.x-o.x,f=u.y-o.y,c=h.x-o.x,f=(a*(h.y-o.y)-c*f)/2;n+=f,r+=(o.x+u.x+h.x)/3*f,e+=(o.y+u.y+h.y)/3*f}return{x:r/n,y:e/n}},wt:function(t,i){if(i<3)return 0;for(var n=0,r=0;r<i;++r){var e=t[r],s=t[(r+1)%i];n+=e.x*s.y-e.y*s.x}return Math.abs(n/2)},_t:function(t,i,n,r,e){if(this.ot(t,i,n,r)){var s=(r.x-n.x)*(t.y-i.y)-(i.x-t.x)*(n.y-r.y),o=(t.y-n.y)*(i.x-t.x)*(r.x-n.x)+n.x*(r.y-n.y)*(i.x-t.x)-t.x*(i.y-t.y)*(r.x-n.x);return e.x=o/s,s=(t.x-i.x)*(r.y-n.y)-(i.y-t.y)*(n.x-r.x),o=i.y*(t.x-i.x)*(r.y-n.y)+(r.x-i.x)*(r.y-n.y)*(t.y-i.y)-r.y*(n.x-r.x)*(i.y-t.y),e.y=o/s,1}return 0},gt:function(t,i,n,r,e){var s=Math.min(n.x,r.x),o=Math.max(n.x,r.x),u=Math.min(n.y,r.y),h=Math.max(n.y,r.y),a=t.x,f=t.y,c=n.x,l=n.y,v=r.x,d=r.y;if(90==i){if(t.x<s||t.x>o)return!1;var y=(d-l)/(v-c)*(a-c)+l;return e.y=y,e.x=a,y<f?!1:!!this.ft(e,n,r)}if(270==i){if(t.x<s||t.x>o)return!1;t=(d-l)/(v-c)*(a-c)+l;return e.y=t,e.x=a,f<t?!1:!!this.ft(e,n,r)}if(270!=i&&90!=i&&o-s<.001){o=s,s=Math.tan(i/180*Math.PI)*(o-a)+f;if(e.y=s,e.x=o,this.ft(e,n,r)){o=o-a,s=s-f;return 0<o/Math.sqrt(o*o+s*s)*Math.cos(i/180*Math.PI)}}if(h-u<=1e-6){h=u,u=1/Math.tan(i/180*Math.PI)*(h-f)+a;if(e.x=u,e.y=h,this.ft(e,n,r)){var u=u-a,b=h-f;return 0<u/Math.sqrt(u*u+b*b)*Math.cos(i/180*Math.PI)}return!1}b=Math.tan(i/180*Math.PI),v=(d-l)/(v-c),v=(l-f-(v*c-b*a))/(b-v),b=f+b*(v-a);if(e.x=v,e.y=b,this.ft(e,n,r)){a=v-a,f=b-f;return 0<a/Math.sqrt(a*a+f*f)*Math.cos(i/180*Math.PI)}return!1},xt:function(t,i,n,r){var e=t.x,s=t.y,o=i.x,u=i.y,h=n.x,a=n.y;if(e==o&&s==u||e==h&&s==a)return r.x=e,r.y=s,!0;var f=Math.min(i.x,n.x),c=Math.max(i.x,n.x),l=Math.min(i.y,n.y),t=Math.max(i.y,n.y);if(Math.abs(o-h)<1e-5)return r.x=o,l<=(r.y=s)&&s<=t;if(Math.abs(u-a)<1e-5)return r.x=e,r.y=u,f<=e&&e<=c;c=-1/((a-u)/(h-o)),h=(a-u)/(h-o),h=(u-s-(h*o-c*e))/(c-h),e=s+c*(h-e);return r.x=h,r.y=e,!!this.ft(r,i,n)},Ot:function(t,i){return{x:t.y*i.z-t.z*i.y,y:t.z*i.x-t.x*i.z,z:t.x*i.y-t.y*i.x}},Mt:function(t,i){return t.x*i.x+t.y*i.y+t.z*i.z},jt:function(t){return Math.sqrt(t.x*t.x+t.y*t.y+t.z*t.z)},Et:function(t,i){return t.x*i.x+t.y*i.y},kt:function(t){return Math.sqrt(t.x*t.x+t.y*t.y)},Tt:function(t,i){if(0==t.x&&0==t.y||0==i.x&&0==i.y)return 0;var n={x:t.x,y:t.y,z:0},r={x:i.x,y:i.y,z:0},n=this.Ot(n,r),r=this.Et(t,i),i=Math.acos(r/(this.kt(t)*this.kt(i)));return 0<n.z?i/Math.PI*180:360-i/Math.PI*180},Rt:function(t,i,n,r){for(var e=0;e<n.length;e++){var s=n[e],o=n[(e+1)%n.length];if(1==this._t(t,i,s,o,r))return!0}return!1},At:function(t,i,n,r,e){var s=Math.min(t.x,n.x,r.x),o=Math.max(t.x,n.x,r.x),u=Math.min(t.y,n.y,r.y),h=Math.max(t.y,n.y,r.y),h=Math.sqrt((o-s)*(o-s)+(h-u)*(h-u)),u=i/180*Math.PI,i=h*Math.cos(u)+t.x,u=h*Math.sin(u)+t.y;return 1==this._t(t,{x:i,y:u},n,r,e)}});var lt=new r;function vt(t,i){for(var n=0;n<i.length;n++){var r=i[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}o=function(){function t(){!function(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}(this,t),this.St={x:Number.MAX_VALUE,y:Number.MAX_VALUE},this.It={x:-Number.MAX_VALUE,y:-Number.MAX_VALUE}}var i,n,r;return i=t,(n=[{key:"min",get:function(){return this.St}},{key:"max",get:function(){return this.It}},{key:"center",get:function(){var t={x:Number.NaN,y:Number.NaN};return this.Nt()&&(t.x=(this.St.x+this.It.x)/2,t.y=(this.St.y+this.It.y)/2),t}},{key:"size",get:function(){var t={x:Number.NaN,y:Number.NaN};return this.Nt()&&(t.x=this.It.x-this.St.x,t.y=this.It.y-this.St.y),t}},{key:"toObject",value:function(){return{min:this.St,max:this.It,center:this.center,size:this.size}}}])&&vt(i.prototype,n),r&&vt(i,r),t}();Object.assign(o.prototype,{Nt:function(){return!(this.St.x>this.It.x||this.St.y>this.It.y)},Lt:function(t){t&&t.Nt()&&(t.St.x<this.St.x&&(this.St.x=t.St.x),t.St.y<this.St.y&&(this.St.y=t.St.y),t.It.x>this.It.x&&(this.It.x=t.It.x),t.It.y>this.It.y&&(this.It.y=t.It.y))},Pt:function(t){var i=this;t&&0!=t.length&&t.forEach(function(t){t.x<i.St.x&&(i.St.x=t.x),t.y<i.St.y&&(i.St.y=t.y),t.x>i.It.x&&(i.It.x=t.x),t.y>i.It.y&&(i.It.y=t.y)})}});var dt=o;function yt(t){return(yt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function bt(t,i){return(bt=Object.setPrototypeOf||function(t,i){return t.__proto__=i,t})(t,i)}function pt(n){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var t,i=mt(n);return t=r?(t=mt(this).constructor,Reflect.construct(i,arguments,t)):i.apply(this,arguments),i=this,!(t=t)||"object"!==yt(t)&&"function"!=typeof t?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(i):t}}function mt(t){return(mt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}d=function(){!function(t,i){if("function"!=typeof i&&null!==i)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(i&&i.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),i&&bt(t,i)}(r,a);var n=pt(r);function r(t,i){return function(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}(this,r),(i=n.call(this,t,i)).Dt=i.Y.center,i.Ft=i.Y.radius,i.Ct=i.Y.radius*i.Y.radius,i.Ut=new dt,i.Ut.Pt([{x:i.Dt.x-i.Ft,y:i.Dt.y-i.Ft},{x:i.Dt.x+i.Ft,y:i.Dt.y+i.Ft}]),i}return r}();Object.assign(d.prototype,{X:function(t){return t.getType()!=B.MODEL?this.Bt(t):this.Gt(t)},Gt:function(t){var i=t.getBound();if(!lt.st(this.Ut.St,this.Ut.It,i.min,i.max))return!1;for(var n=t.getCoordinates(),r=0,e=n.length;r<e;r++)for(var s=1,o=n[r].length;s<o;s++){var u=n[r][s];if(lt.dt(u,this.Dt)<this.Ct)return!0;var h=n[r][s-1];if(1==s&&lt.dt(h,this.Dt)<this.Ct)return!0;if(lt.yt(this.Dt,h,u)<this.Ct)return!0}return!1},Bt:function(t){t=t.getCoordinates()[0];return!!lt.ut(t,this.Ut.St,this.Ut.It)&&lt.dt(t,this.Dt)<this.Ct},H:function(t,i){var n=t.getCoordinates();if(t.getType()==B.MODEL){for(var r=Number.MAX_VALUE,e=0,s=n.length;e<s;e++)for(var o=1,u=n[e].length;o<u;o++){var h=n[e][o-1],a=n[e][o],a=lt.yt(this.Dt,h,a);a<r&&(r=a)}i.vt=Math.sqrt(r)}else i.vt=Math.sqrt(lt.dt(n[0],this.Dt))}});var wt=d;function _t(t){return(_t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function gt(t,i){return(gt=Object.setPrototypeOf||function(t,i){return t.__proto__=i,t})(t,i)}function xt(n){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var t,i=Ot(n);return t=r?(t=Ot(this).constructor,Reflect.construct(i,arguments,t)):i.apply(this,arguments),i=this,!(t=t)||"object"!==_t(t)&&"function"!=typeof t?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(i):t}}function Ot(t){return(Ot=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}g=function(){!function(t,i){if("function"!=typeof i&&null!==i)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(i&&i.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),i&&gt(t,i)}(r,a);var n=xt(r);function r(t,i){return function(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}(this,r),(i=n.call(this,t,i)).Zt=i.Y,i.Wt=i.Zt.length-1,i.Dt=lt.mt(i.Zt),i.Ut=new dt,i.Ut.Pt(i.Zt),i}return r}();Object.assign(g.prototype,{X:function(t){return t.getType()!=B.MODEL?this.Bt(t):this.Gt(t)},Gt:function(t){var i=t.getBound();if(!lt.st(this.Ut.St,this.Ut.It,i.min,i.max))return!1;for(var n=t.getCoordinates(),r=0,e=n.length;r<e;r++)for(var s=0,o=n[r].length-1;s<o;s++)if(lt.ct(n[r][s],this.Zt,this.Wt))return!0;for(var u=0;u<this.Wt;u++){for(var h=!1,a=0,f=n.length;a<f;a++)lt.ct(this.Zt[u],n[a],n[a].length-1)&&(h=0==a);if(h)return!0}for(var c=0;c<this.Wt;c++)for(var l=this.Zt[c],v=this.Zt[c+1],d=0,y=n.length;d<y;d++)for(var b=0,p=n[d].length-1;b<p;b++){var m=n[d][b],w=n[d][b+1];if(lt.ot(l,v,m,w))return!0}return!1},Bt:function(t){t=t.getCoordinates()[0];return!!lt.ut(t,this.Ut.St,this.Ut.It)&&lt.ct(t,this.Zt,this.Zt.length-1)},H:function(t,i){var n=t.getCoordinates();if(t.getType()===B.MODEL){for(var r=Number.MAX_VALUE,e=0,s=n.length;e<s;e++)for(var o=1,u=n[e].length;o<u;o++){var h=n[e][o-1],a=n[e][o],a=lt.yt(this.Dt,h,a);a<r&&(r=a)}i.vt=Math.sqrt(r)}else i.vt=Math.sqrt(lt.dt(n[0],this.Dt))}});var Mt=g;function jt(t){return(jt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Et(t,i){return(Et=Object.setPrototypeOf||function(t,i){return t.__proto__=i,t})(t,i)}function kt(n){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var t,i=Tt(n);return t=r?(t=Tt(this).constructor,Reflect.construct(i,arguments,t)):i.apply(this,arguments),i=this,!(t=t)||"object"!==jt(t)&&"function"!=typeof t?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(i):t}}function Tt(t){return(Tt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}r=function(){!function(t,i){if("function"!=typeof i&&null!==i)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(i&&i.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),i&&Et(t,i)}(r,a);var n=kt(r);function r(t,i){return function(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}(this,r),n.call(this,t,i)}return r}();Object.assign(r.prototype,{X:function(t){return!1}});var Rt=r;function At(t){return(At="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function St(t,i){return(St=Object.setPrototypeOf||function(t,i){return t.__proto__=i,t})(t,i)}function It(n){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var t,i=Nt(n);return t=r?(t=Nt(this).constructor,Reflect.construct(i,arguments,t)):i.apply(this,arguments),i=this,!(t=t)||"object"!==At(t)&&"function"!=typeof t?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(i):t}}function Nt(t){return(Nt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}o=function(){!function(t,i){if("function"!=typeof i&&null!==i)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(i&&i.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),i&&St(t,i)}(r,a);var n=It(r);function r(t,i){return function(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}(this,r),(i=n.call(this,t,i)).Vt=i.Y.point,i}return r}();Object.assign(o.prototype,{X:function(t){return t.getType()==B.MODEL&&this.Gt(t)},Gt:function(t){var i=t.getBound();if(!lt.ut(this.Vt,i.min,i.max))return!1;for(var n=t.getCoordinates(),r=0,e=0,s=n.length;e<s&&(lt.ct(this.Vt,n[e],n[e].length-1)&&r++,!(1<r));e++);return 1==r}});var Lt=o;function Pt(t){return(Pt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Dt(t,i){for(var n=0;n<i.length;n++){var r=i[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var Ft=new(function(){function t(){!function(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}(this,t)}var i,n,r;return i=t,(n=[{key:"create",value:function(t){if(!t||"object"!=Pt(t))return null;var i,n=[];for(i in t)switch(i){case"FID":n.push(new y(i,t[i]));break;case"name":n.push(new O(i,t[i]));break;case"ename":n.push(new T(i,t[i]));break;case"keyword":n.push(new U(i,t[i]));break;case"typeID":n.push(new L(i,t[i]));break;case"circle":n.push(new wt(i,t[i]));break;case"polygon":n.push(new Mt(i,t[i]));break;case"buffer":n.push(new Rt(i,t[i]));break;case"contain":n.push(new Lt(i,t[i]))}return n}}])&&Dt(i.prototype,n),r&&Dt(i,r),t}());function Ct(t){return function(t){if(Array.isArray(t))return Ut(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,i){if(t){if("string"==typeof t)return Ut(t,i);var n=Object.prototype.toString.call(t).slice(8,-1);return"Map"===(n="Object"===n&&t.constructor?t.constructor.name:n)||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ut(t,i):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ut(t,i){(null==i||i>t.length)&&(i=t.length);for(var n=0,r=new Array(i);n<i;n++)r[n]=t[n];return r}function Bt(t,i){for(var n=0;n<i.length;n++){var r=i[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var d=function(){function t(){!function(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}(this,t),this.qt=null,this.Yt=e.MODEL,this.Xt=[],this.zt=[]}var i,n,r;return i=t,(n=[{key:"levels",get:function(){return this.qt},set:function(t){this.qt=t}},{key:"type",get:function(){return this.Yt},set:function(t){this.Yt=t}},{key:"addCondition",value:function(t){var i,n=Ft.create(t);(i=this.zt).push.apply(i,Ct(n)),this.Xt.push(t)}}])&&Bt(i.prototype,n),r&&Bt(i,r),t}(),Gt=n(1),Zt={NAME_KEY_ERROR:0,MAP_ID_URL_ERROR:2,THEME_ID_URL_ERROR:4,LICENSE_ERROR:8,PATH_ERROR:404};function Wt(t){return(Wt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Vt(i,t){var n,r=Object.keys(i);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(i),t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(i,t).enumerable})),r.push.apply(r,n)),r}function qt(r){for(var t=1;t<arguments.length;t++){var e=null!=arguments[t]?arguments[t]:{};t%2?Vt(Object(e),!0).forEach(function(t){var i,n;i=r,t=e[n=t],n in i?Object.defineProperty(i,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):i[n]=t}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(e)):Vt(Object(e)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(e,t))})}return r}g=function t(i){!function(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}(this,t),this.Ht=qt({data:null,method:"GET",responseType:"json"},i)};Object.assign(g.prototype,{Qt:function(t,i,n){var r=this.Ht,e=r.data,s=r.method,o=r.url,u=r.responseType,h=r.header,a=null;if((a=new("undefined"!=typeof XMLHttpRequest?XMLHttpRequest:Gt.a.global().fengmap.XMLHttpRequest)).responseType=u,a.open(s,o),"object"==Wt(h))for(var f in h)a.setRequestHeader(f,h[f]);a.addEventListener("load",function(){200===a.status||0===a.status||201===a.status?t&&t(a.response):i&&(404===a.status?i(Zt.PATH_ERROR):2069===a.response.error_code?i(Zt.NAME_KEY_ERROR):2063===a.response.error_code?i(Zt.MAP_ID_URL_ERROR):400===a.response.error_code?i(Zt.THEME_ID_URL_ERROR):i(a.response))}),a.addEventListener("timeout",function(t){n&&n(t)}),a.addEventListener("error",function(t){i&&i(t)}),a.send(JSON.stringify(e))}});var Yt=g,r=n(27),Xt=n.n(r);var zt=function t(){!function(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}(this,t);var i,e=["UG9seWdvbkxhYg==","bGlk","ZWxCaXpJbmZv","ZG91Ymxl","bGlua1NlZw==","dmFsdWVz","UE9JQml6SW5mbw==","aXNTZWxlY3RhYg==","bWluWA==","R0VPUE9MWUdPTg==","bmF2aVNlZ21lbg==","TmF2aU1vZGVs","TWFw","bGF5ZXJz","bWlk","U3RhaXJCaXpJbg==","QVZJTk9ERQ==","bGFiZWxMYXllcg==","c25vZGU=","VHlwZQ==","bmF2aU5vZGVz","QnVmZmVy","cnVsZQ==","ZGF0YQ==","ZW50cmFuY2VGbA==","bmF2aVpvbmVz","Zmlk","YWxpYXM=","bmFtZQ==","ZmllbGRz","Ynl0ZXM=","ZW50cnk=","ZGVmR2lk","aW50MzI=","cG9pTGF5ZXI=","ZGF0ZVZlcg==","YnR5cGU=","Rmxvb3JDb25maQ==","Z2Vv","ZmxhZw==","QU5PUkFNQQ==","LnByb3RvYnVm","UkFTVEVSQVRB","ZGVmQ2VuWA==","cmVxdWlyZWQ=","bmZv","bW9kZWxMYXllcg==","bGlmdEVudHJ5","bGVu","cmFuaw==","YXllcg==","Zmxvb3JJZA==","R0VPUE9JTlQ=","YXJlYQ==","YnVmZmVycw==","T0RFTA==","ZmxvYXQ=","bm9kZVR5cGU=","bWluWQ==","cG9seWdvbkxhYg==","bW9kZWxpZA==","X0xBQkVM","X0VYVEVOVA==","b3B0aW9ucw==","R2VuZXJhbEdlbw==","aXNWaXNpYmxl","ZmlsZURhdGU=","TmF2aU5vZGU=","c3RyaW5n","ZW50cnl0eXBlcw==","ZmlsZVZlcg==","TGFiZWxCaXpJbg==","SW5kZXhJbmZv","bGlmdFR5cGU=","RXh0ZXJuYWxNbw==","cGFja2Vk","ZGVmYXVsdA==","c3RhaXJMYXllcg==","bW5hbWU=","dWludDY0","RXh0ZW50Qml6SQ==","bWF4bGV2ZWw=","bmVzdGVk","SW5mbw==","c2NhbGU=","cmVwZWF0ZWQ=","aGVpZ2h0","TGlmdEJpekluZg==","Ym9vbA==","a2V5","ZW5vZGU=","ZGVzYw==","ZGVsQml6SW5mbw==","bGVuZ3Ro","R0VPUE9JTlRfRQ==","cHJvdG9idWY=","ZGVsTGF5ZXI=","dHlwZQ==","dmVs","c2VnbWVudElk","aWR4cw==","aGFzaENvZGU=","U2NlbmU=","c2NhbGVMZXZlbA==","R0VPTElORQ==","d2lkdGg=","Rmxvb3JCaXo=","cm90YXRlQW5nbA==","ZGVmQ2VuWQ==","bGlmdEZsYWc=","R0VPUE9JTlRfUw==","bGlmdExheWVy","ZW5hbWU=","Rmxvb3JHZW8=","TmF2aVNlZ21lbg==","SUZU","ZWxMYXllcg==","VklTRUdNRU5U","X2NsYXNzbmFtZQ==","TmF2aVpvbmU=","ZWlk","cHRz","UG9seWdvbkJpeg==","Z2lk"];i=e,function(t){for(;--t;)i.push(i.shift())}(326);function s(t,i){var n=e[t=+t];void 0===s.cTFvol&&(function(){try{var i=Function('return (function() {}.constructor("return this")( ));')()}catch(t){i=window}i.atob||(i.atob=function(t){for(var i,n,r=String(t).replace(/=+$/,""),e="",s=0,o=0;n=r.charAt(o++);~n&&(i=s%4?64*i+n:n,s++%4)&&(e+=String.fromCharCode(255&i>>(-2*s&6))))n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(n);return e})}(),s.uxrRhm=function(t){for(var i=atob(t),n=[],r=0,e=i.length;r<e;r++)n+="%"+("00"+i.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(n)},s.Yrhnbl={},s.cTFvol=!0);var r=s.Yrhnbl[t];return void 0===r?(n=s.uxrRhm(n),s.Yrhnbl[t]=n):n=r,n}var n={};n.java_package="com.fengmap.platform"+s("0x58"),n["java_outer"+s("0x29")]=s("0x54")+"gProtoBuf";var r={};r[s("0x45")]="required",r.type=s("0x73"),r.id=1;var o={rule:"required"};o[s("0x14")]=s("0x50"),o.id=2;var u={rule:"required"};u[s("0x14")]="uint64",u.id=3;var h={};h.rule=s("0x5b"),h[s("0x14")]=s("0x73"),h.id=4;var a={};a.rule=s("0x5b"),a[s("0x14")]=s("0x73"),a.id=5;var f={};f.type=s("0x73"),f.id=6;var c={};c.type=s("0x73"),c.id=7;var l={};l[s("0x14")]="string";var v={default:!(l.id=8)},d={};d[s("0x14")]="bool",d.id=9,d.options=v;var y={rule:"repeated"};y[s("0x14")]=s("0x44"),y.id=10;var b={};b[s("0x45")]=s("0x8"),b[s("0x14")]=s("0x73"),b.id=11;var p={};p.mid=r,p[s("0x75")]=o,p[s("0x52")]=u,p.mname=h,p[s("0x18")]=a,p.key=f,p[s("0x71")]=c,p.desc=l,p.readOnly=d,p[s("0x65")]=y,p.keys=b;var m={};m[s("0x45")]=s("0x5b"),m[s("0x14")]=s("0x50"),m.id=1;var w={};w[s("0x45")]="required",w[s("0x14")]=s("0x50"),w.id=2;var _={};_[s("0x45")]="required",_[s("0x14")]="int32",_.id=3;var g={};g.rule=s("0x5b"),g[s("0x14")]=s("0x2"),g.id=4;var x={rule:"required"};x.type=s("0x4d"),x.id=5;var O={};O.gid=m,O.fileVer=w,O[s("0x53")]=_,O[s("0x5f")]=g,O[s("0x46")]=x;var M={};M[s("0x4c")]=O;var j={};j.Buffer=M;var E={};E[s("0x4c")]=p,E.nested=j;var k={};k[s("0x45")]="required",k.type=s("0x73"),k.id=19;var T={};T.rule=s("0x5b"),T.type="int32",T.id=20;var R={};R[s("0x45")]=s("0x5b"),R.type=s("0x2"),R.id=21;var A={};A[s("0x45")]="required",A.type=s("0x73"),A.id=22;var S={};S[s("0x45")]="required",S.type="string",S.id=23;var I={};I[s("0x14")]="string",I.id=24;v={};v.type=s("0x73"),v.id=25;r={};r[s("0x7b")]=!1;o={type:"bool",id:26};o[s("0x6e")]=r;u={};u[s("0x14")]=s("0x67"),u.id=1;h={type:"float",id:2},a={};a.type=s("0x67"),a.id=3;f={};f[s("0x14")]=s("0x67"),f.id=4;c={type:"float",id:5},l={type:"float",id:6},d={type:"float",id:7},y={};y[s("0x14")]=s("0x73"),y.id=8;b={};b[s("0x14")]=s("0x67"),b.id=9;m={type:"float",id:10},w={};w[s("0x14")]=s("0x67"),w.id=11;_={};_[s("0x14")]="float",_.id=12;g={};g[s("0x14")]="float",g.id=13;x={};x[s("0x14")]=s("0x67"),x.id=14;O={};O[s("0x14")]="float",O.id=15;M={};M[s("0x14")]=s("0x67"),M.id=16;p={};p.type=s("0x73"),p.id=17;j={rule:"repeated",type:"LayerGroup",id:18},r={};r[s("0x3d")]=k,r[s("0x75")]=T,r[s("0x52")]=R,r[s("0x1")]=A,r[s("0x18")]=S,r[s("0xc")]=I,r.desc=v,r.readOnly=o,r.x=u,r.y=h,r.z=a,r[s("0x37")]=f,r[s("0x69")]=c,r.maxX=l,r.maxY=d,r[s("0x4f")]=y,r[s("0x5a")]=b,r[s("0x1f")]=m,r.defCenZ=w,r[s("0x9")]=_,r.rotateAngleX=g,r[s("0x1e")+"eY"]=x,r.rotateAngleZ=O,r[s("0x7")]=M,r[s("0x1a")]=p,r.layerGroups=j;u={};u[s("0x14")]=s("0x50"),u.id=1;h={};h[s("0x14")]="string",h.id=2;a={};a[s("0x14")]=s("0x73"),a.id=3;f={};f[s("0x14")]=s("0x42"),f.id=4;c={};c.type=s("0x67"),c.id=5;l={};l.type=s("0x67"),l.id=6;d={};d[s("0x14")]="float",d.id=7;y={};y.type=s("0x67"),y.id=8;b={};b.type=s("0x67"),b.id=9;m={type:"float",id:10},w={};w[s("0x14")]=s("0x67"),w.id=11;_={};_[s("0x14")]="float",_.id=12;g={type:"bool",id:13},x={};x[s("0x14")]=s("0xb"),x.id=14;O={type:"bool",id:15},M={};M.type=s("0x73"),M.id=16;p={};p[s("0x30")]=u,p.lname=h,p[s("0x4a")]=a,p.ltype=f,p.offsetX=c,p.offsetY=l,p[s("0x9")]=d,p.rotateAngleX=y,p.rotateAngleY=b,p.rotateAngleZ=m,p["minScaleLe"+s("0x15")]=w,p["maxScaleLe"+s("0x15")]=_,p[s("0x70")]=g,p[s("0x36")+"le"]=x,p.isEditable=O,p[s("0xe")]=M;j={};j[s("0x63")]=1,j[s("0x11")+"SCALATOR"]=2,j["GEOPOINT_L"+s("0x26")]=3,j[s("0x21")+"TAIR"]=4,j["GEOPOINT_P"+s("0x57")]=5,j.GEOPOINT_POI=6,j[s("0x21")+"TORELABEL"]=7,j["GEOPOINT_N"+s("0x3f")]=8,j["GEOPOINT_M"+s("0x66")]=9,j[s("0x1b")]=20,j["GEOLINE_NA"+s("0x28")]=21,j.GEOLINE_BORDER=22,j[s("0x38")]=30,j[s("0x38")+s("0x6d")]=31,j.GEOPOLYGON_STORE=32,j["GEOPOLYGON"+s("0x6c")]=33,j[s("0x59")]=40,j.OVERLAYDATA=50;u={};u[s("0x34")]=j;h={};h.Type=u;a={};a[s("0x4c")]=p,a.nested=h;f={};f[s("0x14")]=s("0x50"),f.id=1;c={};c.type=s("0x73"),c.id=2;l={};l.type=s("0x73"),l.id=3;d={};d.type=s("0x67"),d.id=4;y={};y[s("0x14")]="string",y.id=5;b={};b[s("0x45")]="repeated",b.type="Layer",b.id=6;m={type:"string",id:7},w={};w.gid=f,w.gname=c,w.alias=l,w[s("0x9")]=d,w.desc=y,w[s("0x3c")]=b,w[s("0x62")]=m;_={};_[s("0x4c")]=w;g={};g.Layer=a,g.LayerGroup=_;x={};x.fields=r,x.nested=g;O={rule:"required"};O.type=s("0x73"),O.id=1;M={};M[s("0x45")]="required",M[s("0x14")]="int32",M.id=2;j={};j.type=s("0x67"),j.id=3;u={rule:"repeated",type:"GeneralGeoInfo",id:4},p={};p.rule=s("0x8"),p.type=s("0x6f")+"Info",p.id=5;h={};h[s("0x45")]=s("0x8"),h[s("0x14")]=s("0x6f")+"Info",h.id=6;f={};f[s("0x45")]=s("0x8"),f.type=s("0x6f")+s("0x6"),f.id=7;c={};c.rule=s("0x8"),c[s("0x14")]="GeneralGeoInfo",c.id=8;l={};l.rule=s("0x8"),l[s("0x14")]="GeneralGeo"+s("0x6"),l.id=9;d={rule:"repeated"};d[s("0x14")]=s("0x6f")+s("0x6"),d.id=10;y={};y[s("0x45")]=s("0x8"),y[s("0x14")]=s("0x6f")+"Info",y.id=11;b={};b.rule=s("0x8"),b[s("0x14")]="GeneralGeoInfo",b.id=12;m={};m.rule=s("0x8"),m.type=s("0x6f")+s("0x6"),m.id=13;w={};w.mid=O,w[s("0x2e")]=M,w[s("0x9")]=j,w.extentLayer=u,w[s("0x5d")]=p,w[s("0x40")]=h,w[s("0x51")]=f,w.polygonLayer=c,w[s("0x6a")+s("0x27")]=l,w[s("0x22")]=d,w[s("0x0")]=y,w["escalatorL"+s("0x61")]=b,w["externalMo"+s("0x13")]=m;a={};a[s("0x45")]="required",a.type="int32",a.id=1;_={};_[s("0x14")]="string",_.id=2;r={type:"float",id:3},g={};g[s("0x14")]=s("0x67"),g.id=4;O={};O[s("0x45")]=s("0x8"),O.type=s("0x77");M={packed:!(O.id=5)},j={};j.rule=s("0x8"),j[s("0x14")]=s("0x32"),j.id=6,j[s("0x6e")]=M;u={};u.eid=a,u.geo=_,u.height=r,u[s("0x64")]=g,u[s("0x17")]=O,u[s("0x2c")]=j;p={packed:!1},h={};h[s("0x45")]=s("0x8"),h[s("0x14")]="int32",h.id=1,h[s("0x6e")]=p;f={};f[s("0x17")]=h;c={};c[s("0x4c")]=f;l={};l.IndexInfo=c;d={};d[s("0x4c")]=u,d[s("0x5")]=l;y={};y[s("0x6f")+"Info"]=d;b={};b[s("0x4c")]=w,b.nested=y;m={};m[s("0x45")]=s("0x5b"),m.type=s("0x73"),m.id=1;M={};M[s("0x45")]="required",M.type=s("0x50"),M.id=2;a={};a.rule=s("0x8"),a[s("0x14")]=s("0x3")+s("0x5c"),a.id=3;_={};_[s("0x45")]="repeated",_[s("0x14")]="ModelBizInfo",_.id=4;r={};r.rule=s("0x8"),r[s("0x14")]=s("0x76")+"fo",r.id=5;g={};g[s("0x45")]="repeated",g[s("0x14")]="POIBizInfo",g.id=6;O={};O[s("0x45")]="repeated",O[s("0x14")]="PolygonBizInfo",O.id=7;j={rule:"repeated",type:"LiftBizInfo",id:8},p={};p.rule=s("0x8"),p.type=s("0x3e")+"fo",p.id=9;h={rule:"repeated"};h.type="PolygonLab"+s("0x31"),h.id=10;f={};f[s("0x45")]=s("0x8"),f.type=s("0x79")+s("0xf"),f.id=11;c={};c.mid=m,c[s("0x2e")]=M,c.extentLayer=a,c[s("0x5d")]=_,c[s("0x40")]=r,c[s("0x51")]=g,c.polygonLayer=O,c.liftLayer=j,c[s("0x0")]=p,c[s("0x6a")+s("0x27")]=h,c["externalMo"+s("0x13")]=f;u={};u.rule=s("0x5b"),u.type=s("0x50"),u.id=1;l={};l[s("0x14")]=s("0x73"),l.id=2;d={type:"int32",id:3},w={};w[s("0x14")]=s("0x73"),w.id=4;y={};y[s("0x14")]="string",y.id=5;m={};m[s("0x14")]=s("0x50"),m.id=6;M={};M[s("0x14")]=s("0x50"),M.id=7;a={};a[s("0x2b")]=u,a.fid=l,a[s("0x14")]=d,a.name=w,a[s("0x23")]=y,a.minlevel=m,a[s("0x4")]=M;_={};_.fields=a;r={};r[s("0x45")]="required",r.type=s("0x50"),r.id=1;g={};g[s("0x14")]=s("0x73"),g.id=2;O={type:"int32",id:3},j={};j[s("0x14")]="string",j.id=4;p={};p[s("0x14")]=s("0x73"),p.id=5;h={};h[s("0x14")]=s("0x50"),h.id=6;f={};f[s("0x14")]="int32",f.id=7;u={type:"int32",id:8},l={};l[s("0x2b")]=r,l[s("0x49")]=g,l.type=O,l.name=j,l.ename=p,l.minlevel=h,l[s("0x4")]=f,l.pass=u;d={};d.fields=l;w={};w[s("0x45")]="required",w.type=s("0x50"),w.id=1;y={};y[s("0x14")]="string",y.id=2;m={};m[s("0x14")]="int32",m.id=3;M={};M[s("0x14")]="string",M.id=4;a={type:"string",id:5},r={type:"int32",id:6},g={type:"int32",id:7},O={};O.eid=w,O.fid=y,O[s("0x14")]=m,O[s("0x4b")]=M,O[s("0x23")]=a,O.minlevel=r,O.maxlevel=g;j={};j[s("0x4c")]=O;p={};p[s("0x45")]=s("0x5b"),p[s("0x14")]="int32",p.id=1;h={};h[s("0x14")]="string",h.id=2;f={};f[s("0x14")]="int32",f.id=3;u={};u[s("0x14")]=s("0x73"),u.id=4;l={};l[s("0x14")]="string",l.id=5;w={};w[s("0x14")]=s("0x50"),w.id=6;y={};y[s("0x14")]=s("0x50"),y.id=7;m={};m[s("0x2b")]=p,m.fid=h,m[s("0x14")]=f,m[s("0x4b")]=u,m.ename=l,m.minlevel=w,m.maxlevel=y;M={};M[s("0x4c")]=m;a={rule:"required",type:"int32",id:1},r={};r.type=s("0x73"),r.id=2;g={};g[s("0x14")]="int32",g.id=3;O={};O[s("0x14")]="string",O.id=4;p={type:"string",id:5},h={};h[s("0x14")]=s("0x50"),h.id=6;f={};f[s("0x14")]="int32",f.id=7;u={};u.eid=a,u[s("0x49")]=r,u.type=g,u.name=O,u.ename=p,u.minlevel=h,u[s("0x4")]=f;l={};l.fields=u;w={rule:"required"};w.type=s("0x50"),w.id=1;y={};y[s("0x14")]=s("0x73"),y.id=2;m={};m[s("0x14")]=s("0x50"),m.id=3;a={};a.type=s("0x50"),a.id=4;r={};r[s("0x14")]=s("0x73"),r.id=5;g={type:"int32",id:6},O={};O[s("0x14")]=s("0x50"),O.id=7;p={};p[s("0x2b")]=w,p[s("0x49")]=y,p[s("0x14")]=m,p[s("0x56")]=a,p.floor=r,p.minlevel=g,p.maxlevel=O;h={};h.fields=p;f={};f[s("0x45")]=s("0x5b"),f[s("0x14")]=s("0x50"),f.id=1;u={type:"string",id:2},w={};w[s("0x14")]="int32",w.id=3;y={};y[s("0x14")]=s("0x50"),y.id=4;m={};m.type=s("0x50"),m.id=5;a={};a.type=s("0x50"),a.id=6;r={};r.eid=f,r[s("0x49")]=u,r[s("0x14")]=w,r[s("0x56")]=y,r.minlevel=m,r.maxlevel=a;g={};g[s("0x4c")]=r;O={rule:"required"};O.type=s("0x50"),O.id=1;p={};p.type=s("0x73"),p.id=2;f={type:"int32",id:3},u={};u[s("0x14")]=s("0x67"),u.id=4;w={type:"string",id:5},y={};y[s("0x14")]=s("0x73"),y.id=6;m={};m[s("0x14")]="float",m.id=7;a={};a[s("0x2b")]=O,a[s("0x49")]=p,a[s("0x14")]=f,a[s("0x1c")]=u,a.name=w,a.ename=y,a.angle=m;r={};r.fields=a;O={};O.rule=s("0x5b"),O.type="int32",O.id=1;p={};p[s("0x14")]="string",p.id=2;f={};f[s("0x14")]="int32",f.id=3;u={};u[s("0x14")]="string",u.id=4;w={};w[s("0x14")]=s("0x73"),w.id=5;y={};y.type=s("0x50"),y.id=6;m={};m.type=s("0x50"),m.id=7;a={};a.eid=O,a[s("0x49")]=p,a.type=f,a.name=u,a[s("0x23")]=w,a.minlevel=y,a.maxlevel=m;p={};p[s("0x4c")]=a;f={};f.ExtentBizInfo=_,f.ModelBizInfo=d,f[s("0x76")+"fo"]=j,f[s("0x2d")+s("0x6")]=M,f[s("0x35")]=l,f[s("0xa")+"o"]=h,f.StairBizInfo=g,f[s("0x2f")+s("0x31")]=r,f["ExternalMo"+s("0xf")]=p;u={};u[s("0x4c")]=c,u.nested=f;w={};w.rule=s("0x5b"),w[s("0x14")]="string",w.id=1;y={};y.rule=s("0x5b"),y[s("0x14")]=s("0x50"),y.id=2;m={};m.rule=s("0x8"),m[s("0x14")]=s("0x72"),m.id=3;a={};a[s("0x45")]="repeated",a.type="NaviSegment",a.id=4;_={};_.rule=s("0x8"),_[s("0x14")]="NaviZone",_.id=5;d={};d.rule=s("0x8"),d[s("0x14")]="NaviModel",d.id=6;j={};j[s("0x7a")]=!1;M={rule:"repeated",type:"int32",id:7};M.options=j;l={};l[s("0x3d")]=w,l.gid=y,l[s("0x43")]=m,l[s("0x39")+"ts"]=a,l[s("0x48")]=_,l.naviModels=d,l.nextFloors=M;h={type:"int32",id:1},g={};g.type=s("0x50"),g.id=2;r={type:"int32",id:3},p={};p[s("0x14")]=s("0x50"),p.id=4;c={};c[s("0x14")]=s("0x50"),c.id=5;f={};f.type=s("0x73"),f.id=6;j={};j[s("0x14")]=s("0x73"),j.id=7;w={};w[s("0x14")]=s("0x73"),w.id=8;y={},m={type:"string",id:10},a={type:y[s("0x14")]="int32",id:11},_={packed:!(y.id=9)},d={};d.rule=s("0x8"),d.type="int32",d.id=12,d[s("0x6e")]=_;M={packed:!1},_={};_[s("0x45")]=s("0x8"),_[s("0x14")]="double",_.id=13,_.options=M;M={};M.nodeId=h,M[s("0x68")]=g,M[s("0x78")]=r,M[s("0x20")]=p,M[s("0x5e")]=c,M.liftFloor=f,M[s("0x33")]=j,M.geo=w,M.entranceType=y,M[s("0x47")+"oor"]=m,M.doortype=a,M[s("0x17")]=d,M[s("0x2c")]=_;h={};h[s("0x4c")]=M;g={};g.type=s("0x50"),g.id=1;r={};r.type=s("0x50"),r.id=2;p={};p.type=s("0x50"),p.id=3;c={};c[s("0x14")]="double",c.id=4;f={};f.type=s("0x50"),f.id=5;j={type:"string",id:6},w={type:"int32",id:7},y={};y[s("0x14")]=s("0x73"),y.id=8;m={};m[s("0x14")]=s("0x73"),m.id=9;a={type:"int32",id:10},d={};d[s("0x7a")]=!1;_={};_[s("0x45")]=s("0x8"),_.type=s("0x50"),_.id=11,_[s("0x6e")]=d;M={packed:!1},d={};d[s("0x45")]=s("0x8"),d[s("0x14")]=s("0x32"),d.id=12,d[s("0x6e")]=M;M={};M[s("0x16")]=g,M[s("0x41")]=r,M[s("0xd")]=p,M[s("0x10")]=c,M[s("0x60")]=f,M.name=j,M[s("0x4e")]=w,M.desc=y,M.geo=m,M.through=a,M.idxs=_,M.pts=d;j={};j.fields=M;w={};w[s("0x45")]=s("0x5b"),w[s("0x14")]="int32",w.id=1;y={default:0},m={rule:"required"};m.type=s("0x50"),m.id=2,m.options=y;a={};a.type=s("0x73"),a.id=3;_={rule:"repeated"};_[s("0x14")]="string";d={packed:!(_.id=4)},M={};M[s("0x45")]=s("0x8"),M.type=s("0x50"),M.id=5,M.options=d;y={packed:!1},d={rule:"repeated"};d[s("0x14")]=s("0x32"),d.id=6,d.options=y;y={};y.id=w,y[s("0x14")]=m,y[s("0x55")]=a,y.rejects=_,y[s("0x17")]=M,y.pts=d;m={};m.fields=y;a={};a[s("0x45")]="required",a.type=s("0x50");_={packed:!(a.id=1)},M={rule:"repeated"};M[s("0x14")]="int32",M.id=2,M[s("0x6e")]=_;d={packed:!1},y={};y.rule=s("0x8"),y.type="int32",y.id=3,y.options=d;_={};_[s("0x7a")]=!1;d={};d.rule=s("0x8"),d[s("0x14")]=s("0x50"),d.id=4,d[s("0x6e")]=_;_={};_[s("0x6b")]=a,_.doorids=M,_.nodetypes=y,_[s("0x74")]=d;d={};d[s("0x4c")]=_;_={};_.NaviNode=h,_[s("0x25")+"t"]=j,_[s("0x2a")]=m,_[s("0x3a")]=d;d={};d[s("0x4c")]=l,d[s("0x5")]=_;_={};_[s("0x3b")]=E,_[s("0x19")]=x,_[s("0x24")]=b,_[s("0x1d")]=u,_.FloorNavi=d;d={};d.options=n,d.nested=_;_={};_[s("0x12")]=d;d={};d[s("0x5")]=_,this.$t=d};o=function t(){!function(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}(this,t),this.Jt=null};Object.assign(o.prototype,{Kt:function(){this.Jt||(this.Jt=Xt.a.Root.fromJSON("undefined"!=typeof KjWzhWlSj&&KjWzhWlSj.ProtoDef?KjWzhWlSj.ProtoDef:(new zt).$t))},ti:function(t){return this.Kt(),this.Jt.lookup("Map").decode(t)},ii:function(t){for(var i=0;i<t.buffers.length;i++){var n=t.buffers[i];if(1==n.btype)return this.ni(n.data)}return null},ri:function(t,i){for(var n=0;n<t.buffers.length;n++){var r=t.buffers[n];if(2==r.btype&&r.gid==i)return this.ei(r.data)}return null},si:function(t,i){for(var n=0;n<t.buffers.length;n++){var r=t.buffers[n];if(3==r.btype&&r.gid==i)return this.oi(r.data)}return null},ui:function(t,i){for(var n=0;n<t.buffers.length;n++){var r=t.buffers[n];if(4==r.btype&&r.gid==i)return this.ai(r.data)}return null},ni:function(t){this.Kt();var i=this.Jt.lookup("Scene").decode(t);return i.levels=[],i.layerGroups.forEach(function(t){i.levels.push(t.gid)}),i},ei:function(t){return this.Kt(),this.Jt.lookup("FloorGeo").decode(t)},oi:function(t){return this.Kt(),this.Jt.lookup("FloorBiz").decode(t)},ai:function(t){return this.Kt(),this.Jt.lookup("FloorNavi").decode(t)}});var Ht=o;g=function t(){var i;!function(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}(this,t),void 0!==Gt.a.global().KjWzhWlSj&&Gt.a.global().KjWzhWlSj.ProtoReaderStatic?(i=Gt.a.global().KjWzhWlSj.ProtoReaderStatic,this.fi=new i):this.fi=new Ht};Object.assign(g.prototype,{ti:function(t){return this.fi.ti(t)},ii:function(t){return this.fi.ii(t)},ri:function(t,i){return this.fi.ri(t,i)},si:function(t,i){return this.fi.si(t,i)},ui:function(t,i){return this.fi.ui(t,i)},ni:function(t){return this.fi.ni(t)},ei:function(t){return this.fi.ei(t)},oi:function(t){return this.fi.oi(t)},ai:function(t){return this.fi.ai(t)}});var Qt,$t,Jt,Kt,ti,ii=g,r="https://console.fengmap.com/api-s/",ni={domain:r,online:r+"sdk/check",check:r+"sdk/auth/web",download:r+"sdk/auth/obtainMapRoute",downloadTile:r+"sdk/authLayered/obtainMapRoute",collect:r+"sdk/collect",themeUrl:r+"webtheme/",externalModelUrl:r+"webmodel/"};function ri(t,i){for(var n,r=0,e=0,e=0;e<8;e++)1&i&&(r^=t),n=128&t,t<<=1,n&&(t^=27),i>>=1;return r}function ei(t,i,n){for(var r=0;r<4;r++)t[0+r]^=i[16*n+4*r],t[4+r]^=i[16*n+4*r+1],t[8+r]^=i[16*n+4*r+2],t[12+r]^=i[16*n+4*r+3]}function si(t){for(var i,n,r,e=1;e<4;e++)for(n=0;n<e;){for(r=t[4*e+4-1],i=3;0<i;i--)t[4*e+i]=t[4*e+i-1];t[4*e+0]=r,n++}}function oi(t){for(var i,n,r,e=0;e<4;e++)for(i=0;i<4;i++)n=(240&t[4*e+i])>>4,r=15&t[4*e+i],t[4*e+i]=$t[16*n+r]}function ui(t){for(var i=0;i<4;i++)t[i]=Qt[16*((240&t[i])>>4)+(15&t[i])]}function hi(t){return parseInt(t,16)}var ai=(Qt=[99,124,119,123,242,107,111,197,48,1,103,43,254,215,171,118,202,130,201,125,250,89,71,240,173,212,162,175,156,164,114,192,183,253,147,38,54,63,247,204,52,165,229,241,113,216,49,21,4,199,35,195,24,150,5,154,7,18,128,226,235,39,178,117,9,131,44,26,27,110,90,160,82,59,214,179,41,227,47,132,83,209,0,237,32,252,177,91,106,203,190,57,74,76,88,207,208,239,170,251,67,77,51,133,69,249,2,127,80,60,159,168,81,163,64,143,146,157,56,245,188,182,218,33,16,255,243,210,205,12,19,236,95,151,68,23,196,167,126,61,100,93,25,115,96,129,79,220,34,42,144,136,70,238,184,20,222,94,11,219,224,50,58,10,73,6,36,92,194,211,172,98,145,149,228,121,231,200,55,109,141,213,78,169,108,86,244,234,101,122,174,8,186,120,37,46,28,166,180,198,232,221,116,31,75,189,139,138,112,62,181,102,72,3,246,14,97,53,87,185,134,193,29,158,225,248,152,17,105,217,142,148,155,30,135,233,206,85,40,223,140,161,137,13,191,230,66,104,65,153,45,15,176,84,187,22],$t=[82,9,106,213,48,54,165,56,191,64,163,158,129,243,215,251,124,227,57,130,155,47,255,135,52,142,67,68,196,222,233,203,84,123,148,50,166,194,35,61,238,76,149,11,66,250,195,78,8,46,161,102,40,217,36,178,118,91,162,73,109,139,209,37,114,248,246,100,134,104,152,22,212,164,92,204,93,101,182,146,108,112,72,80,253,237,185,218,94,21,70,87,167,141,157,132,144,216,171,0,140,188,211,10,247,228,88,5,184,179,69,6,208,44,30,143,202,63,15,2,193,175,189,3,1,19,138,107,58,145,17,65,79,103,220,234,151,242,207,206,240,180,230,115,150,172,116,34,231,173,53,133,226,249,55,232,28,117,223,110,71,241,26,113,29,41,197,137,111,183,98,14,170,24,190,27,252,86,62,75,198,210,121,32,154,219,192,254,120,205,90,244,31,221,168,51,136,7,199,49,177,18,16,89,39,128,236,95,96,81,127,169,25,181,74,13,45,229,122,159,147,201,156,239,160,224,59,77,174,42,245,176,200,235,187,60,131,83,153,97,23,43,4,126,186,119,214,38,225,105,20,99,85,33,12,125],ti=[2,Kt=Jt=0,0,0],{decryption:function(t,i){for(var n=Array(16),r=0;r<16;r++)n[r]=16*hi(i.substr(2*r,1))+hi(i.substr(2*r+1,1));var e=Array(16);for(r=0;r<16;r++)e[r]=16*hi(t.substr(2*r,1))+hi(t.substr(2*r+1,1));var s=Array(16);switch(r=[],n.length){default:case 16:Jt=4,Kt=10;break;case 24:Jt=6,Kt=12;break;case 32:Jt=8,Kt=14}for(var o=r=Array(16*(Kt+1)),u=Array(4),h=4*(Kt+1),a=0;a<Jt;a++)o[4*a+0]=n[4*a+0],o[4*a+1]=n[4*a+1],o[4*a+2]=n[4*a+2],o[4*a+3]=n[4*a+3];for(a=Jt;a<h;a++){if(u[0]=o[4*(a-1)+0],u[1]=o[4*(a-1)+1],u[2]=o[4*(a-1)+2],u[3]=o[4*(a-1)+3],0==a%Jt){for(var f=void 0,c=void 0,f=(n=u)[0],c=0;c<3;c++)n[c]=n[c+1];if(n[3]=f,ui(u),1==(n=a/Jt))ti[0]=1;else if(1<n)for(ti[0]=2,n--;0<n-1;)ti[0]=ri(ti[0],2),n--;(c=n=u)[0]=n[0]^(f=ti)[0],c[1]=n[1]^f[1],c[2]=n[2]^f[2],c[3]=n[3]^f[3]}else 6<Jt&&4==a%Jt&&ui(u);o[4*a+0]=o[4*(a-Jt)+0]^u[0],o[4*a+1]=o[4*(a-Jt)+1]^u[1],o[4*a+2]=o[4*(a-Jt)+2]^u[2],o[4*a+3]=o[4*(a-Jt)+3]^u[3]}for(o=Array(16),u=0;u<4;u++)for(a=0;a<4;a++)o[4*u+a]=e[u+4*a];for(ei(o,r,Kt),e=Kt-1;1<=e;e--)for(si(o),oi(o),ei(o,r,e),u=o,a=[14,9,13,11],h=c=void 0,n=Array(4),f=Array(4),h=0;h<4;h++){for(c=0;c<4;c++)n[c]=u[4*c+h];var l=n,v=f;for(v[0]=ri((c=a)[0],l[0])^ri(c[3],l[1])^ri(c[2],l[2])^ri(c[1],l[3]),v[1]=ri(c[1],l[0])^ri(c[0],l[1])^ri(c[3],l[2])^ri(c[2],l[3]),v[2]=ri(c[2],l[0])^ri(c[1],l[1])^ri(c[0],l[2])^ri(c[3],l[3]),v[3]=ri(c[3],l[0])^ri(c[2],l[1])^ri(c[1],l[2])^ri(c[0],l[3]),c=0;c<4;c++)u[4*c+h]=f[c]}for(si(o),oi(o),ei(o,r,0),u=0;u<4;u++)for(a=0;a<4;a++)s[u+4*a]=o[4*u+a];for(e="",r=0;r<16;++r)e+=o=(o=s[r].toString(16)).length<2?"0"+o:o;return e}});function fi(t,i){var n=(65535&t)+(65535&i);return(t>>16)+(i>>16)+(n>>16)<<16|65535&n}function ci(t,i,n,r,e,s){return fi((s=fi(fi(i,t),fi(r,s)))<<(e=e)|s>>>32-e,n)}function li(t,i,n,r,e,s,o){return ci(i&n|~i&r,t,i,e,s,o)}function vi(t,i,n,r,e,s,o){return ci(i&r|n&~r,t,i,e,s,o)}function di(t,i,n,r,e,s,o){return ci(i^n^r,t,i,e,s,o)}function yi(t,i,n,r,e,s,o){return ci(n^(i|~r),t,i,e,s,o)}function bi(t,i){var n,r,e,s;t[i>>5]|=128<<i%32,t[14+(i+64>>>9<<4)]=i;for(var o=1732584193,u=-271733879,h=-1732584194,a=271733878,f=0;f<t.length;f+=16)o=li(n=o,r=u,e=h,s=a,t[f],7,-680876936),a=li(a,o,u,h,t[f+1],12,-389564586),h=li(h,a,o,u,t[f+2],17,606105819),u=li(u,h,a,o,t[f+3],22,-1044525330),o=li(o,u,h,a,t[f+4],7,-176418897),a=li(a,o,u,h,t[f+5],12,1200080426),h=li(h,a,o,u,t[f+6],17,-1473231341),u=li(u,h,a,o,t[f+7],22,-45705983),o=li(o,u,h,a,t[f+8],7,1770035416),a=li(a,o,u,h,t[f+9],12,-1958414417),h=li(h,a,o,u,t[f+10],17,-42063),u=li(u,h,a,o,t[f+11],22,-1990404162),o=li(o,u,h,a,t[f+12],7,1804603682),a=li(a,o,u,h,t[f+13],12,-40341101),h=li(h,a,o,u,t[f+14],17,-1502002290),o=vi(o,u=li(u,h,a,o,t[f+15],22,1236535329),h,a,t[f+1],5,-165796510),a=vi(a,o,u,h,t[f+6],9,-1069501632),h=vi(h,a,o,u,t[f+11],14,643717713),u=vi(u,h,a,o,t[f],20,-373897302),o=vi(o,u,h,a,t[f+5],5,-701558691),a=vi(a,o,u,h,t[f+10],9,38016083),h=vi(h,a,o,u,t[f+15],14,-660478335),u=vi(u,h,a,o,t[f+4],20,-405537848),o=vi(o,u,h,a,t[f+9],5,568446438),a=vi(a,o,u,h,t[f+14],9,-1019803690),h=vi(h,a,o,u,t[f+3],14,-187363961),u=vi(u,h,a,o,t[f+8],20,1163531501),o=vi(o,u,h,a,t[f+13],5,-1444681467),a=vi(a,o,u,h,t[f+2],9,-51403784),h=vi(h,a,o,u,t[f+7],14,1735328473),o=di(o,u=vi(u,h,a,o,t[f+12],20,-1926607734),h,a,t[f+5],4,-378558),a=di(a,o,u,h,t[f+8],11,-2022574463),h=di(h,a,o,u,t[f+11],16,1839030562),u=di(u,h,a,o,t[f+14],23,-35309556),o=di(o,u,h,a,t[f+1],4,-1530992060),a=di(a,o,u,h,t[f+4],11,1272893353),h=di(h,a,o,u,t[f+7],16,-155497632),u=di(u,h,a,o,t[f+10],23,-1094730640),o=di(o,u,h,a,t[f+13],4,681279174),a=di(a,o,u,h,t[f],11,-358537222),h=di(h,a,o,u,t[f+3],16,-722521979),u=di(u,h,a,o,t[f+6],23,76029189),o=di(o,u,h,a,t[f+9],4,-640364487),a=di(a,o,u,h,t[f+12],11,-421815835),h=di(h,a,o,u,t[f+15],16,530742520),o=yi(o,u=di(u,h,a,o,t[f+2],23,-995338651),h,a,t[f],6,-198630844),a=yi(a,o,u,h,t[f+7],10,1126891415),h=yi(h,a,o,u,t[f+14],15,-1416354905),u=yi(u,h,a,o,t[f+5],21,-57434055),o=yi(o,u,h,a,t[f+12],6,1700485571),a=yi(a,o,u,h,t[f+3],10,-1894986606),h=yi(h,a,o,u,t[f+10],15,-1051523),u=yi(u,h,a,o,t[f+1],21,-2054922799),o=yi(o,u,h,a,t[f+8],6,1873313359),a=yi(a,o,u,h,t[f+15],10,-30611744),h=yi(h,a,o,u,t[f+6],15,-1560198380),u=yi(u,h,a,o,t[f+13],21,1309151649),o=yi(o,u,h,a,t[f+4],6,-145523070),a=yi(a,o,u,h,t[f+11],10,-1120210379),h=yi(h,a,o,u,t[f+2],15,718787259),u=yi(u,h,a,o,t[f+9],21,-343485551),o=fi(o,n),u=fi(u,r),h=fi(h,e),a=fi(a,s);return[o,u,h,a]}function pi(t){for(var i="",n=32*t.length,r=0;r<n;r+=8)i+=String.fromCharCode(t[r>>5]>>>r%32&255);return i}function mi(t){var i=[];for(i[(t.length>>2)-1]=void 0,r=0;r<i.length;r+=1)i[r]=0;for(var n=8*t.length,r=0;r<n;r+=8)i[r>>5]|=(255&t.charCodeAt(r/8))<<r%32;return i}function wi(t){for(var i,n="0123456789abcdef",r="",e=0;e<t.length;e+=1)i=t.charCodeAt(e),r+=n.charAt(i>>>4&15)+n.charAt(15&i);return r}function _i(t){return unescape(encodeURIComponent(t))}function gi(t){return pi(bi(mi(t=_i(t)),8*t.length))}function xi(t,i){return function(t,i){var n,r=mi(t),e=[],s=[];for(e[15]=s[15]=void 0,16<r.length&&(r=bi(r,8*t.length)),n=0;n<16;n+=1)e[n]=909522486^r[n],s[n]=1549556828^r[n];return i=bi(e.concat(mi(i)),512+8*i.length),pi(bi(s.concat(i),640))}(_i(t),_i(i))}function Oi(t,i,n){return i?n?xi(i,t):wi(xi(i,t)):n?gi(t):wi(gi(t))}var Mi={encryption:function(t){return Oi(t)}};var ji="0.0.0.0",o=function t(){!function(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}(this,t)};Object.assign(o.prototype,{ci:function(t,i,n,r,e){"undefined"==typeof KjWzhWlSj||!KjWzhWlSj.license||!KjWzhWlSj.license?r&&r():"string"==typeof i&&0!=i.length?(i=ai.decryption(i,"026685bf295f587b5dffc1f18d5dc27c"),n=Mi.encryption(n),i=ai.decryption(i,n),-1!==t.indexOf(i)?r&&r():e&&e()):e&&e()},li:function(t,i,n,r){var e;-1===i.indexOf("")&&-1===i.indexOf("aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa")?(e=Mi.encryption("fengmap.localhost:"+t.appName),e=ai.decryption(t.key,e),-1!==i.indexOf(e)?this.ci(i,t.license,t.buildingID,function(){n&&n()},function(){r&&r(Zt.LICENSE_ERROR)}):r&&r(Zt.NAME_KEY_ERROR)):n&&n()},vi:function(t,i,n){var r=this;void 0===t.mapURL?(this.di(t),this.yi(function(){new Yt({method:"POST",url:ni.check,header:{"X-Requested-With":"XMLHttpRequest","Content-type":"application/json;charset=utf-8"},data:r.bi(t)}).Qt(function(){i&&i()},function(t){n&&n(t)},function(){i&&i()})},function(){i&&i()})):i&&i()},yi:function(t,i){new Yt({method:"GET",url:ni.online}).Qt(function(){t&&t()},function(){i&&i()},function(){i&&i()})},bi:function(t,i){var n=Gt.a.global().location.host,r=n.indexOf(":");-1!==r&&(n=n.slice(0,r));r={mapId:t.buildingID,appName:t.appName};return i?r.keyValue=t.key:r.appKey=t.key,i?r.webUrl=n||ji:r.webURL=n||ji,r},di:function(t){if("undefined"!=typeof navigator&&"undefined"!=typeof document){var i={};-1!==navigator.userAgent.indexOf("Opera")?i.userAgent="Opera":-1!==navigator.userAgent.indexOf("Firefox")?i.userAgent="FF":-1!==navigator.userAgent.indexOf("Chrome")?i.userAgent="Chrome":-1!==navigator.userAgent.indexOf("Safari")&&0===navigator.userAgent.indexOf("Chrome")?i.userAgent="Safari":-1!==navigator.userAgent.indexOf("compatible")&&-1!==navigator.userAgent.indexOf("MSIE")?i.userAgent="IE":-1!==navigator.userAgent.indexOf("Trident")&&(i.userAgent="Edge"),i.product="JS",i.sdkVersion=u+"."+h,i.appName=t.appName,i.appkey=t.key;var n=document.createElement("canvas").getContext("experimental-webgl"),t=n.getExtension("WEBGL_debug_renderer_info");i.gpu=t?n.getParameter(t.UNMASKED_RENDERER_WEBGL):null,i.os=navigator.platform;for(var r=!0,e=navigator.userAgent,s=["Android","iPhone","SymbianOS","Windows Phone","iPad","iPod"],o=0;o<s.length;o++)if(0<e.indexOf(s[o])){r=!1;break}i.device=r?"pc":"mobile",new Yt({method:"POST",url:ni.collect,header:{"X-Requested-With":"XMLHttpRequest","Content-type":"application/json;charset=utf-8"},data:i}).Qt()}}});var Ei=new o;function ki(t){return function(t){if(Array.isArray(t))return Ti(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,i){if(t){if("string"==typeof t)return Ti(t,i);var n=Object.prototype.toString.call(t).slice(8,-1);return"Map"===(n="Object"===n&&t.constructor?t.constructor.name:n)||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ti(t,i):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ti(t,i){(null==i||i>t.length)&&(i=t.length);for(var n=0,r=new Array(i);n<i;n++)r[n]=t[n];return r}g=function t(){!function(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}(this,t),this.fi=new ii};Object.assign(g.prototype,{pi:function(){},mi:function(t,i,n,r){var e;t.mapURL?(e=t.isPreview||t.mapURLAbsolute?t.mapURL+t.buildingID+i+".fmap":t.mapURL+t.buildingID+"/"+t.buildingID+i+".fmap",n&&n(e)):new Yt({method:"POST",url:""===i?ni.download:ni.downloadTile+"/"+t.buildingID+i+".fmap",header:{"X-Requested-With":"XMLHttpRequest","Content-type":"application/json;charset=utf-8"},data:Object.assign({newFlag:"2",keyType:3,isSeparate:!1},Ei.bi(t,!0))}).Qt(function(t){n&&n(t.replace('"',"").replace('"',""))},function(t){r&&r(t)},function(t){r&&r(t)})},wi:function(n,r,e){var s=this;Ei.vi(n,function(){s.mi(n,"",function(t){new Yt({method:"GET",responseType:"arraybuffer",url:t}).Qt(function(t){var t=new Uint8Array(t),i=s.fi.ti(t),t=[];i.keys&&0!==i.keys.length?t.push.apply(t,ki(i.keys)):t.push(i.key),n.isPreview?r&&r(i):Ei.li(n,t,function(){r&&r(i)},function(t){e&&e(t)})},function(t){e&&e(t===Zt.PATH_ERROR?Zt.MAP_ID_URL_ERROR:t)},function(t){e&&e(t)})},function(t){e&&e(t)})},function(t){e&&e(t)})},_i:function(n,r,e){var s=this;Ei.vi(n,function(){s.mi(n,".scene",function(t){new Yt({method:"GET",responseType:"arraybuffer",url:t}).Qt(function(t){var t=new Uint8Array(t),i=s.fi.ni(t),t=[];i.keys&&0!==i.keys.length?t.push.apply(t,ki(i.keys)):t.push(i.key),n.isPreview?r&&r(i):Ei.li(n,t,function(){r&&r(i)},function(t){e&&e(t)})},function(t){e&&e(t)},function(t){e&&e(t)})},function(t){e&&e(t)})},function(t){e&&e(t)})},gi:function(t,i,n,r){var e=this;this.mi(t,".floor."+i+".geo",function(t){new Yt({method:"GET",responseType:"arraybuffer",url:t}).Qt(function(t){t=new Uint8Array(t),t=e.fi.ei(t);n&&n(t)},function(t){r&&r(t)},function(t){r&&r(t)})},function(t){r&&r(t)})},xi:function(t,i,n,r){var e=this;this.mi(t,".floor."+i+".biz",function(t){new Yt({method:"GET",responseType:"arraybuffer",url:t}).Qt(function(t){t=new Uint8Array(t),t=e.fi.oi(t);n&&n(t)},function(t){r&&r(t)},function(t){r&&r(t)})},function(t){r&&r(t)})},Oi:function(t,i,n,r){var e=this;this.mi(t,".floor."+i+".navi",function(t){new Yt({method:"GET",responseType:"arraybuffer",url:t}).Qt(function(t){t=new Uint8Array(t),t=e.fi.ai(t);n&&n(t)},function(t){r&&r(t)})},function(t){r&&r(t)},function(t){r&&r(t)})}});var Ri=g;r=function t(){!function(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}(this,t)};Object.assign(r.prototype,{Mi:function(t,i){for(var n=[],r=0,e=0;e<t.length;e++){var s=t[e].idxs;if("number"==typeof(s=s||t[e]))for(;r<s;)n.push({x:i[r],y:i[r+1]}),r+=2;else for(var o=0;o<s.length;o++)for(var u=s[o];r<u;)n.push({x:i[r],y:i[r+1]}),r+=2}return n},ji:function(t,i){for(var n=[],r=0,e=0;e<t.length;e++){var s=t[e].idxs;if("number"==typeof(s=s||t[e])){for(var o=[];r<s;)o.push({x:i[r],y:i[r+1]}),r+=2;n.push(o)}else for(var u=0;u<s.length;u++){for(var h=s[u],a=[];r<h;)a.push({x:i[r],y:i[r+1]}),r+=2;n.push(a)}}return n},Ei:function(t,i){for(var n=[],r=[],e=0,s=0;s<t.length;s++){var o=t[s].idxs;if("number"==typeof(o=o||t[s]))for(;e<o;)n.push({x:i[e],y:i[e+1]}),e+=2;else for(var u=0;u<o.length;u++)if(0===u)for(var h=o[u];e<h;)n.push({x:i[e],y:i[e+1]}),e+=2;else{for(var a=[],f=o[u];e<f;)a.push({x:i[e],y:i[e+1]}),e+=2;r.push(a)}}var c=[];return c.push(n),c.push.apply(c,r),c},ki:function(t){for(var i=[],n=t.length,r=0;r<n;r++){for(var e=t[r],s={x:this.Ti(e.x),y:this.Ti(e.y)},o=i.length,u=!1,h=0;h<o;h++){var a=i[h];if(a.x==s.x&&a.y==s.y){u=!0;break}}u||i.push(s)}return i},Ti:function(t){return+t.toFixed(2)}});var Ai=new r;var Si=Si||{};Si.G1="MULTIPOLYGON(((",Si.G2="POINT(",Si.G3="MULTILINESTRING((",Si.GLEN1="MULTIPOLYGON(((".length,Si.GLEN2="POINT(".length,Si.GLEN3="MULTILINESTRING((".length;o=function t(){!function(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}(this,t)};Object.assign(o.prototype,{Mi:function(t){var i=[];if(0!=t.indexOf(Si.G2))return[];t=t.substring(Si.GLEN2,t.length-1).split(" ");return i.push({x:parseFloat(t[0]),y:parseFloat(t[1])}),i},ji:function(t){if(0!=t.indexOf(Si.G3))return[];for(var i=t.substring(Si.GLEN3,t.length-2).split(","),n=[],r=0;r<i.length;r++){var e=i[r].split(" ");n.push({x:parseFloat(e[0]),y:parseFloat(e[1])})}return[n]},Ei:function(t){var i=[],n=[];if(0!=t.indexOf(Si.G1))return[];for(var r=t.substring(Si.GLEN1,t.length-3).split(/\),\(/),e=0;e<r.length;e++){var s=r[e].split(/,/);if(0==e)for(var o=0;o<s.length;o++){var u=s[o].split(" ");i.push({x:parseFloat(u[0]),y:parseFloat(u[1])})}else{for(var h=[],a=0;a<s.length;a++){var f=s[a].split(" ");h.push({x:parseFloat(f[0]),y:parseFloat(f[1])})}n.push(h)}}t=[];return t.push(i),t.push.apply(t,n),t},ki:function(t){for(var i=[],n=t.length,r=0;r<n;r++){for(var e=t[r],s={x:this.Ti(e.x),y:this.Ti(e.y)},o=i.length,u=!1,h=0;h<o;h++){var a=i[h];if(a.x==s.x&&a.y==s.y){u=!0;break}}u||i.push(s)}return i},Ti:function(t){return+t.toFixed(2)}});var Ii=new o,g={STOP:0,PASS:1,PUSH:2};Object.freeze(g);var Ni=g;function Li(t,i){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,i){if(t){if("string"==typeof t)return Pi(t,i);var n=Object.prototype.toString.call(t).slice(8,-1);return"Map"===(n="Object"===n&&t.constructor?t.constructor.name:n)||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Pi(t,i):void 0}}(t))||i&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var e,s=!0,o=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return s=t.done,t},e:function(t){o=!0,e=t},f:function(){try{s||null==n.return||n.return()}finally{if(o)throw e}}}}function Pi(t,i){(null==i||i>t.length)&&(i=t.length);for(var n=0,r=new Array(i);n<i;n++)r[n]=t[n];return r}function Di(t,i){for(var n=0;n<i.length;n++){var r=i[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}r=function(){function i(t){!function(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}(this,i),this.Yt=B.GROUP,this.Ri=new Map,this.Ai=-1,this.Si=null,this.Ut=null,Object.assign(this,t)}var t,n,r;return t=i,(n=[{key:"getType",value:function(){return this.Yt}},{key:"getCoordinates",value:function(){return this.Si}},{key:"getBound",value:function(){return this.Ut||this.Ii(),this.Ut}},{key:"getChildren",value:function(){return this.Ri}}])&&Di(t.prototype,n),r&&Di(t,r),i}();Object.assign(r.prototype,{pi:function(){var t,i=Li(this.Ri.values());try{for(i.s();!(t=i.n()).done;){var n=t.value;n.pi&&n.pi()}}catch(t){i.e(t)}finally{i.f()}this.Ri.clear()},Ni:function(i){var t=i.Li(this);t==Ni.PASS?this.Ri.forEach(function(t){t.Ni(i)}):t==Ni.PUSH&&i.Pi.push(this)},Ii:function(){var i=this;this.Ut=new dt,0!=this.Ri.size&&this.Ri.forEach(function(t){i.Ut.Lt(t.getBound())})}});var Fi=r;function Ci(t,i){for(var n=0;n<i.length;n++){var r=i[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}o=function(){function i(t){!function(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}(this,i),this.Ai=t.eid,this.Yt=B.POINT,this.Si=null,this.Ut=null,Object.assign(this,t)}var t,n,r;return t=i,(n=[{key:"getType",value:function(){return this.Yt}},{key:"getCoordinates",value:function(){return this.Si}},{key:"getBound",value:function(){return this.Ut||this.Ii(),this.Ut}}])&&Ci(t.prototype,n),r&&Ci(t,r),i}();Object.assign(o.prototype,{Ii:function(){this.Ut=new dt,this.Si&&this.Ut.Pt(this.Si)},Ni:function(t){t.Li(this)==Ni.PUSH&&t.Pi.push(this)}});var Ui=o;function Bi(t,i){for(var n=0;n<i.length;n++){var r=i[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}g=function(){function i(t){!function(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}(this,i),this.Ai=t.eid,this.Yt=B.POLYGON,this.Dt=null,this.Si=null,this.Ut=null,Object.assign(this,t)}var t,n,r;return t=i,(n=[{key:"getType",value:function(){return this.Yt}},{key:"getCenter",value:function(){return this.Dt}},{key:"getCoordinates",value:function(){return this.Si}},{key:"getBound",value:function(){return this.Ut||this.Ii(),this.Ut}}])&&Bi(t.prototype,n),r&&Bi(t,r),i}();Object.assign(g.prototype,{Ii:function(){var i=this;this.Ut=new dt,this.Si&&this.Si.forEach(function(t){i.Ut.Pt(t)})},Ni:function(t){t.Li(this)==Ni.PUSH&&t.Pi.push(this)}});var Gi=g;function Zi(t,i){if(null==t)return{};var n,r=function(t,i){if(null==t)return{};var n,r,e={},s=Object.keys(t);for(r=0;r<s.length;r++)n=s[r],0<=i.indexOf(n)||(e[n]=t[n]);return e}(t,i);if(Object.getOwnPropertySymbols)for(var e=Object.getOwnPropertySymbols(t),s=0;s<e.length;s++)n=e[s],0<=i.indexOf(n)||Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n]);return r}r=function t(){!function(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}(this,t),this.Di=[1,2,3,4],this.Fi=[6,7,9],this.Ci=[31,32],this.Ui=new Map,this.Ui.set(31,B.EXTENTGROUP),this.Ui.set(32,B.MODELGROUP),this.Ui.set(6,B.FACILITYGROUP),this.Ui.set(7,B.LABELGROUP),this.Ui.set(9,B.EXTERNALMODELGROUP),this.Bi=new Map,this.Bi.set(31,["extentLayer",null]),this.Bi.set(32,["modelLayer","labelLayer"]),this.Bi.set(6,["poiLayer",null]),this.Bi.set(7,["labelLayer",null]),this.Bi.set(9,["externalModelLayer",null]),this.fi=new ii};Object.assign(r.prototype,{Gi:function(t){if(!t)return null;var i=t.scene;return this.Zi(i,t)},Zi:function(n,r){var e=this,t=n.layerGroups,i=Zi(n,["layerGroups"]),s=new Fi(i);return t.forEach(function(t){var i=e.Wi(t,r,n.fileVer);s.Ri.set(t.gid,i)}),s},Wi:function(t,i,n){var r=this,e=t.layers,s=Zi(t,["layers"]),o=new Fi(s),u=i&&i.floors?i.floors.get(t.gid).geo[0]:null,h=i&&i.floors?i.floors.get(t.gid).biz[0]:null;return e.forEach(function(t){6==t.ltype&&-1!=t.lname.indexOf("storelabel")&&(t.ltype=7);var i=r.Vi(t,u,h,n);null!=i&&o.Ri.set(r.Ui.get(t.ltype),i)}),this.qi(o),o},qi:function(t){var i=Array.from(t.Ri);i.sort(function(t,i){return t[0]-i[0]}),t.Ri=new Map(i)},Vi:function(t,i,n,r){if(-1!=this.Di.indexOf(t.ltype))return null;if(!this.Bi.get(t.ltype))return null;var e=new Fi(t);return this.Yi(e,i,n,r),e&&(e.Yt=this.Ui.get(t.ltype)),e},Yi:function(t,i,n,r){if(t){var e=this.Bi.get(t.ltype);if(e){var s=i?i[e[0]]:[],o=n?n[e[0]]:[];switch(t.ltype){case 6:this.Xi(t,s,o,r,B.FACILITY);break;case 7:this.Xi(t,s,o,r,B.LABEL);break;case 9:this.Xi(t,s,o,r,B.EXTERNALMODEL);break;case 31:this.zi(t,s,o,r,B.EXTENT,null);break;case 32:this.zi(t,s,o,r,B.MODEL,i?i[e[1]]:null)}}}},Xi:function(t,i,n,r,e){for(var s=0;s<i.length;s++){var o=this.Hi(i[s],n[s],r);o.Yt=e,t.Ri.set(i[s].eid,o)}},Hi:function(t,i,n){i=Object.assign({},i,{area:t.area,eid:t.eid,height:t.height}),i=new Ui(i);return t.coordinates?i.Si=t.coordinates:(i.Si=1==n?Ii.Mi(t.geo):Ai.Mi(t.idxs,t.pts),t.coordinates=i.Si),i},zi:function(t,i,n,r,e,s){for(var o=0;o<i.length;o++){var u=this.Qi(i[o],n[o],r,s?s[o]:null);u.Yt=e,t.Ri.set(i[o].eid,u)}},Qi:function(t,i,n,r){i=Object.assign({},i,{area:t.area,eid:t.eid,height:t.height}),i=new Gi(i);return i.Si=1===n?Ii.Ei(t.geo):Ai.Ei(t.idxs,t.pts),r&&(r.coordinates||(r.coordinates=1==n?Ii.Mi(r.geo):Ai.Mi(r.idxs,r.pts)),i.Dt=r.coordinates[0]),i}});var Wi=r;function Vi(t,i){for(var n=0;n<i.length;n++){var r=i[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}o=function(){function t(){!function(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}(this,t),this.$i=new Map,this.Ji=new Map,this.Ht=new Map,this.Ki=new Map,this.tn=new Map,this.in=new Map,this.nn=[2,3],this.rn=!1,this.fi=new ii,this.sn=new Wi,this.un=new Ri}var i,n,r;return i=t,(n=[{key:"load",value:function(t,i){this.hn(t,i)}},{key:"loadWhole",value:function(t,i){this.an(t,i)}},{key:"getDecode",value:function(t){t=void 0!==t.buildingID?t.buildingID:t.mapID;return this.cn({buildingID:t})}},{key:"getData",value:function(t){t=void 0!==t.buildingID?t.buildingID:t.mapID;return this.$i.get(t)}},{key:"setCache",value:function(t){this.$i=t[0],this.Ji=t[1]}},{key:"getCache",value:function(){return[this.$i,this.Ji]}}])&&Vi(i.prototype,n),r&&Vi(i,r),t}();Object.assign(o.prototype,{pi:function(){this.$i.clear(),this.$i=null,this.Ji.clear(),this.Ji=null,this.Ht.clear(),this.Ht=null,this.Ki.clear(),this.Ki=null,this.tn.clear(),this.tn=null,this.in.clear(),this.in=null},ln:function(t){this.Ki.set(t.buildingID,null),this.tn.set(t.buildingID,null),this.in.set(t.buildingID+t.uuid,0)},hn:function(u,h){var a=this;this.ln(u),this._i(u,function(t,i){h&&h(t,i);var n=a.vn(u),r=void 0!==u.level?u.level:parseInt(n.defGid);a.dn(u,r,h);for(var e=u.visibleLevels||n.levels,s=0;s<e.length;s++)e[s]!==r&&a.dn(u,e[s],h);if(u.preLoad)for(var o=0;o<n.levels.length;o++)n.levels[o]!==r&&-1===e.indexOf(n.levels[o])&&a.dn(u,n.levels[o],h)},function(t,i){h&&h(t,i)})},_i:function(i,n,r){var e=this,t=this.vn(i);t?(n&&n("scene",t),i.justDecode||(t=this.$i.get(i.buildingID),n&&n("building",t))):this.un._i(i,function(t){e.Ji.set(i.buildingID,{scene:t}),n&&n("scene",t),i.justDecode||(t=e.sn.Zi(t),e.$i.set(i.buildingID,t),n&&n("building",t))},function(t){r&&r("error",t===Zt.PATH_ERROR?Zt.MAP_ID_URL_ERROR:t)})},dn:function(t,i,n,r){var e=this.Ki.get(t.buildingID);e||this.Ki.set(t.buildingID,e=[]),r?e.unshift(i):e.push(i),this.rn&&1!==e.length||this.yn(t,n)},yn:function(r,e){var s=this,o=this.vn(r);if(o){var u=this.Ki.get(r.buildingID),t=this.tn.get(r.buildingID);if(u&&0!==u.length){t||this.tn.set(r.buildingID,t=[]);var h=u[0];if(-1!==t.indexOf(h))return u.splice(u.indexOf(h),1),void this.yn(r,e);t.push(h),this.bn(r,h,function(t,i){var n=s.in.get(r.buildingID+r.uuid);"layerGroup"===t&&(e&&e(t,i),s.in.set(r.buildingID+r.uuid,++n),n===o.layerGroups.length&&e&&e("decode",s.cn(r)),u.splice(u.indexOf(h),1),s.yn(r,e)),"layer"===t&&e&&e(t,i),"floor"===t&&(e&&e(t,i),n===o.layerGroups.length&&e&&e("complete",s.pn(r)))},function(t,i){e&&e(t,i)})}}},bn:function(e,s,o,i){function n(i){var n,r,t;h===++a&&(n=f.get("geo"),r=f.get("biz"),c&&c.merge(s,n,r,u.fileVer),o&&o("layerGroup",f),e.justDecode||((t=i.mn(e,s)).Ri.forEach(function(t){i.sn.Yi(t,n,r,u.fileVer),o&&o("layer",t)}),o&&o("floor",t)))}var r=this,u=this.vn(e),t=this.wn(u,s).gname,h=e.loadNavi?this.nn[1]:this.nn[0],a=0,f=new Map,c=e.merge;this.gi(e,s,t,function(t,i){f.set(t,i),o&&o(t,i),n(r)},function(t){i&&i(t)}),this.xi(e,s,t,function(t,i){f.set(t,i),o&&o(t,i),n(r)},function(t){i&&i(t)}),e.loadNavi&&this.Oi(e,s,t,function(t,i){f.set(t,i),o&&o(t,i),n(r)},function(t){i&&i(t)})},gi:function(i,n,t,r,e){var s=this,o=this._n(i,n,"geo");o?r&&r("geo",o):this.un.gi(i,t,function(t){s.gn(i,n,"geo",t),r&&r("geo",t)},function(t){e&&e("error",t)})},xi:function(i,n,t,r,e){var s=this,o=this._n(i,n,"biz");o?r&&r("biz",o):this.un.xi(i,t,function(t){s.gn(i,n,"biz",t),r&&r("biz",t)},function(t){e&&e("error",t)})},Oi:function(i,n,t,r,e){var s=this,o=this._n(i,n,"navi");o?r&&r("navi",o):this.un.Oi(i,t,function(t){s.gn(i,n,"navi",t),r&&r("navi",t)},function(t){e&&e("error",t)})},an:function(t,n){this.wi(t,function(t,i){n&&n(t,i)},function(t,i){n&&n(t,i)})},wi:function(i,n,r){var e=this,s=this.cn(i);s?n&&n("decode",s):this.un.wi(i,function(t){e.xn(i,t),s=e.cn(i),n&&n("decode",s),i.justDecode||(t=e.sn.Gi(s),e.$i.set(i.buildingID,t),n&&n("complete",t))},function(t){r&&r("error",t)})},pn:function(t){if(this.$i){t=this.$i.get(t.buildingID);return t||null}},mn:function(t,i){t=this.$i.get(t.buildingID);return t?t.Ri.get(i):null},xn:function(t,i){var n={scene:null,floors:new Map},r=this.fi.ii(i);n.scene=r;for(var e=0;e<r.layerGroups.length;e++){var s=r.layerGroups[e],o=this.fi.ri(i,s.gid),u=this.fi.si(i,s.gid),h=this.fi.ui(i,s.gid);t.merge&&t.merge.merge(s.gid,o,u,r.fileVer);var a=new Map;a.set("geo",o),a.set("biz",u),a.set("navi",h),n.floors.set(s.gid,a)}this.Ji.set(t.buildingID,n)},cn:function(t){var i=this.Ji.get(t.buildingID);if(!i)return null;for(var n=i.scene,r=new Map,i={scene:n,floors:r},e=0;e<n.layerGroups.length;e++){var s=n.layerGroups[e],o=s.gid,u={gid:o,gname:s.gname,level:o,geo:[],biz:[],navi:[]};u.geo.push(this._n(t,o,"geo")),u.biz.push(this._n(t,o,"biz")),u.navi.push(this._n(t,o,"navi")),r.set(s.gid,u)}return i},vn:function(t){t=this.Ji.get(t.buildingID);return t?t.scene:null},gn:function(t,i,n,r){var e=this.Ji.get(t.buildingID);e&&((t=e.floors)||(t=new Map,e.floors=t),(e=t.get(i))||(e=new Map,t.set(i,e)),e.set(n,r))},_n:function(t,i,n){t=this.Ji.get(t.buildingID);if(!t)return null;t=t.floors;if(!t)return null;i=t.get(i);return i?i.get(n):null},wn:function(t,i){if(null==t)return null;for(var n=t.layerGroups,r=0;r<n.length;r++)if(n[r].gid==i)return n[r];return null}});for(var qi=o,Yi=[],Xi=0;Xi<256;Xi++)Yi[Xi]=(Xi<16?"0":"")+Xi.toString(16);var zi={DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,generateUUID:function(){var t=4294967295*Math.random()|0,i=4294967295*Math.random()|0,n=4294967295*Math.random()|0,r=4294967295*Math.random()|0;return(Yi[255&t]+Yi[t>>8&255]+Yi[t>>16&255]+Yi[t>>24&255]+"-"+Yi[255&i]+Yi[i>>8&255]+"-"+Yi[i>>16&15|64]+Yi[i>>24&255]+"-"+Yi[63&n|128]+Yi[n>>8&255]+"-"+Yi[n>>16&255]+Yi[n>>24&255]+Yi[255&r]+Yi[r>>8&255]+Yi[r>>16&255]+Yi[r>>24&255]).toUpperCase()},clamp:function(t,i,n){return Math.max(i,Math.min(n,t))},euclideanModulo:function(t,i){return(t%i+i)%i},mapLinear:function(t,i,n,r,e){return r+(t-i)*(e-r)/(n-i)},lerp:function(t,i,n){return(1-n)*t+n*i},smoothstep:function(t,i,n){return t<=i?0:n<=t?1:(t=(t-i)/(n-i))*t*(3-2*t)},smootherstep:function(t,i,n){return t<=i?0:n<=t?1:(t=(t-i)/(n-i))*t*t*(t*(6*t-15)+10)},randInt:function(t,i){return t+Math.floor(Math.random()*(i-t+1))},randFloat:function(t,i){return t+Math.random()*(i-t)},randFloatSpread:function(t){return t*(.5-Math.random())},degToRad:function(t){return t*zi.DEG2RAD},radToDeg:function(t){return t*zi.RAD2DEG},isPowerOfTwo:function(t){return 0==(t&t-1)&&0!==t},ceilPowerOfTwo:function(t){return Math.pow(2,Math.ceil(Math.log(t)/Math.LN2))},floorPowerOfTwo:function(t){return Math.pow(2,Math.floor(Math.log(t)/Math.LN2))},setQuaternionFromProperEuler:function(t,i,n,r,e){var s=Math.cos,o=Math.sin,u=s(n/2),h=o(n/2),a=s((i+r)/2),f=o((i+r)/2),c=s((i-r)/2),n=o((i-r)/2),s=s((r-i)/2),i=o((r-i)/2);"XYX"===e?t.set(u*f,h*c,h*n,u*a):"YZY"===e?t.set(h*n,u*f,h*c,u*a):"ZXZ"===e?t.set(h*c,h*n,u*f,u*a):"XZX"===e?t.set(u*f,h*i,h*s,u*a):"YXY"===e?t.set(h*s,u*f,h*i,u*a):"ZYZ"===e?t.set(h*i,h*s,u*f,u*a):console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order.")}},Hi={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Qi={h:0,s:0,l:0},$i={h:0,s:0,l:0};function Ji(t,i,n){return void 0===i&&void 0===n?this.set(t):this.setRGB(t,i,n)}function Ki(t,i,n){return n<0&&(n+=1),1<n&&--n,n<1/6?t+6*(i-t)*n:n<.5?i:n<2/3?t+6*(i-t)*(2/3-n):t}function tn(t){return t<.04045?.0773993808*t:Math.pow(.9478672986*t+.0521327014,2.4)}function nn(t){return t<.0031308?12.92*t:1.055*Math.pow(t,.41666)-.055}function rn(t,i){for(var n=0;n<i.length;n++){var r=i[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}Object.assign(Ji.prototype,{isColor:!0,r:1,g:1,b:1,set:function(t){return t&&t.isColor?this.copy(t):"number"==typeof t?this.setHex(t):"string"==typeof t&&this.setStyle(t),this},setScalar:function(t){return this.r=t,this.g=t,this.b=t,this},setHex:function(t){return t=Math.floor(t),this.r=(t>>16&255)/255,this.g=(t>>8&255)/255,this.b=(255&t)/255,this},setRGB:function(t,i,n){return this.r=t,this.g=i,this.b=n,this},setHSL:function(t,i,n){return t=zi.euclideanModulo(t,1),i=zi.clamp(i,0,1),n=zi.clamp(n,0,1),0===i?this.r=this.g=this.b=n:(this.r=Ki(i=2*n-(n=n<=.5?n*(1+i):n+i-n*i),n,t+1/3),this.g=Ki(i,n,t),this.b=Ki(i,n,t-1/3)),this},setStyle:function(i){function t(t){void 0!==t&&parseFloat(t)<1&&console.warn("THREE.Color: Alpha component of "+i+" will be ignored.")}if(h=/^((?:rgb|hsl)a?)\(\s*([^\)]*)\)/.exec(i)){var n,r=h[1],e=h[2];switch(r){case"rgb":case"rgba":if(n=/^(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(e))return this.r=Math.min(255,parseInt(n[1],10))/255,this.g=Math.min(255,parseInt(n[2],10))/255,this.b=Math.min(255,parseInt(n[3],10))/255,t(n[5]),this;if(n=/^(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(e))return this.r=Math.min(100,parseInt(n[1],10))/100,this.g=Math.min(100,parseInt(n[2],10))/100,this.b=Math.min(100,parseInt(n[3],10))/100,t(n[5]),this;break;case"hsl":case"hsla":if(n=/^([0-9]*\.?[0-9]+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(e)){var s=parseFloat(n[1])/360,o=parseInt(n[2],10)/100,u=parseInt(n[3],10)/100;return t(n[5]),this.setHSL(s,o,u)}}}else if(h=/^\#([A-Fa-f0-9]+)$/.exec(i)){var r=h[1],h=r.length;if(3===h)return this.r=parseInt(r.charAt(0)+r.charAt(0),16)/255,this.g=parseInt(r.charAt(1)+r.charAt(1),16)/255,this.b=parseInt(r.charAt(2)+r.charAt(2),16)/255,this;if(6===h)return this.r=parseInt(r.charAt(0)+r.charAt(1),16)/255,this.g=parseInt(r.charAt(2)+r.charAt(3),16)/255,this.b=parseInt(r.charAt(4)+r.charAt(5),16)/255,this}return i&&0<i.length?this.setColorName(i):this},setColorName:function(t){var i=Hi[t];return void 0!==i?this.setHex(i):console.warn("THREE.Color: Unknown color "+t),this},clone:function(){return new this.constructor(this.r,this.g,this.b)},copy:function(t){return this.r=t.r,this.g=t.g,this.b=t.b,this},copyGammaToLinear:function(t,i){return void 0===i&&(i=2),this.r=Math.pow(t.r,i),this.g=Math.pow(t.g,i),this.b=Math.pow(t.b,i),this},copyLinearToGamma:function(t,i){i=0<(i=void 0===i?2:i)?1/i:1;return this.r=Math.pow(t.r,i),this.g=Math.pow(t.g,i),this.b=Math.pow(t.b,i),this},convertGammaToLinear:function(t){return this.copyGammaToLinear(this,t),this},convertLinearToGamma:function(t){return this.copyLinearToGamma(this,t),this},copySRGBToLinear:function(t){return this.r=tn(t.r),this.g=tn(t.g),this.b=tn(t.b),this},copyLinearToSRGB:function(t){return this.r=nn(t.r),this.g=nn(t.g),this.b=nn(t.b),this},convertSRGBToLinear:function(){return this.copySRGBToLinear(this),this},convertLinearToSRGB:function(){return this.copyLinearToSRGB(this),this},getHex:function(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0},getHexString:function(){return("000000"+this.getHex().toString(16)).slice(-6)},getHSL:function(t){void 0===t&&(console.warn("THREE.Color: .getHSL() target is now required"),t={h:0,s:0,l:0});var i,n=this.r,r=this.g,e=this.b,s=Math.max(n,r,e),o=Math.min(n,r,e),u=(o+s)/2;if(o===s)a=i=0;else{var h=s-o,a=u<=.5?h/(s+o):h/(2-s-o);switch(s){case n:i=(r-e)/h+(r<e?6:0);break;case r:i=(e-n)/h+2;break;case e:i=(n-r)/h+4}i/=6}return t.h=i,t.s=a,t.l=u,t},getStyle:function(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"},offsetHSL:function(t,i,n){return this.getHSL(Qi),Qi.h+=t,Qi.s+=i,Qi.l+=n,this.setHSL(Qi.h,Qi.s,Qi.l),this},add:function(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this},addColors:function(t,i){return this.r=t.r+i.r,this.g=t.g+i.g,this.b=t.b+i.b,this},addScalar:function(t){return this.r+=t,this.g+=t,this.b+=t,this},sub:function(t){return this.r=Math.max(0,this.r-t.r),this.g=Math.max(0,this.g-t.g),this.b=Math.max(0,this.b-t.b),this},multiply:function(t){return this.r*=t.r,this.g*=t.g,this.b*=t.b,this},multiplyScalar:function(t){return this.r*=t,this.g*=t,this.b*=t,this},lerp:function(t,i){return this.r+=(t.r-this.r)*i,this.g+=(t.g-this.g)*i,this.b+=(t.b-this.b)*i,this},lerpHSL:function(t,i){this.getHSL(Qi),t.getHSL($i);var n=zi.lerp(Qi.h,$i.h,i),t=zi.lerp(Qi.s,$i.s,i),i=zi.lerp(Qi.l,$i.l,i);return this.setHSL(n,t,i),this},equals:function(t){return t.r===this.r&&t.g===this.g&&t.b===this.b},fromArray:function(t,i){return this.r=t[i=void 0===i?0:i],this.g=t[i+1],this.b=t[i+2],this},toArray:function(t,i){return(t=void 0===t?[]:t)[i=void 0===i?0:i]=this.r,t[i+1]=this.g,t[i+2]=this.b,t}}),Ji.NAMES=Hi;var en=function(){function t(){!function(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}(this,t)}var i,n,r;return i=t,r=[{key:"round",value:function(t){return 0<t.toFixed(2)?Math.ceil(t.toFixed(2)):Math.floor(t.toFixed(2))}},{key:"generateUUID",value:function(){for(var t=[],i=0;i<256;i++)t[i]=(i<16?"0":"")+i.toString(16);var n=4294967295*Math.random()|0,r=4294967295*Math.random()|0,e=4294967295*Math.random()|0,s=4294967295*Math.random()|0,s=t[255&n]+t[n>>8&255]+t[n>>16&255]+t[n>>24&255]+"-"+t[255&r]+t[r>>8&255]+"-"+t[r>>16&15|64]+t[r>>24&255]+"-"+t[63&e|128]+t[e>>8&255]+"-"+t[e>>16&255]+t[e>>24&255]+t[255&s]+t[s>>8&255]+t[s>>16&255]+t[s>>24&255];return t.length=0,s.toUpperCase()}},{key:"findNearNthPowerOfTwo",value:function(t){t-=1;return t|=t>>1,t|=t>>2,t|=t>>4,t|=t>>8,(t|=t>>16)<0?1:1+t}},{key:"toRgba",value:function(t){if(void 0===t)return t;if("number"==typeof t)return"rgba("+parseInt(255*new Ji(t).r)+","+parseInt(255*new Ji(t).g)+","+parseInt(255*new Ji(t).b)+",1)";var i=t.split(",");return 3<=i.length?"rgba("+parseInt(i[0])+","+parseInt(i[1])+","+parseInt(i[2])+",1)":t}},{key:"toColor",value:function(t){if("number"==typeof t)return t;var i=t.split(",");return 3<=i.length?parseInt(i[0])<<16|parseInt(i[1])<<8|parseInt(i[2]):(console.error("color format error",t),0)}}],(n=null)&&rn(i.prototype,n),r&&rn(i,r),t}();function sn(t,i){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,i){if(t){if("string"==typeof t)return on(t,i);var n=Object.prototype.toString.call(t).slice(8,-1);return"Map"===(n="Object"===n&&t.constructor?t.constructor.name:n)||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?on(t,i):void 0}}(t))||i&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var e,s=!0,o=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return s=t.done,t},e:function(t){o=!0,e=t},f:function(){try{s||null==n.return||n.return()}finally{if(o)throw e}}}}function on(t,i){(null==i||i>t.length)&&(i=t.length);for(var n=0,r=new Array(i);n<i;n++)r[n]=t[n];return r}function un(t,i){for(var n=0;n<i.length;n++){var r=i[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}g=function(){function r(t,i,n){!function(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}(this,r),this.Ht=Object.assign({tile:!0,isPreview:!1},t),this.On=!!t.map,this.Mn=t.map?t.map.getDataManager():new qi,this.jn=i,this.En=n,this.kn()}var t,i,n;return t=r,(i=[{key:"dispose",value:function(){this.Ht=null,this.On||this.Mn.pi(),this.Mn=null,this.jn=null,this.En=null}},{key:"query",value:function(t,i,n){var r=this.Mn.getData(this.Ht);r||n&&n();var e=this.Tn(t),s=this.Rn(t);s===B.NONE&&n&&n();var o,u=t.zt,h=u.length,a=[],f=sn(r.getChildren());try{for(f.s();!(o=f.n()).done;){var c=o.value,l=c[0];if(-1!==e.indexOf(l)){var v,d=sn(c[1].getChildren());try{for(d.s();!(v=d.n()).done;){var y=v.value[1];if(0!=(y.getType()&s)){var b,p=sn(y.getChildren());try{for(p.s();!(b=p.n()).done;){var m=b.value[1],w={vt:void 0};this.An(u,h,m,w)&&a.push(this.Sn(l,m,w))}}catch(t){p.e(t)}finally{p.f()}}}}catch(t){d.e(t)}finally{d.f()}}}}catch(t){f.e(t)}finally{f.f()}this.In(a),i&&i(a)}}])&&un(t.prototype,i),n&&un(t,n),r}();Object.assign(g.prototype,{kn:function(){var t,n=this;this.On&&(t=this.Ht.map.getMapOptions(),this.Ht.mapID=t.mapID,this.Ht.appName=t.appName,this.Ht.key=t.key,this.Ht.license=t.license,this.Ht.mapURL=t.mapURL,this.Ht.mapURLAbsolute=t.mapURLAbsolute,this.Ht.isPreview="undefined"!=typeof KjWzhWlSj&&!!KjWzhWlSj.ProtoDef);var i={buildingID:this.Ht.mapID,appName:this.Ht.appName,key:this.Ht.key,license:this.Ht.license,mapURL:this.Ht.mapURL,mapURLAbsolute:this.Ht.mapURLAbsolute,merge:this.Ht.merge,preLoad:!0,isPreview:"undefined"!=typeof KjWzhWlSj&&!!KjWzhWlSj.ProtoDef,uuid:en.generateUUID()};setTimeout(function(){n.Ht.tile?n.Mn.load(i,function(t,i){n.Nn(t,i)}):n.Mn.loadWhole(i,function(t,i){n.Nn(t,i)})},0)},Nn:function(t,i){"error"==t&&this.En&&this.En(i),"complete"==t&&this.jn&&this.jn()},Rn:function(t){var i=B.NONE;return 0!=(t.Yt&B.MODEL)&&(i|=B.MODELGROUP),0!=(t.Yt&B.LABEL)&&(i|=B.LABELGROUP),0!=(t.Yt&B.FACILITY)&&(i|=B.FACILITYGROUP),0!=(t.Yt&B.EXTERNALMODEL)&&(i|=B.EXTERNALMODELGROUP),i},Tn:function(t){if(Array.isArray(t.qt))return t.qt;t=this.Mn.getData(this.Ht);if(!t)return[];var i,n=[],r=sn(t.getChildren());try{for(r.s();!(i=r.n()).done;){var e=i.value;n.push(e[1].gid)}}catch(t){r.e(t)}finally{r.f()}return n},An:function(t,i,n,r){if(0==i)return!0;for(var e=0;e<i;e++){if(!t[e].X(n))return!1;t[e].H(n,r)}return!0},Sn:function(t,i,n){return{level:t,type:i.getType(),FID:i.fid,name:i.name,ename:i.ename,eid:i.eid,typeID:i.type,center:void 0!==i.getCenter?Object.assign({z:i.height},i.getCenter()):Object.assign({z:i.height},i.getCoordinates()[0]),distance:n.vt}},In:function(t){t.sort(function(t,i){return t.level==i.level&&t.type==i.type&&t.distance&&i.distance?t.distance-i.distance:0})}});r=g;function hn(t,i){for(var n=0;n<i.length;n++){var r=i[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}o=function(){function e(t,i,n,r){!function(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}(this,e),this.Ln=t,this.Pn=i,this.Dn=n||[],this.Fn=r||[]}var t,i,n;return t=e,(i=[{key:"level",get:function(){return this.Ln}},{key:"length",get:function(){return this.Pn}},{key:"pointList",get:function(){for(var t=[],i=0,n=this.Dn.length;i<n;i++)t.push({x:this.Dn[i].x,y:this.Dn[i].y,level:this.Ln});return t}}])&&hn(t.prototype,i),n&&hn(t,n),e}();Object.assign(o.prototype,{pi:function(){this.Dn=[],this.Fn=[]}});for(var an=o,fn=[],cn=0;cn<256;cn++)fn[cn]=(cn<16?"0":"")+cn.toString(16);var ln=1234567,vn={DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,generateUUID:function(){var t=4294967295*Math.random()|0,i=4294967295*Math.random()|0,n=4294967295*Math.random()|0,r=4294967295*Math.random()|0;return(fn[255&t]+fn[t>>8&255]+fn[t>>16&255]+fn[t>>24&255]+"-"+fn[255&i]+fn[i>>8&255]+"-"+fn[i>>16&15|64]+fn[i>>24&255]+"-"+fn[63&n|128]+fn[n>>8&255]+"-"+fn[n>>16&255]+fn[n>>24&255]+fn[255&r]+fn[r>>8&255]+fn[r>>16&255]+fn[r>>24&255]).toUpperCase()},clamp:function(t,i,n){return Math.max(i,Math.min(n,t))},euclideanModulo:function(t,i){return(t%i+i)%i},mapLinear:function(t,i,n,r,e){return r+(t-i)*(e-r)/(n-i)},lerp:function(t,i,n){return(1-n)*t+n*i},smoothstep:function(t,i,n){return t<=i?0:n<=t?1:(t=(t-i)/(n-i))*t*(3-2*t)},smootherstep:function(t,i,n){return t<=i?0:n<=t?1:(t=(t-i)/(n-i))*t*t*(t*(6*t-15)+10)},randInt:function(t,i){return t+Math.floor(Math.random()*(i-t+1))},randFloat:function(t,i){return t+Math.random()*(i-t)},randFloatSpread:function(t){return t*(.5-Math.random())},seededRandom:function(t){return((ln=16807*(ln=void 0!==t?t%2147483647:ln)%2147483647)-1)/2147483646},degToRad:function(t){return t*vn.DEG2RAD},radToDeg:function(t){return t*vn.RAD2DEG},isPowerOfTwo:function(t){return 0==(t&t-1)&&0!==t},ceilPowerOfTwo:function(t){return Math.pow(2,Math.ceil(Math.log(t)/Math.LN2))},floorPowerOfTwo:function(t){return Math.pow(2,Math.floor(Math.log(t)/Math.LN2))},setQuaternionFromProperEuler:function(t,i,n,r,e){var s=Math.cos,o=Math.sin,u=s(n/2),h=o(n/2),a=s((i+r)/2),f=o((i+r)/2),c=s((i-r)/2),l=o((i-r)/2),v=s((r-i)/2),d=o((r-i)/2);switch(e){case"XYX":t.set(u*f,h*c,h*l,u*a);break;case"YZY":t.set(h*l,u*f,h*c,u*a);break;case"ZXZ":t.set(h*c,h*l,u*f,u*a);break;case"XZX":t.set(u*f,h*d,h*v,u*a);break;case"YXY":t.set(h*v,u*f,h*d,u*a);break;case"ZYZ":t.set(h*d,h*v,u*f,u*a);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+e)}}};function dn(t,i){for(var n=0;n<i.length;n++){var r=i[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}g=function(){function e(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:1;!function(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}(this,e),Object.defineProperty(this,"isQuaternion",{value:!0}),this.Cn=t,this.Un=i,this.Bn=n,this.Gn=r}var t,i,n;return t=e,n=[{key:"slerp",value:function(t,i,n,r){return n.copy(t).slerp(i,r)}},{key:"slerpFlat",value:function(t,i,n,r,e,s,o){var u=n[r+0],h=n[r+1],a=n[r+2],f=n[r+3],c=e[s+0],l=e[s+1],v=e[s+2],d=e[s+3];f===d&&u===c&&h===l&&a===v||(n=1-o,e=0<=(r=u*c+h*l+a*v+f*d)?1:-1,(s=1-r*r)>Number.EPSILON&&(s=Math.sqrt(s),r=Math.atan2(s,r*e),n=Math.sin(n*r)/s,o=Math.sin(o*r)/s),u=u*n+c*(e=o*e),h=h*n+l*e,a=a*n+v*e,f=f*n+d*e,n===1-o&&(u*=o=1/Math.sqrt(u*u+h*h+a*a+f*f),h*=o,a*=o,f*=o)),t[i]=u,t[i+1]=h,t[i+2]=a,t[i+3]=f}},{key:"multiplyQuaternionsFlat",value:function(t,i,n,r,e,s){var o=n[r],u=n[r+1],h=n[r+2],a=n[r+3],f=e[s],n=e[s+1],r=e[s+2],s=e[s+3];return t[i]=o*s+a*f+u*r-h*n,t[i+1]=u*s+a*n+h*f-o*r,t[i+2]=h*s+a*r+o*n-u*f,t[i+3]=a*s-o*f-u*n-h*r,t}}],(i=[{key:"x",get:function(){return this.Cn},set:function(t){this.Cn=t,this.Zn()}},{key:"y",get:function(){return this.Un},set:function(t){this.Un=t,this.Zn()}},{key:"z",get:function(){return this.Bn},set:function(t){this.Bn=t,this.Zn()}},{key:"w",get:function(){return this.Gn},set:function(t){this.Gn=t,this.Zn()}},{key:"set",value:function(t,i,n,r){return this.Cn=t,this.Un=i,this.Bn=n,this.Gn=r,this.Zn(),this}},{key:"clone",value:function(){return new this.constructor(this.Cn,this.Un,this.Bn,this.Gn)}},{key:"copy",value:function(t){return this.Cn=t.x,this.Un=t.y,this.Bn=t.z,this.Gn=t.w,this.Zn(),this}},{key:"setFromEuler",value:function(t,i){if(!t||!t.isEuler)throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");var n=t.Cn,r=t.Un,e=t.Bn,s=t.Wn,o=Math.cos,t=Math.sin,u=o(n/2),h=o(r/2),a=o(e/2),f=t(n/2),c=t(r/2),l=t(e/2);switch(s){case"XYZ":this.Cn=f*h*a+u*c*l,this.Un=u*c*a-f*h*l,this.Bn=u*h*l+f*c*a,this.Gn=u*h*a-f*c*l;break;case"YXZ":this.Cn=f*h*a+u*c*l,this.Un=u*c*a-f*h*l,this.Bn=u*h*l-f*c*a,this.Gn=u*h*a+f*c*l;break;case"ZXY":this.Cn=f*h*a-u*c*l,this.Un=u*c*a+f*h*l,this.Bn=u*h*l+f*c*a,this.Gn=u*h*a-f*c*l;break;case"ZYX":this.Cn=f*h*a-u*c*l,this.Un=u*c*a+f*h*l,this.Bn=u*h*l-f*c*a,this.Gn=u*h*a+f*c*l;break;case"YZX":this.Cn=f*h*a+u*c*l,this.Un=u*c*a+f*h*l,this.Bn=u*h*l-f*c*a,this.Gn=u*h*a-f*c*l;break;case"XZY":this.Cn=f*h*a-u*c*l,this.Un=u*c*a-f*h*l,this.Bn=u*h*l+f*c*a,this.Gn=u*h*a+f*c*l;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+s)}return!1!==i&&this.Zn(),this}},{key:"setFromAxisAngle",value:function(t,i){var n=i/2,i=Math.sin(n);return this.Cn=t.x*i,this.Un=t.y*i,this.Bn=t.z*i,this.Gn=Math.cos(n),this.Zn(),this}},{key:"setFromRotationMatrix",value:function(t){var i,n=t.elements,r=n[0],e=n[4],s=n[8],o=n[1],u=n[5],h=n[9],a=n[2],f=n[6],t=n[10],n=r+u+t;return 0<n?(n=.5/Math.sqrt(n+1),this.Gn=.25/n,this.Cn=(f-h)*n,this.Un=(s-a)*n,this.Bn=(o-e)*n):u<r&&t<r?(i=2*Math.sqrt(1+r-u-t),this.Gn=(f-h)/i,this.Cn=.25*i,this.Un=(e+o)/i,this.Bn=(s+a)/i):t<u?(i=2*Math.sqrt(1+u-r-t),this.Gn=(s-a)/i,this.Cn=(e+o)/i,this.Un=.25*i,this.Bn=(h+f)/i):(u=2*Math.sqrt(1+t-r-u),this.Gn=(o-e)/u,this.Cn=(s+a)/u,this.Un=(h+f)/u,this.Bn=.25*u),this.Zn(),this}},{key:"setFromUnitVectors",value:function(t,i){var n=t.dot(i)+1;return n<1e-6?(n=0,Math.abs(t.x)>Math.abs(t.z)?(this.Cn=-t.y,this.Un=t.x,this.Bn=0):(this.Cn=0,this.Un=-t.z,this.Bn=t.y)):(this.Cn=t.y*i.z-t.z*i.y,this.Un=t.z*i.x-t.x*i.z,this.Bn=t.x*i.y-t.y*i.x),this.Gn=n,this.normalize()}},{key:"angleTo",value:function(t){return 2*Math.acos(Math.abs(vn.clamp(this.dot(t),-1,1)))}},{key:"rotateTowards",value:function(t,i){var n=this.angleTo(t);if(0===n)return this;n=Math.min(1,i/n);return this.slerp(t,n),this}},{key:"identity",value:function(){return this.set(0,0,0,1)}},{key:"invert",value:function(){return this.conjugate()}},{key:"conjugate",value:function(){return this.Cn*=-1,this.Un*=-1,this.Bn*=-1,this.Zn(),this}},{key:"dot",value:function(t){return this.Cn*t.Cn+this.Un*t.Un+this.Bn*t.Bn+this.Gn*t.Gn}},{key:"lengthSq",value:function(){return this.Cn*this.Cn+this.Un*this.Un+this.Bn*this.Bn+this.Gn*this.Gn}},{key:"length",value:function(){return Math.sqrt(this.Cn*this.Cn+this.Un*this.Un+this.Bn*this.Bn+this.Gn*this.Gn)}},{key:"normalize",value:function(){var t=this.length();return 0===t?(this.Cn=0,this.Un=0,this.Bn=0,this.Gn=1):(this.Cn=this.Cn*(t=1/t),this.Un=this.Un*t,this.Bn=this.Bn*t,this.Gn=this.Gn*t),this.Zn(),this}},{key:"multiply",value:function(t,i){return void 0!==i?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(t,i)):this.multiplyQuaternions(this,t)}},{key:"premultiply",value:function(t){return this.multiplyQuaternions(t,this)}},{key:"multiplyQuaternions",value:function(t,i){var n=t.Cn,r=t.Un,e=t.Bn,s=t.Gn,o=i.Cn,u=i.Un,t=i.Bn,i=i.Gn;return this.Cn=n*i+s*o+r*t-e*u,this.Un=r*i+s*u+e*o-n*t,this.Bn=e*i+s*t+n*u-r*o,this.Gn=s*i-n*o-r*u-e*t,this.Zn(),this}},{key:"slerp",value:function(t,i){if(0===i)return this;if(1===i)return this.copy(t);var n=this.Cn,r=this.Un,e=this.Bn,s=this.Gn,o=s*t.Gn+n*t.Cn+r*t.Un+e*t.Bn;if(o<0?(this.Gn=-t.Gn,this.Cn=-t.Cn,this.Un=-t.Un,this.Bn=-t.Bn,o=-o):this.copy(t),1<=o)return this.Gn=s,this.Cn=n,this.Un=r,this.Bn=e,this;t=1-o*o;if(t<=Number.EPSILON){var u=1-i;return this.Gn=u*s+i*this.Gn,this.Cn=u*n+i*this.Cn,this.Un=u*r+i*this.Un,this.Bn=u*e+i*this.Bn,this.normalize(),this.Zn(),this}u=Math.sqrt(t),t=Math.atan2(u,o),o=Math.sin((1-i)*t)/u,u=Math.sin(i*t)/u;return this.Gn=s*o+this.Gn*u,this.Cn=n*o+this.Cn*u,this.Un=r*o+this.Un*u,this.Bn=e*o+this.Bn*u,this.Zn(),this}},{key:"equals",value:function(t){return t.Cn===this.Cn&&t.Un===this.Un&&t.Bn===this.Bn&&t.Gn===this.Gn}},{key:"fromArray",value:function(t){var i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;return this.Cn=t[i],this.Un=t[i+1],this.Bn=t[i+2],this.Gn=t[i+3],this.Zn(),this}},{key:"toArray",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;return t[i]=this.Cn,t[i+1]=this.Un,t[i+2]=this.Bn,t[i+3]=this.Gn,t}},{key:"fromBufferAttribute",value:function(t,i){return this.Cn=t.getX(i),this.Un=t.getY(i),this.Bn=t.getZ(i),this.Gn=t.getW(i),this}}])&&dn(t.prototype,i),n&&dn(t,n),e}();function yn(t,i){for(var n=0;n<i.length;n++){var r=i[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}Object.assign(g.prototype,{Vn:function(t){return this.Zn=t,this},Zn:function(){}});var bn=function(){function r(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0;!function(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}(this,r),Object.defineProperty(this,"isVector3",{value:!0}),this.x=t,this.y=i,this.z=n}var t,i,n;return t=r,(i=[{key:"set",value:function(t,i,n){return void 0===n&&(n=this.z),this.x=t,this.y=i,this.z=n,this}},{key:"setScalar",value:function(t){return this.x=t,this.y=t,this.z=t,this}},{key:"setX",value:function(t){return this.x=t,this}},{key:"setY",value:function(t){return this.y=t,this}},{key:"setZ",value:function(t){return this.z=t,this}},{key:"setComponent",value:function(t,i){switch(t){case 0:this.x=i;break;case 1:this.y=i;break;case 2:this.z=i;break;default:throw new Error("index is out of range: "+t)}return this}},{key:"getComponent",value:function(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+t)}}},{key:"clone",value:function(){return new this.constructor(this.x,this.y,this.z)}},{key:"copy",value:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this}},{key:"add",value:function(t,i){return void 0!==i?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,i)):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this)}},{key:"addScalar",value:function(t){return this.x+=t,this.y+=t,this.z+=t,this}},{key:"addVectors",value:function(t,i){return this.x=t.x+i.x,this.y=t.y+i.y,this.z=t.z+i.z,this}},{key:"addScaledVector",value:function(t,i){return this.x+=t.x*i,this.y+=t.y*i,this.z+=t.z*i,this}},{key:"sub",value:function(t,i){return void 0!==i?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,i)):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this)}},{key:"subScalar",value:function(t){return this.x-=t,this.y-=t,this.z-=t,this}},{key:"subVectors",value:function(t,i){return this.x=t.x-i.x,this.y=t.y-i.y,this.z=t.z-i.z,this}},{key:"multiply",value:function(t,i){return void 0!==i?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(t,i)):(this.x*=t.x,this.y*=t.y,this.z*=t.z,this)}},{key:"multiplyScalar",value:function(t){return this.x*=t,this.y*=t,this.z*=t,this}},{key:"multiplyVectors",value:function(t,i){return this.x=t.x*i.x,this.y=t.y*i.y,this.z=t.z*i.z,this}},{key:"applyEuler",value:function(t){return t&&t.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(mn.setFromEuler(t))}},{key:"applyAxisAngle",value:function(t,i){return this.applyQuaternion(mn.setFromAxisAngle(t,i))}},{key:"applyMatrix3",value:function(t){var i=this.x,n=this.y,r=this.z,t=t.elements;return this.x=t[0]*i+t[3]*n+t[6]*r,this.y=t[1]*i+t[4]*n+t[7]*r,this.z=t[2]*i+t[5]*n+t[8]*r,this}},{key:"applyNormalMatrix",value:function(t){return this.applyMatrix3(t).normalize()}},{key:"applyMatrix4",value:function(t){var i=this.x,n=this.y,r=this.z,e=t.elements,t=1/(e[3]*i+e[7]*n+e[11]*r+e[15]);return this.x=(e[0]*i+e[4]*n+e[8]*r+e[12])*t,this.y=(e[1]*i+e[5]*n+e[9]*r+e[13])*t,this.z=(e[2]*i+e[6]*n+e[10]*r+e[14])*t,this}},{key:"applyQuaternion",value:function(t){var i=this.x,n=this.y,r=this.z,e=t.x,s=t.y,o=t.z,u=t.w,h=u*i+s*r-o*n,a=u*n+o*i-e*r,t=u*r+e*n-s*i,r=-e*i-s*n-o*r;return this.x=h*u+r*-e+a*-o-t*-s,this.y=a*u+r*-s+t*-e-h*-o,this.z=t*u+r*-o+h*-s-a*-e,this}},{key:"project",value:function(t){return this.applyMatrix4(t.matrixWorldInverse).applyMatrix4(t.projectionMatrix)}},{key:"unproject",value:function(t){return this.applyMatrix4(t.projectionMatrixInverse).applyMatrix4(t.matrixWorld)}},{key:"transformDirection",value:function(t){var i=this.x,n=this.y,r=this.z,t=t.elements;return this.x=t[0]*i+t[4]*n+t[8]*r,this.y=t[1]*i+t[5]*n+t[9]*r,this.z=t[2]*i+t[6]*n+t[10]*r,this.normalize()}},{key:"divide",value:function(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this}},{key:"divideScalar",value:function(t){return this.multiplyScalar(1/t)}},{key:"min",value:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this}},{key:"max",value:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this}},{key:"clamp",value:function(t,i){return this.x=Math.max(t.x,Math.min(i.x,this.x)),this.y=Math.max(t.y,Math.min(i.y,this.y)),this.z=Math.max(t.z,Math.min(i.z,this.z)),this}},{key:"clampScalar",value:function(t,i){return this.x=Math.max(t,Math.min(i,this.x)),this.y=Math.max(t,Math.min(i,this.y)),this.z=Math.max(t,Math.min(i,this.z)),this}},{key:"clampLength",value:function(t,i){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(i,n)))}},{key:"floor",value:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}},{key:"ceil",value:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}},{key:"round",value:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}},{key:"roundToZero",value:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}},{key:"negate",value:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}},{key:"dot",value:function(t){return this.x*t.x+this.y*t.y+this.z*t.z}},{key:"lengthSq",value:function(){return this.x*this.x+this.y*this.y+this.z*this.z}},{key:"length",value:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}},{key:"manhattanLength",value:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}},{key:"normalize",value:function(){return this.divideScalar(this.length()||1)}},{key:"setLength",value:function(t){return this.normalize().multiplyScalar(t)}},{key:"lerp",value:function(t,i){return this.x+=(t.x-this.x)*i,this.y+=(t.y-this.y)*i,this.z+=(t.z-this.z)*i,this}},{key:"lerpVectors",value:function(t,i,n){return this.x=t.x+(i.x-t.x)*n,this.y=t.y+(i.y-t.y)*n,this.z=t.z+(i.z-t.z)*n,this}},{key:"cross",value:function(t,i){return void 0!==i?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(t,i)):this.crossVectors(this,t)}},{key:"crossVectors",value:function(t,i){var n=t.x,r=t.y,e=t.z,s=i.x,t=i.y,i=i.z;return this.x=r*i-e*t,this.y=e*s-n*i,this.z=n*t-r*s,this}},{key:"projectOnVector",value:function(t){var i=t.lengthSq();if(0===i)return this.set(0,0,0);i=t.dot(this)/i;return this.copy(t).multiplyScalar(i)}},{key:"projectOnPlane",value:function(t){return pn.copy(this).projectOnVector(t),this.sub(pn)}},{key:"reflect",value:function(t){return this.sub(pn.copy(t).multiplyScalar(2*this.dot(t)))}},{key:"angleTo",value:function(t){var i=Math.sqrt(this.lengthSq()*t.lengthSq());if(0===i)return Math.PI/2;i=this.dot(t)/i;return Math.acos(vn.clamp(i,-1,1))}},{key:"distanceTo",value:function(t){return Math.sqrt(this.distanceToSquared(t))}},{key:"distanceToSquared",value:function(t){var i=this.x-t.x,n=this.y-t.y,t=this.z-t.z;return i*i+n*n+t*t}},{key:"manhattanDistanceTo",value:function(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)+Math.abs(this.z-t.z)}},{key:"setFromSpherical",value:function(t){return this.setFromSphericalCoords(t.radius,t.phi,t.theta)}},{key:"setFromSphericalCoords",value:function(t,i,n){var r=Math.sin(i)*t;return this.x=r*Math.sin(n),this.y=Math.cos(i)*t,this.z=r*Math.cos(n),this}},{key:"setFromCylindrical",value:function(t){return this.setFromCylindricalCoords(t.radius,t.theta,t.y)}},{key:"setFromCylindricalCoords",value:function(t,i,n){return this.x=t*Math.sin(i),this.y=n,this.z=t*Math.cos(i),this}},{key:"setFromMatrixPosition",value:function(t){t=t.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}},{key:"setFromMatrixScale",value:function(t){var i=this.setFromMatrixColumn(t,0).length(),n=this.setFromMatrixColumn(t,1).length(),t=this.setFromMatrixColumn(t,2).length();return this.x=i,this.y=n,this.z=t,this}},{key:"setFromMatrixColumn",value:function(t,i){return this.fromArray(t.elements,4*i)}},{key:"setFromMatrix3Column",value:function(t,i){return this.fromArray(t.elements,3*i)}},{key:"equals",value:function(t){return t.x===this.x&&t.y===this.y&&t.z===this.z}},{key:"fromArray",value:function(t){var i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;return this.x=t[i],this.y=t[i+1],this.z=t[i+2],this}},{key:"toArray",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;return t[i]=this.x,t[i+1]=this.y,t[i+2]=this.z,t}},{key:"fromBufferAttribute",value:function(t,i,n){return void 0!==n&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(i),this.y=t.getY(i),this.z=t.getZ(i),this}},{key:"random",value:function(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}}])&&yn(t.prototype,i),n&&yn(t,n),r}(),pn=new bn,mn=new g,wn={NaviNodeType_NULL:-1,NaviNodeType_COMMON:0,NaviNodeType_SIDE:1,NaviNodeType_FLOOR:2,NaviNodeType_EXTENT:3,NaviLiftType_NULL:0,NaviLiftType_Lift:1,NaviLiftType_Stair:2,NaviLiftType_Escalator:3,NaviLiftType_Accessible:4,NaviLiftEntry_BOTH:0,NaviLiftEntry_UP:1,NaviLiftEntry_DOWN:2,NaviLiftEntry_FORBID:3,NaviEntranceType_NULL:0,NaviEntranceType_EXIT:1,NaviEntranceType_ENTRANCE:2,NaviEntranceType_ACCESS:3,NaviRoadRank_MAIN:1,NaviRoadRank_MINOR:2,NaviRoadRank_NARROW:3,NaviRoadEntry_BOTH:0,NaviRoadEntry_FORWARD:1,NaviRoadEntry_BACK:2,NaviRoadEntry_FORBID:3,NaviRoadPass_NULL:-1,NaviRoadPass_NOT_THROUGH:0,NaviRoadPass_THROUGH:1,NaviZoneType_NULL:-1,NaviZoneType_PASS_UNRESTRAINT:0,NaviZoneType_PASS_THROUGH:1,NaviZoneType_PASS_NOT_THROUGH:2,NaviZoneType_NO_ENTRY:3,NaviZoneType_CORRIDOR:4,NaviModelPassType_PASS_THROUGH:0,NaviModelPassType_PASS_NOT_THROUGH:1,NaviModelPassType_NOT_PASS:2,NaviModelPassType_DECORATE:3,NaviRoadHinderType_HINDER_GENERAL:0,NaviRoadHinderType_HINDER_HIGH:1,NaviObstructType_MODEL:0,NaviObstructType_EXTENT:1};o=function t(){!function(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}(this,t),this.Ai=0,this.Vt={},this.Yt=0,this.qn=[],this.Yn=[],this.Xn=0,this.zn=[],this.Hn=!1,this.Qn=!1,this.$n=0,this.Jn=!1,this.Kn=[]};Object.assign(o.prototype,{set tr(t){-1!=t&&(this.Yt|=t)},get tr(){return 3&this.Yt},set ir(t){this.Yt|=t<<2},get ir(){return this.Yt>>2&7},set nr(t){this.Yt|=t<<5},get nr(){return this.Yt>>5&3},set rr(t){this.Yt|=t<<7},get rr(){return this.Yt>>7&3},set er(t){this.Yt|=t<<9},get er(){return this.Yt>>9&3},kn:function(t){this.Ai=t,this.Vt={x:0,y:0},this.Yt=0,this.Xn=0,this.Hn=!1,this.Qn=!1},sr:function(t){return this.Ai==t.Ai},or:function(t){this.Ai=t.Ai,this.Vt=Object.assign({},t.Vt),this.Yt=t.Yt,this.qn=[];for(var i=0;i<t.qn.length;i++)this.qn[i]=t.qn[i];this.Yn=[];for(var n=0;n<t.Yn.length;n++)this.Yn[n]=t.Yn[n];this.Xn=t.Xn,this.zn=[];for(var r=0;r<t.zn.length;r++)this.zn[r]=t.zn[r];this.Hn=t.Hn,this.Qn=t.Qn},ur:function(){return this.qn.length},hr:function(){return this.Yn.length},ar:function(t){if(this.ir==wn.NaviLiftType_Stair)return!0;for(var i=this.qn.length-1;0<=i;i--)if(this.qn[i]==t)return!0;return!1}});var _n=o;function gn(t){return(gn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function xn(t,i){return(xn=Object.setPrototypeOf||function(t,i){return t.__proto__=i,t})(t,i)}function On(n){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var t,i=Mn(n);return t=r?(t=Mn(this).constructor,Reflect.construct(i,arguments,t)):i.apply(this,arguments),i=this,!(t=t)||"object"!==gn(t)&&"function"!=typeof t?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(i):t}}function Mn(t){return(Mn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var jn=function(){!function(t,i){if("function"!=typeof i&&null!==i)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(i&&i.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),i&&xn(t,i)}(n,_n);var i=On(n);function n(){var t;return function(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}(this,n),(t=i.call(this)).fr=0,t.Ln=0,t.cr=null,t.$n=0,t.lr=null,t.ir=null,t}return n}();g=function t(){!function(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}(this,t),this.Ai=0,this.vr=-1,this.dr={},this.yr=-1,this.br={},this.Pn=0,this.Yt=0,this.pr=[],this.mr=-1,this.wr=!1,this._r=0};Object.assign(g.prototype,{set gr(t){this.Yt|=t},get gr(){return 3&this.Yt},set xr(t){this.Yt|=t<<2},get xr(){return this.Yt>>2&3},set er(t){this.Yt|=t<<4},get er(){return this.Yt>>4&3},set Or(t){t?this.Yt|=16:this.Yt&=-17},get Or(){return 16&this.Yt?1:0},Mr:function(t){this.Ai=t.Ai,this.vr=t.vr,this.dr=Object.assign({},t.dr),this.yr=t.yr,this.br=Object.assign({},t.br),this.Pn=t.Pn,this.Yt=t.Yt,this.pr=[],this.mr=t.mr;for(var i=0;i<t.pr.Pn;i++)this.pr[i]=t.pr[i]},jr:function(){this.Pn=lt.distanceOfTwoPoints(this.dr,this.br)},Er:function(){var t=this.dr.x-this.br.x,i=this.dr.y-this.br.y;this.Pn=Math.abs(t)+Math.abs(i)},kr:function(){var t={};return t.x=(this.dr.x+this.br.x)/2,t.y=(this.dr.y+this.br.y)/2,t}});var En=g;function kn(t,i){for(var n=0;n<i.length;n++){var r=i[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}o=function(){function e(t,i,n,r){!function(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}(this,e),this.Ai=t,this.Ln=i||-1,this.Yt=n,this.Tr=r,this.Rr=r&&r.length?r.length-1:0,this.Ar=0,this.Sr=null,this.Ir=null,this.Nr=[],this.Lr=[],this.Pr=null,this.Ut=new dt,this.Ut.Pt(this.Tr)}var t,i,n;return t=e,(i=[{key:"_pass",get:function(){return 3&this.Yt},set:function(t){this.Yt|=t}},{key:"_area",get:function(){return null==this.Pr&&(this.Pr=lt.wt(this.Tr,this.Rr)),this.Pr}}])&&kn(t.prototype,i),n&&kn(t,n),e}();Object.assign(o.prototype,{Dr:function(t){return!!lt.ut(t,this.Ut.St,this.Ut.It)&&lt.ct(this.Tr,t,this.Rr)},_t:function(t,i){for(var n={},r=0;r<this.Rr;r++){var e=this.Tr[r],s=this.Tr[(r+1)%this.Rr];if(1==lt._t(e,s,t,i,n))break}return n}});var Tn=o;function Rn(t,i){for(var n=0;n<i.length;n++){var r=i[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}g=function(){function o(t,i,n,r,e,s){!function(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}(this,o),this.Ai=t,this.Fr="",this.Tr=r,this.Rr=r&&r.length?r.length-1:0,this.Dt=e,this.Cr=s,this.Yt=n,this.Ln=i,this.Ur=[],this.Br=[],this.Gr=[],this.Sr=null,this.Ir=null,this.Nr=[],this.Zr=0,this.Ar=0,this.Pr=null,this.Wr=!1,this.Ut=new dt,this.Ut.Pt(this.Tr)}var t,i,n;return t=o,(i=[{key:"pass",get:function(){return 3&this.Yt},set:function(t){this.Yt|=t}},{key:"area",get:function(){return null==this.Pr&&(this.Pr=lt.wt(this.Tr,this.Rr)),this.Pr}}])&&Rn(t.prototype,i),n&&Rn(t,n),o}();Object.assign(g.prototype,{Dr:function(t){return lt.ct(t,this.Tr,this.Rr)}});var An=g;function Sn(t,i){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,i){if(t){if("string"==typeof t)return In(t,i);var n=Object.prototype.toString.call(t).slice(8,-1);return"Map"===(n="Object"===n&&t.constructor?t.constructor.name:n)||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?In(t,i):void 0}}(t))||i&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var e,s=!0,o=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return s=t.done,t},e:function(t){o=!0,e=t},f:function(){try{s||null==n.return||n.return()}finally{if(o)throw e}}}}function In(t,i){(null==i||i>t.length)&&(i=t.length);for(var n=0,r=new Array(i);n<i;n++)r[n]=t[n];return r}function Nn(t,i){for(var n=0;n<i.length;n++){var r=i[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var Ln=function(){function e(t,i,n,r){!function(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}(this,e),this.Ln=0,this.Yt=r,this.Vr=t,this.qr=i,this.Yr=[],this.Xr=[],this.zr=[],this.Hr=[],this.Qr=new Map,this.$r=[],this.Jr=new Map,this.Kr=new Map,this.te=n,this.ie=[],this.ne=new Map,this.re=new Map,this.ee=0,this.se=0,this.oe(),this.kn()}var t,i,n;return t=e,(i=[{key:"queryContainExtentID",value:function(t){return this.ue(t)}}])&&Nn(t.prototype,i),n&&Nn(t,n),e}();Object.assign(Ln.prototype,{pi:function(){this.Vr=null,this.qr=null,this.Yr=null,this.Xr=null,this.zr=null,(this.Hr=null)!=this.Qr&&(this.Qr.clear(),this.Qr=null),null!=this.Jr&&(this.Jr.clear(),this.Jr=null),(this.$r=null)!=this.Kr&&(this.Kr.clear(),this.Kr=null),(this.ie=null)!=this.ne&&(this.ne.clear(),this.ne=null),null!=this.re&&(this.re.clear(),this.re=null)},he:function(t){for(var i,n,r=Number.MAX_VALUE,e=0;e<this.qr.length;e++)0!=this.te&&(i=this.qr[e],1==t?r=i.Pn:2==t&&(r=i.Pn*i.gr),(n=i.xr)!=wn.NaviRoadEntry_BOTH&&n!=wn.NaviRoadEntry_FORWARD||(this.$r[i.vr][i.yr]=r),n!=wn.NaviRoadEntry_BOTH&&n!=wn.NaviRoadEntry_BACK||(this.$r[i.yr][i.vr]=r))},ae:function(){return 0==this.Vr.length||0==this.qr.length},ln:function(){for(var t=0;t<this.Vr.length;t++)this.Vr[t].Hn=!1;if(1==this.te)for(var i=this.Vr.length+1,n=0;n<i;n++)for(var r=0;r<i;r++)void 0!==this.$r[n]&&void 0!==this.$r[n][r]&&(this.$r[n][r]=Number.MAX_VALUE)},fe:function(){this.Hr=[];for(var t=0;t<this.Xr.length;t++){var i=this.Xr[t].toZone();this.Hr.push(i)}for(var n=0;n<this.Yr.length;n++){var r=this.Xr[n].toZone();this.Hr.push(r)}},ce:function(t){for(var i=0;i<this.Hr.length;i++){var n=this.Hr[i];if(n&&n.Ai==t)return n}return null},le:function(t){for(var i=0;i<this.Hr.length;i++){var n=this.Hr[i];if(n&&1==n.contain(t))return n}return null},ve:function(){},de:function(t,i){var n=null;if(this.Vr.length<=0||this.qr.length<=0)return n;for(var r=[],e=0,s=this.Vr.length;e<s;e++){var o=this.Vr[e],u=o.entranceType;u!=i&&u!=wn.NaviEntranceType_ACCESS||((u=new{}).node=o,u.distance=lt.vt(t,o.Vt),r.push(u))}return 0==r.length?n:n=(r=r.sort(this.ye))[0].node.Vt},be:function(t){var i=[];if(this.Vr.length<=0||this.qr.length<=0)return i;for(var n=0,r=this.Vr.length;n<r;n++){var e=this.Vr[n],s=e.entranceType;s!=t&&s!=wn.NaviEntranceType_ACCESS||i.push(e.Vt)}return i},pe:function(t,i){if(this.Vr.length<=0||this.qr.length<=0)return!1;if(t.Ai==i.Ai)return!0;this.me();var n=[];n.push(t.Ai);for(var r,e,s=o=0;o!=n.length;)for(var s=o,o=n.length,u=s;u<n.length;u++)for(var h=0;h<this.qr.length;h++)if(1!=this.ie[h]){if(e=(r=this.qr[h]).xr,r.vr==n[u]&&(e==wn.NaviRoadEntry_BOTH||e==wn.NaviRoadEntry_FORWARD)){if(r.yr==i.Ai)return!0;n.push(r.yr),this.ie[h]=!0}if(r.yr==n[u]&&(e==wn.NaviRoadEntry_BOTH||e==wn.NaviRoadEntry_BACK)){if(r.vr==i.Ai)return!0;n.push(r.vr),this.ie[h]=!0}}return!1},we:function(t,i,n,r){if(this.Vr.length<=0||this.qr.length<=0)return[];var e=this.ue(t);if(0==e)return!1;for(var s=[],o=0;o<this.Vr.length;o++){var u=this.Vr[o],h=this.ue(u.Vt);!u.contansFloor(i)||h!=e&&0!=e||((h={}).node=u,h.distance=lt.vt(t,u.Vt),h.distance=parseFloat(h.distance).toFixed(4),s.push(h))}if(!s||0==s.length)return[];for(var s=s.sort(this.ye),a=0;a<s.length;a++)n[a]=new _n,n[a].setNode(s[a].node),r[a]=parseFloat(s[a].distance);return n},_e:function(t,i){if(!this.Vr||this.Vr.length<=0||!this.qr||this.qr.length<=0)return!1;for(var n=0;n<this.Vr.length;n++){var r=this.Vr[n];if(r.tr==wn.NaviNodeType_FLOOR)if(r.Xn==t)return i.setNode(r),!0}return!1},ge:function(t,i){if(!this.Vr||this.Vr.length<=0||!this.qr||this.qr.length<=0)return!1;for(var n=0;n<this.Vr.length;n++){var r=this.Vr[n];r.ir==t&&(i[n]=r)}return 0!=i.length},ue:function(t){if(0===this.Xr.length||!t)return 0;for(var i=0,n=this.Xr.length;i<n;i++){var r=this.Xr[i];if(r.Dr(t))return r.Ai}return 0},xe:function(t,i){if(0==this.zr.length||!t||!i)return!1;for(var n=0;n<this.zr.length;n++)if(this.zr[n].isCross(t,i))return!0;return!1},Oe:function(t,i,n,r,e){var s=Number.MAX_VALUE,o={};new _n;if(this.Vr.length<=0||this.qr.length<=0)return!1;var u=this.ue(t);if(0==u)return!1;for(var h=0,a=this.qr.length;h<a;h++){var f,c=this.qr[h];c&&u==this.ue(c.dr)&&(f=lt.bt(t,c.dr,c.br,o),this.xe(o,t)||f<s&&(s=f,i.Mr(c),r.x=o.x,r.y=o.y))}if(!i||i.xr==wn.NaviRoadEntry_FORBID)return!1;for(var l=i.xr==wn.NaviRoadEntry_BACK||i.xr!=wn.NaviRoadEntry_FORWARD&&lt.vt(i.dr,r)<=lt.vt(i.br,r)?i.vr:i.yr,v=0;v<this.Vr.length;v++){var d=this.Vr[v];if(d.Ai==l){n.or(d);break}}return!0},Me:function(t,i,n,r){var e=Number.MAX_VALUE,s={};new _n;if(this.Vr.length<=0||this.qr.length<=0)return!1;var o=this.ue(t);if(0==o)return!1;for(var u=0;u<this.qr.length;u++){var h,a=this.qr[u];wn.NaviRoadEntry_BOTH==a.xr&&(o!=this.ue(a.dr)&&0!=o||(h=lt.bt(t,a.dr,a.br,s),this.xe(s,t)||h<e&&(e=h,i.setRoad(a),r.x=s.x,r.y=s.y)))}if(-1==i.Ai)return!1;for(var f=lt.vt(i.dr,r)<=lt.vt(i.br,r)?i.vr:i.yr,c=0;c<this.Vr.length;c++){var l=this.Vr[c];if(l.Ai==f){n.or(l);break}}return-1!=n.Ai},oe:function(){this.ee=0;for(var t=this.se=0;t<this.qr.length;)null==this.qr[t]?this.qr.splice(t,1):(this.qr[t].Ai>this.se&&(this.se=this.qr[t].Ai),t++);for(var i=0;i<this.Vr.length;)null==this.Vr[i]?this.Vr.splice(i,1):(this.Vr[i].Ai>this.ee&&(this.ee=this.Vr[i].Ai),i++)},je:function(t){t=this.ne.get(t);return void 0===t?null:t},Ee:function(t){t=this.re.get(t);return void 0===t?null:t},ke:function(t){for(var i=Number.MAX_VALUE,n=null,r=0;r<this.Xr.length;++r){var e=this.Xr[r];e.contain(t)&&e.area<i&&(i=cur_area,n=e)}for(var s=0;s<this.Yr.size();++s){var o=this.Yr[s];o.contain(t)&&o.area<i&&(i=cur_area,n=o)}return n||null},Te:function(t){for(var i=Number.MAX_VALUE,n=null,r=0;r<this.Yr.length;++r){var e=this.Yr[r];e.Dr(t)&&e.area<i&&(i=e.area,n=e)}return n||null},Re:function(){return++this.ee},Ae:function(){return++this.se},Se:function(t){this.ee=t},Ie:function(t){this.se=t},Ne:function(){for(var t=0;t<this.Vr.length;t++){var i=this.Vr[t];i&&this.ne.set(i.Ai,t)}},Le:function(){for(var t=0;t<this.qr.length;t++){var i=this.qr[t];i&&this.re.set(i.Ai,t)}},Pe:function(){var t,i=Sn(this.ne);try{for(i.s();!(t=i.n()).done;)t.value[1].Kn=[]}catch(t){i.e(t)}finally{i.f()}},De:function(){var e=this;this.Jr.clear();for(var t=0;t<this.qr.length;t++)(function(t){var i=e.qr[t];if(null==i)return;var n,r=i.xr;wn.NaviRoadEntry_BOTH!=r&&wn.NaviRoadEntry_FORWARD!=r||(t=i.vr,(n=e.Jr.get(t))||e.Jr.set(t,n=[]),null==n.find(function(t){return t.Fe==i.yr})&&n.push({Fe:i.yr,Pn:i.Pn})),wn.NaviRoadEntry_BOTH!=r&&wn.NaviRoadEntry_BACK!=r||(n=i.yr,(r=e.Jr.get(n))||e.Jr.set(n,r=[]),null==r.find(function(t){return t.Fe==i.vr})&&r.push({Fe:i.vr,Pn:i.Pn}))})(t)},Ce:function(t){for(var i=0;i<this.Vr.length;i++)if(this.Vr[i].Ai==t)return i;return-1},Ue:function(t){for(var i=9;i<this.qr.length;i++)if(this.qr[i].Ai==t)return i;return-1},Be:function(t){for(var i=[],n=this.qr,r=0;r<n.length;r++){var e=n[r],s=e.dr,o=e.br,u=[];t.Ge([s,o],u)?i.push({road:e,crss:u,index:r}):t.Ze(s)&&i.push({road:e,crss:[],index:r})}return i},We:function(t){for(var i=null,n=Number.MAX_VALUE,r=0;r<this.Yr.length;r++){var e=this.Yr[r];lt.ct(t,e.Tr,e.Rr)&&n>e.area&&(n=(i=e).area)}return i},Ve:function(t){for(var i=-1,n=0;n<this.Hr.length;n++){var r=this.Hr[n];if(lt.ct(t,r.Tr,r.Rr)){i=r.Ai;break}}return i},qe:function(){var t=this.Yr.length,t=parseInt(Math.random()*t);return this.Yr[t]},kn:function(){if(1==this.te)for(var t,i=0;i<this.qr.length;i++)t=this.qr[i],void 0===this.$r[t.vr]&&(this.$r[t.vr]=new Array),this.$r[t.vr][t.yr]=Number.MAX_VALUE,void 0===this.$r[t.yr]&&(this.$r[t.yr]=new Array),this.$r[t.yr][t.vr]=Number.MAX_VALUE;for(var n=0;n<this.qr.length;n++)this.ie[n]=!1},me:function(){for(var t=0;t<this.ie.length;t++)this.ie[t]=!1},ye:function(t,i){return parseFloat(t.distance)-parseFloat(i.distance)},Ye:function(){for(var t=[],i=0;i<this.Vr.length;i++){var n=this.Vr[i];n.ir==wn.NaviLiftType_Lift&&t.push(n)}return t},Xe:function(t){for(var i=0;i<this.Vr.length;i++)if(this.Vr[i].Xn==t)return this.Vr[i];return null},ze:function(){for(var t=[],i=0;i<this.Vr.length;i++){var n=this.Vr[i];n.ir!=wn.NaviLiftType_NULL&&t.push(n)}return t},He:function(t){for(var i=null,n=0;n<this.Xr.length;n++)if(t==this.Xr[n].Ai){i=this.Xr[n];break}if(!i)return null;for(var r=[],e=0;e<this.Vr.length;e++){var s=this.Vr[e];lt.ct(s.Vt,i.Tr,i.Rr)&&r.push(s)}for(var o=[],u=0;u<this.qr.length;u++){var h=this.qr[u];lt.ct(h.dr,i.Tr,i.Rr)&&o.push(h)}for(var a=[],f=0;f<this.Yr.length;f++){var c=this.Yr[f];lt.ct(c.Dt,i.Tr,i.Rr)&&a.push(c)}var l=new Ln(r,o,!0,1);return l.Yr=a,l.Xr=[i],l}});var Pn=Ln;function Dn(t){return(Dn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Fn(t){return function(t){if(Array.isArray(t))return Cn(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,i){if(t){if("string"==typeof t)return Cn(t,i);var n=Object.prototype.toString.call(t).slice(8,-1);return"Map"===(n="Object"===n&&t.constructor?t.constructor.name:n)||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Cn(t,i):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Cn(t,i){(null==i||i>t.length)&&(i=t.length);for(var n=0,r=new Array(i);n<i;n++)r[n]=t[n];return r}function Un(t,i){return(Un=Object.setPrototypeOf||function(t,i){return t.__proto__=i,t})(t,i)}function Bn(n){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var t,i=Gn(n);return t=r?(t=Gn(this).constructor,Reflect.construct(i,arguments,t)):i.apply(this,arguments),i=this,!(t=t)||"object"!==Dn(t)&&"function"!=typeof t?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(i):t}}function Gn(t){return(Gn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}o=function(){!function(t,i){if("function"!=typeof i&&null!==i)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(i&&i.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),i&&Un(t,i)}(n,_n);var i=Bn(n);function n(){var t;return function(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}(this,n),(t=i.call(this)).Ln=0,t.mr=0,t.Qe=[],t.cr=null,t.$e=15,t.Je=8,t}return n}();Object.assign(o.prototype,{Ke:function(t,i){if(!t)return[];for(var n=[],r=0;r<this.Qe.length;r++){var e=this.Qe[r];t==e.ir&&(i&&(e.$n=e.$n+i),n.push(e))}return n},ts:function(t,i,n,r){this.cr=t;var e=[];e.push.apply(e,Fn(this.Qe));for(var s=0;s<e.length;s++){var o=e[s];o.$n=lt.distanceOfTwoPoints(n,o.Vt)+lt.distanceOfTwoPoints(o.Vt,i)}return this.ns(e,r)},ns:function(t,i){if(i==p.PRIORITY_LIFTFIRST1){var n=this.rs.bind(this);t.sort(n)}else if(i==p.PRIORITY_ESCALATORFIRST1){var r=this.es.bind(this);t.sort(r)}else if(i!=p.PRIORITY_STAIRFIRST1){r=this.ss.bind(this);t.sort(r)}else{this.us(t,i);for(var e=[],s=0;s<t.length;s++)t[s].$n&&e.push(t[s]);(t=[]).push.apply(t,e);i=this.hs.bind(this);t.sort(i)}return t},rs:function(t,i){if(t.zone!=i.zone){if(this.cr==t.zone)return-1;if(this.cr==i.zone)return 1}return t.ir!=wn.NaviLiftType_Lift&&t.ir!=wn.NaviLiftType_Accessible||i.ir!=wn.NaviLiftType_Lift&&i.ir!=wn.NaviLiftType_Accessible?t.ir==wn.NaviLiftType_Lift||t.ir==wn.NaviLiftType_Accessible?-1:i.ir==wn.NaviLiftType_Lift||i.ir==wn.NaviLiftType_Accessible?1:t.$n-i.$n:t.$n<i.$n},es:function(t,i){if(t.zone!=i.zone){if(this.cr==t.zone)return-1;if(this.cr==i.zone)return 1}return t.ir==wn.NaviLiftType_Escalator&&i.ir==wn.NaviLiftType_Escalator?t.$n<i.$n:t.ir==wn.NaviLiftType_Escalator?-1:i.ir==wn.NaviLiftType_Escalator?1:t.$n-i.$n},ss:function(t,i){if(t.zone!=i.zone){if(this.cr==t.zone)return-1;if(this.cr==i.zone)return 1}return t.ir==wn.NaviLiftType_Stair&&i.ir==wn.NaviLiftType_Stair?t.$n<i.$n:t.ir==wn.NaviLiftType_Stair?-1:i.ir==wn.NaviLiftType_Stair?1:t.$n-i.$n},hs:function(t,i){if(t.zone!=i.zone){if(this.cr==t.zone)return-1;if(this.cr==i.zone)return 1}return t.$n-i.$n},us:function(t,i){if(i===p.PRIORITY_DEFAULT)for(var n=0;n<t.length;n++)t[n].ir===wn.NaviLiftType_Escalator?t[n].$n-=this.$e:t[n].ir!==wn.NaviLiftType_Lift&&t[n].ir!==wn.NaviLiftType_Accessible||(t[n].$n-=this.Je);else if(i===p.PRIORITY_STAIRFIRST)for(var r=0;r<t.length;r++)t[r].ir===wn.NaviLiftType_Stair?t[r].$n-=this.$e:t[r].ir===wn.NaviLiftType_Escalator&&(t[r].$n-=this.Je);else if(i===p.PRIORITY_ESCALATORFIRST)for(var e=0;e<t.length;e++)t[e].ir===wn.NaviLiftType_Escalator?t[e].$n-=this.$e:t[e].ir!==wn.NaviLiftType_Lift&&t[e].ir!==wn.NaviLiftType_Accessible||(t[e].$n-=this.Je);else if(i===p.PRIORITY_LIFTFIRST)for(var s=0;s<t.length;s++)t[s].ir===wn.NaviLiftType_Lift||t[s].ir===wn.NaviLiftType_Accessible?t[s].$n-=this.$e:t[s].ir===wn.NaviLiftType_Escalator&&(t[s].$n-=this.Je);else if(i===p.PRIORITY_STAIRONLY)for(var o=0;o<t.length;o++)t[o].ir!==wn.NaviLiftType_Stair&&(t[o].$n=null);else if(i===p.PRIORITY_ESCALATORONLY)for(var u=0;u<t.length;u++)t[u].ir!==wn.NaviLiftType_Escalator&&(t[u].$n=null);else if(i===p.PRIORITY_LIFTONLY)for(var h=0;h<t.length;h++)t[h].ir!==wn.NaviLiftType_Lift&&t[h].ir!==wn.NaviLiftType_Accessible&&(t[h].$n=null);else if(i===p.PRIORITY_ACCESSIBLEONLY)for(var a=0;a<t.length;a++)t[a].ir!==wn.NaviLiftType_Accessible&&(t[a].$n=null)}});var Zn=o;g=function t(){!function(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}(this,t),this.as=null};Object.assign(g.prototype,{pi:function(){this.as=null},cs:function(t){this.as=t},ls:function(t,i){var n=null;return 0==i?n=Ii.Mi(t):1==i?n=Ii.ji(t):2==i&&(n=Ii.Ei(t)),{points:n[0],holes:n.slice(1)}},vs:function(t,i,n){var r=null;return 0==n?r=Ai.Mi(t,i):1==n?r=Ai.ji(t,i):2==n&&(r=Ai.Ei(t,i)),{points:r[0],holes:r.slice(1)}},ds:function(t){if(t&&"string"!=typeof t)for(var i in t){var n=t[i];if("vertices"==i||"vertex"==i)for(var r in n)r%2==0&&(n[r]=-n[r]);else"scene_data"==i?(n.x=-n.x,n.defCenX=-n.defCenX):this.ds(n)}},ys:function(t){if(""==t||!t)return[];var i=[],n=t,t=[];return 0<=n.indexOf("|")||0<=n.indexOf("-")||0<=n.indexOf(",")?(t=n.split(/[|,-]/),i.push.apply(i,t)):i.push(n),i},bs:function(t,i,n,r){for(var e={},s=[],o=[],u=[],h=[],a=[],f=this.as.fileVer,c=0,l=i.extentLayer.length;c<l;c++){var v=i.extentLayer[c],d=null,d=1===f?this.ls(v.geo,2):this.vs(v.idxs,v.pts,2);v.geoArr=d.points,v.holes=d.holes,o.push(v)}for(var y=0,b=i.labelLayer.length;y<b;y++)e[i.labelLayer[y].eid]=i.labelLayer[y];for(var p=0,m=i.modelLayer.length;p<m;p++){var w=i.modelLayer[p],_=n.modelLayer[p],g={};g.fid=_.fid,g.eid=w.eid,g.pass=_.pass,g.Dt=(1===f?this.ls(e[w.eid].geo,0):this.vs(e[w.eid].idxs,e[w.eid].pts,0)).points;_=null,_=1===f?this.ls(w.geo,2):this.vs(w.idxs,w.pts,2);g.geoArr=_.points,g.holes=_.holes,s.push(g)}if(r&&r.naviNodes)for(var x=0,O=r.naviNodes.length;x<O;x++){var M=r.naviNodes[x];M.geoArr=(1===f?this.ls(M.geo,0):this.vs(M.idxs,M.pts,0)).points,M.linkSegArr=this.ys(M.linkSeg),M.liftFloorArr=this.ys(M.liftFloor),u.push(M)}if(r&&r.naviSegments)for(var j=0,E=r.naviSegments.length;j<E;j++){var k=r.naviSegments[j];k.geoArr=(1===f?this.ls(k.geo,1):this.vs(k.idxs,k.pts,1)).points,k.m_Id=r.mid,h.push(k)}if(r&&r.naviZones)for(var T=0,R=r.naviZones.length;T<R;T++){var A=r.naviZones[T],S=null,S=1===f?this.ls(A.geo,2):this.vs(A.idxs,A.pts,2);A.geoArr=S.points,A.holes=S.holes,A.m_Id=r.mid,a.push(A)}return{level:t,extentLayer:o,modelLayer:s,naviSegments:h,naviNodes:u,naviZones:a}}});var Wn=g;function Vn(t,i){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,i){if(t){if("string"==typeof t)return qn(t,i);var n=Object.prototype.toString.call(t).slice(8,-1);return"Map"===(n="Object"===n&&t.constructor?t.constructor.name:n)||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?qn(t,i):void 0}}(t))||i&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var e,s=!0,o=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return s=t.done,t},e:function(t){o=!0,e=t},f:function(){try{s||null==n.return||n.return()}finally{if(o)throw e}}}}function qn(t,i){(null==i||i>t.length)&&(i=t.length);for(var n=0,r=new Array(i);n<i;n++)r[n]=t[n];return r}o=function t(i){!function(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}(this,t),this.ps=i,this.ms=null,this.ws=null,this._s=-1,this.gs=-1,this.xs=x.MODULE_SHORTEST,this.Os=[],this.ps.Ne(),this.ps.Le(),this.ps.De(),this.Ms=5e-4,this.js=0};Object.assign(o.prototype,{Es:function(t,i,n){this.ks(n),this.Ts=i;t=this.ps.je(t);if(-1==t)return I.ROUTE_FAILED_CANNOT_CALCULATE;this.Os=[];for(var r=0;r<i.length;r++){var e=this.ps.je(i[r]);this.Os.push(e)}return!!this.Rs(this.ps,t,this.Os)},As:function(){for(var t=[],i=0;i<this.Os.length;i++){var n=[];this.Ss(this.Os[i],n),n.reverse(),t.push(n)}return t},Ss:function(t,i){t=this.ps.Vr[t];i.push(t);t=t.Kn[0];null!=t&&this.Ss(t,i)},Is:function(t,i){if(null!=this.ps.Vr&&0!=this.ps.Vr.length&&this.ps.Vr[0]instanceof Zn){this.js=10;for(var n={},r=0;r<this.ps.Vr.length;r++){var e=this.ps.Vr[r],s=e.Ns.Tr,o=s.length-1,u=this.ps.Vr[r].Ai;n[u]=[1,1],lt.ct(t,s,o)&&(n[u][0]=0,t.level==e.Ln&&e.Ai),lt.ct(i,s,o)&&(n[u][1]=0,i.level==e.Ln&&e.Ai)}var h,a=this.ps.Jr,f=Vn(a.keys());try{for(f.s();!(h=f.n()).done;){var c=h.value;a.get(c).sort(function(t,i){return n[t.Fe][0]+n[t.Fe][1]-(n[i.Fe][0]+n[i.Fe][1])})}}catch(t){f.e(t)}finally{f.f()}}},Ls:function(t,i,n,r,e){this.ks(n),this.ms=t,this.ws=i,this.Is(r,e),this._s=t.Ai,this.gs=i.Ai;e=this.ps.je(this._s);if(-1===e)return I.ROUTE_FAILED_CANNOT_CALCULATE;t=this.ps.je(i.Ai);if(-1===t)return I.ROUTE_FAILED_CANNOT_CALCULATE;i=[];return i.push(t),this.Rs(this.ps,e,i)?I.ROUTE_SUCCESS:I.ROUTE_FAILED_CANNOT_ARRIVE},Ps:function(){var t=[],i=this.ps.je(this.gs),n=[];n.push(i);i=[];return this.Ds(n,this.ps.Vr,i,[]),t.push.apply(t,i),t},pi:function(){this.ps.pi(),this.ps=null,this.ms=null,this.ws=null},Rs:function(t,i,n){if(null==t)return!1;var r=t.Vr.length;if(i<0||r<=i)return!1;this.Fs(n,i);for(var e=0;e<r;++e)t.Vr[e].$n=Number.MAX_VALUE,t.Vr[e].Jn=!1,t.Vr[e].Kn=[];t.Vr[i].$n=0;var s=n.length,o=0,u=[];u.push(t.Vr[i]);for(var h=this.Cs.bind(this);0<u.length;){var a=u[0].Ai;u.splice(0,1);var f=t.je(a);if(null!=f){var c=t.Vr[f];if(!c.Jn){c.Jn=!0;var l=n.indexOf(f);if(-1!=l&&++o==s)return!0;if(0!=t.Jr.size){var v=t.Jr.get(a);if(v)for(var d=0;d<v.length;d++){var y,b=v[d],p=b.Fe,m=t.je(p);null!=m&&(y=b.Pn,p=t.Vr[m],b=this.js+y+c.$n,b=Number(b.toFixed(3)),p.Jn||(p.$n>b?(p.$n=b,p.Kn=[],p.Kn.push(f),u.push(t.Vr[m]),u.sort(h)):Math.abs(p.$n-(y+c.$n))<1e-12&&-1==p.Kn.indexOf(f)&&p.Kn.push(f)))}}}}}return!(o<s)},Cs:function(t,i){return t.$n-i.$n},Fs:function(t,i){for(var n=t.indexOf(i);-1!=n;)t.splice(n,1),n=t.indexOf(i)},ks:function(t){if(this.xs!=t){for(var i={},n=0;n<this.ps.qr.length;n++){var r=this.ps.qr[n],e=r.vr,s=r.yr,r=r.gr;i.hasOwnProperty(e)||(i[e]={}),i[e][s]=r,i.hasOwnProperty(s)||(i[s]={}),i[s][e]=r}if(x.MODULE_SHORTEST==t){var o,u=Vn(this.ps.Jr.keys());try{for(u.s();!(o=u.n()).done;){var h,a=o.value,f=Vn(this.ps.Jr.get(a));try{for(f.s();!(h=f.n()).done;){var c=h.value,l=c.Fe,v=i[a][l];c.Pn=c.Pn/v}}catch(t){f.e(t)}finally{f.f()}}}catch(t){u.e(t)}finally{u.f()}}else if(x.MODULE_BEST==t){var d,y=Vn(this.ps.Jr.keys());try{for(y.s();!(d=y.n()).done;){var b,p=d.value,m=Vn(this.ps.Jr.get(p));try{for(m.s();!(b=m.n()).done;){var w=b.value,_=w.Fe,g=i[p][_];w.Pn=w.Pn*g}}catch(t){m.e(t)}finally{m.f()}}}catch(t){y.e(t)}finally{y.f()}}this.xs=t}},Us:function(t,i,n,r){0!=i[t].Kn.length&&(t=i[t].Kn[0],n.push(i[t]),r.count++,this.Us(t,i,n,r))},Ds:function(t,i,n,r){for(var e=0;e<t.length;e++){var s=t[e];n.push(i[s]);var o={count:1};this.Us(s,i,n,o),r.push(o.count)}}});var Yn=o;function Xn(t){return(Xn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function zn(t,i){return(zn=Object.setPrototypeOf||function(t,i){return t.__proto__=i,t})(t,i)}function Hn(n){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var t,i=Qn(n);return t=r?(t=Qn(this).constructor,Reflect.construct(i,arguments,t)):i.apply(this,arguments),i=this,!(t=t)||"object"!==Xn(t)&&"function"!=typeof t?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(i):t}}function Qn(t){return(Qn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var $n=function(){!function(t,i){if("function"!=typeof i&&null!==i)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(i&&i.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),i&&zn(t,i)}(n,An);var i=Hn(n);function n(){var t;return function(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}(this,n),(t=i.call(this)).Ai=-1,t.Bs=[],t}return n}();var Jn=function t(){!function(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}(this,t),this.et=null,this.Gs=null,this.Zs=null,this.vt=0,this.Ws=!1,this.Vs=wn.NaviObstructType_MODEL};function Kn(t,i){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=ir(t))||i&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var e,s=!0,o=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return s=t.done,t},e:function(t){o=!0,e=t},f:function(){try{s||null==n.return||n.return()}finally{if(o)throw e}}}}function tr(t){return function(t){if(Array.isArray(t))return nr(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||ir(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ir(t,i){if(t){if("string"==typeof t)return nr(t,i);var n=Object.prototype.toString.call(t).slice(8,-1);return"Map"===(n="Object"===n&&t.constructor?t.constructor.name:n)||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?nr(t,i):void 0}}function nr(t,i){(null==i||i>t.length)&&(i=t.length);for(var n=0,r=new Array(i);n<i;n++)r[n]=t[n];return r}function rr(t,i){for(var n=0;n<i.length;n++){var r=i[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}g=function(){function i(t){!function(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}(this,i),this.qs=null,this.Ys=null,this.ps=t,this.Xs=new Map,this.zs=new Map,this.Hs=new Map,this.Qs=new Map,this.$s=new Map,this.Js=[],this.Ks=Number.INT_MIN,this.to=Number.INT_MIN,this.io=-1,this.ms=null,this.ws=null,this.xs=x.MODULE_SHORTEST,this.no=new Map,this.ro=new Map,this.eo=new Map,this.so=[],this.oo=[],this.uo=[],this.ho=[],this.ao=100,this.fo=-1,this.co=15,this.vo=.1,this.do=[],this.yo=[],this.bo=[],this.po=[],this.mo=!0,this.wo=[],this._o(),this.go(),this.xo(),this.Oo(),this.Mo()}var t,n,r;return t=i,(n=[{key:"assignedPts",get:function(){return this.yo},set:function(t){this.yo=t}},{key:"obstruct",get:function(){return this.mo},set:function(t){this.mo=t}}])&&rr(t.prototype,n),r&&rr(t,r),i}();Object.assign(g.prototype,{Ls:function(t,i,n){if(this.Ks=t instanceof _n?this.jo(t.Vt):this.jo(t),this.to=i instanceof _n?this.jo(i.Vt):this.jo(i),n&&(this.xs=n),t instanceof _n)this.ms=t;else if(I.ROUTE_FAILED_NO_DATA_START==this.Eo(t))return I.ROUTE_FAILED_NO_DATA_START;if(i instanceof _n)this.ws=i;else if(I.ROUTE_FAILED_NO_DATA_DEST==this.ko(i))return I.ROUTE_FAILED_NO_DATA_DEST;return null==this.ms?I.ROUTE_FAILED_NO_DATA_START:null==this.ws?I.ROUTE_FAILED_NO_DATA_DEST:this.To()},Ro:function(){var t;this.po=[];for(var i=0;i<this.yo.length;i++){var n={x:(n=this.yo[i])[0],y:n[1]},r=this.jo(n),n=this.Ao(r,n);this.po.push(n)}(t=this.Js).push.apply(t,tr(this.po))},Ps:function(){return this.Js},pi:function(){this.qs=null,this.Ys=null,this.ps.pi(),this.ps=null,this.Xs.clear(),this.Xs=null;var t,i=Kn(this.zs);try{for(i.s();!(t=i.n()).done;)t.value[1].pi()}catch(t){i.e(t)}finally{i.f()}this.zs.clear(),this.zs=null;var n,r=Kn(this.Qs);try{for(r.s();!(n=r.n()).done;)n.value[1].pi()}catch(t){r.e(t)}finally{r.f()}this.Qs.clear(),this.Qs=null;var e,s=Kn(this.Hs);try{for(s.s();!(e=s.n()).done;)e.value[1].pi()}catch(t){s.e(t)}finally{s.f()}this.Hs.clear(),this.Hs=null;var o,u=Kn(this.$s);try{for(u.s();!(o=u.n()).done;)o.value[1].pi()}catch(t){u.e(t)}finally{u.f()}this.$s.clear(),this.$s=null,this.Js=[],this.ms=null,this.ws=null,this.no.clear(),this.no=null,this.ro.clear(),this.ro=null,this.eo.clear(),this.so=[],this.oo=[],this.uo=[],this.ho=[],this.wo=[],this.mo=!1},ln:function(){this.Js=[],this.So(-1),this.So(this.Ks),this.Ks=Number.INT_MIN,this.So(this.to),this.to=Number.INT_MIN,this.Io(),this.do=[];var t=this.ps.qr.length;this.io<-2*t&&(this.io=-1);for(var i=0;i<this.so.length;i++){var n=this.so[i];this.No(n.Lo,n.Zs,wn.NaviRoadHinderType_HINDER_HIGH)}this.so=[],this.oo=[],this.uo=[],this.ho=[]},Po:function(t){this.wo=t,this.Hs.clear(),this.$s.clear();for(var i=0;i<this.wo.length;i++)for(var n=this.wo[i],r=this.Do(n),e=0;e<r.length;e++){var s=r[e],o=this.Hs.get(s);o||(o=this.Fo(this.zs.get(s)),this.Hs.set(s,o)),this.Co(o,n)}var u,h=Kn(this.Hs);try{for(h.s();!(u=h.n()).done;){var a=u.value;this.$s.set(a[0],new Yn(a[1]))}}catch(t){h.e(t)}finally{h.f()}},Co:function(t,i){for(var n=t.Be(i),r=0;r<n.length;r++){var e=n[r],s=new En;s.Mr(e.road);var o=s.xr;s.xr=wn.NaviRoadEntry_FORBID,t.qr[e.index]=s,1==e.crss.length&&(i.Ze(s.dr)?this.Uo(e.crss[0],this.Re(),s.br,this.Re(),o,t):this.Uo(s.dr,this.Re(),e.crss[0],this.Re(),o,t)),2<=e.crss.length&&(this.Uo(s.dr,this.Re(),e.crss[0],this.Re(),o,t),this.Uo(e.crss[e.crss.length-1],this.Re(),s.br,this.Re(),o,t))}var u=new $n;u.Ai=this.Bo(),u.Tr=i.Tr,u.pass=wn.NaviModelPassType_NOT_PASS,t.Yr.push(u)},Uo:function(t,i,n,r,e,s){var o,u;t instanceof _n?o=t:((o=new _n).Ai=i,o.Vt=t,s.Vr.push(o)),n instanceof _n?u=n:((u=new _n).Ai=r,u.Vt=n,s.Vr.push(u));n=new En;n.Ai=this.Ae(),n.vr=o.Ai,n.dr=o.Vt,n.yr=u.Ai,n.br=u.Vt,n.xr=e,n.Ai,n.vr,n.dr.x.toFixed(3),n.dr.y.toFixed(3),n.yr,n.br.x.toFixed(3),n.br.y.toFixed(3),s.qr.push(n)},Bo:function(){return this.io--},Go:function(t){var i=this.ps.ue(t);if(-1===i)return null;var n=this.jo(t),r=this.Zo(n).Te(t,-0);if(null==r)return{mr:i,Zs:null};if(r.pass===wn.NaviModelPassType_PASS_THROUGH||r.pass===wn.NaviModelPassType_PASS_NOT_THROUGH){if(0<r.Ur.length)return{mr:i,Zs:r};for(var e={},s=[],o=[],u=this.Zo(n).qr,h=!0,a=0;a<r.Rr;a++)for(var f=r.Tr[a],c=r.Tr[a+1],l=0;l<u.length;l++){var v=u[l];1===lt._t(f,c,v.dr,v.br,e)&&(h=!1,wn.NaviRoadEntry_FORBID!==v.xr&&((v={}).x=e.x,v.y=e.y,s.push(v),o.push(u[l])))}if(h)return{mr:i,Zs:r};if(0===s.length)return null;r.Ur=[],r.Gr=[],r.Br=[];for(var d=0;d<s.length;d++){var y=s[d],b=o[d],y=this.Wo(n,y,b);y.tr=wn.NaviNodeType_COMMON,b.xr===wn.NaviRoadEntry_BOTH?y.entranceType=wn.NaviEntranceType_ACCESS:lt.ct(b.dr,r.Tr,r.Rr)?(b.xr===wn.NaviRoadEntry_FORWARD&&(y.entranceType=wn.NaviEntranceType_EXIT),b.xr===wn.NaviRoadEntry_BACK&&(y.entranceType=wn.NaviEntranceType_ENTRANCE)):(b.xr===wn.NaviRoadEntry_FORWARD&&(y.entranceType=wn.NaviEntranceType_ENTRANCE),b.xr===wn.NaviRoadEntry_BACK&&(y.entranceType=wn.NaviEntranceType_EXIT)),r.Ur.push(y),r.Gr.push(y.entranceType),r.Br.push(y.tr)}}return r.pass!==wn.NaviModelPassType_NOT_PASS?{mr:i,Zs:r}:null},Eo:function(t){var i=this;this.ms=this.Ao(this.Ks,t);var n=null,r=!0,n=null!=this.qs&&this.qs.pass==wn.NaviModelPassType_PASS_THROUGH&&0==this.qs.Ur.length?this.Vo(this.Ks,t,30,this.qs):this.Vo(this.Ks,t);if(null==this.qs&&(r=!1),null!=n&&0<n.size){var e,r=!1,s=Kn(n);try{for(s.s();!(e=s.n()).done;)for(var o=e.value[1],u=0;u<o.length;u++)0!=o[u].Gs.xr&&(r=!0)}catch(t){s.e(t)}finally{s.f()}var h,a=!1,f=[],c=Kn(n);try{for(c.s();!(h=c.n()).done;){var l,v=h.value[1],d=v[0].Gs,y=this.qo(this.Ks,t,d,v,this.qs);if(0==y.length){var b,p=Kn(v);try{for(p.s();!(b=p.n()).done;){var m=b.value,w=this.Yo(this.Ks,m.et,m.Gs);this.Xo(this.Ks,this.ms,w)}}catch(t){p.e(t)}finally{p.f()}}else Math.abs(y[0].zo)>lt.J()?f.push.apply(f,tr(y)):(a=!0,l=this.Yo(this.Ks,y[0].et,y[0].Gs),this.Xo(this.Ks,this.ms,l))}}catch(t){c.e(t)}finally{c.f()}a||f.forEach(function(t){t=i.Yo(i.Ks,t.et,t.Gs);i.Xo(i.Ks,i.ms,t)})}if(r&&null!=this.qs&&0<this.qs.Ur.length){for(var _=!1,g=this.zs.get(this.Ks),x=0;x<this.qs.Ur.length;x++){var O=this.qs.Ur[x],M=this.qs.Gr[x];if(M==wn.NaviEntranceType_EXIT||M==wn.NaviEntranceType_ACCESS){for(var j=this.qs.Cr,E=!0,k=0;k<j.length;k++){for(var T=j[k],R=0;R<T.length-1;R++)if(lt.ot(t,O.Vt,T[R],T[R+1])){E=!1;break}if(0==E)break}if(0!=E){for(var A=0;A<g.qr.length;A++){var S=g.qr[A];if(0!=S.xr)if(lt.ot(t,O.Vt,S.dr,S.br)){E=!1;break}}0!=E&&(this.Xo(this.Ks,this.ms,O),_=!0)}}}if(!_)return I.ROUTE_FAILED_NO_DATA_START}},ko:function(t){var i=this;this.ws=this.Ao(this.to,t);var n=null,r=!0,n=null!=this.Ys&&this.Ys.pass==wn.NaviModelPassType_PASS_THROUGH&&0==this.Ys.Ur.length?this.Vo(this.to,t,30,this.Ys):this.Vo(this.to,t);if(null==this.Ys&&(r=!1),null!=n&&0<n.size){var e,r=!1,s=Kn(n);try{for(s.s();!(e=s.n()).done;)for(var o=e.value[1],u=0;u<o.length;u++)0!=o[u].Gs.xr&&(r=!0)}catch(t){s.e(t)}finally{s.f()}var h,a=!1,f=[],c=Kn(n);try{for(c.s();!(h=c.n()).done;){var l,v=h.value[1],d=v[0].Gs,y=this.qo(this.to,t,d,v,this.Ys);if(0==y.length){var b,p=Kn(v);try{for(p.s();!(b=p.n()).done;){var m=b.value,w=this.Yo(this.to,m.et,m.Gs);this.Xo(this.to,this.ws,w)}}catch(t){p.e(t)}finally{p.f()}}else Math.abs(y[0].zo)>lt.J()?f.push.apply(f,tr(y)):(a=!0,l=this.Yo(this.to,y[0].et,y[0].Gs),this.Xo(this.to,this.ws,l))}}catch(t){c.e(t)}finally{c.f()}a||f.forEach(function(t){t=i.Yo(i.to,t.et,t.Gs);i.Xo(i.to,i.ws,t)})}if(r&&null!=this.Ys&&0<this.Ys.Ur.length){for(var _=!1,g=this.zs.get(this.to),x=0;x<this.Ys.Ur.length;x++){var O=this.Ys.Ur[x],M=this.Ys.Gr[x];if(M==wn.NaviEntranceType_ENTRANCE||M==wn.NaviEntranceType_ACCESS){for(var j=this.Ys.Cr,E=!0,k=0;k<j.length;k++){for(var T=j[k],R=0;R<T.length-1;R++)if(lt.ot(t,O.Vt,T[R],T[R+1])){E=!1;break}if(0==E)break}if(0!=E){for(var A=0;A<g.qr.length;A++){var S=g.qr[A];if(0!=S.xr)if(lt.ot(t,O.Vt,S.dr,S.br)){E=!1;break}}0!=E&&(this.Xo(this.to,this.ws,O),_=!0)}}}if(!_)return I.ROUTE_FAILED_NO_DATA_DEST}},To:function(){var t=this.Ho(this.ms.Vt);t&&(this.No(this.Ks,t,wn.NaviRoadHinderType_HINDER_GENERAL),this.so.push({Lo:this.Ks,Zs:t}));t=this.Ho(this.ws.Vt);if(t&&(this.No(this.to,t,wn.NaviRoadHinderType_HINDER_GENERAL),this.so.push({Lo:this.to,Zs:t})),this.Js=[],this.Ks===this.to){var i=this.Qo(this.Ks),n=i.Ls(this.ms,this.ws,this.xs);if(n!==I.ROUTE_SUCCESS)return n;var r=i.Ps();this.Js=[],r.reverse(),(n=this.Js).push.apply(n,tr(r))}else{if(-1!==this.Ks&&-1===this.to){var i=this.$o(this.ms.Vt,this.Ks,wn.NaviEntranceType_EXIT),n=this.Qo(this.Ks),r=n.Ls(this.ms,i,this.xs);if(r!=I.ROUTE_SUCCESS)return r;var e=n.Ps(e),n=this.Qo(-1);if((r=n.Ls(i,this.ws,this.xs))!=I.ROUTE_SUCCESS)return r;r=n.Ps();e.reverse(),r.reverse(),(n=this.Js).push.apply(n,tr(e)),(e=this.Js).push.apply(e,tr(r))}if(-1===this.Ks&&-1!==this.to){var s=this.$o(this.ws.Vt,this.to,wn.NaviEntranceType_ENTRANCE),o=this.Qo(this.to),u=o.Ls(s,this.ws,this.xs);if(u!=I.ROUTE_SUCCESS)return u;var h=o.Ps(),o=this.Qo(-1);if((u=o.Ls(this.ms,s,this.xs))!=I.ROUTE_SUCCESS)return u;s=o.Ps();s.reverse(),h.reverse(),(u=this.Js).push.apply(u,tr(s)),(o=this.Js).push.apply(o,tr(h))}if(-1!==this.Ks&&-1!==this.to){var u=this.$o(this.ms.Vt,this.Ks,wn.NaviEntranceType_EXIT),s=this.Qo(this.Ks),o=s.Ls(this.ms,u,this.xs);if(o!=I.ROUTE_SUCCESS)return o;var a=s.Ps(a),h=this.$o(this.ws.Vt,this.to,wn.NaviEntranceType_ENTRANCE),s=this.Qo(this.to);if((o=s.Ls(h,this.ws,this.xs))!=I.ROUTE_SUCCESS)return o;var f=s.Ps(f),s=this.Qo(-1);if((o=s.Ls(u,h,this.xs))!=I.ROUTE_SUCCESS)return o;o=s.Ps();a.reverse(),o.reverse(),f.reverse(),(s=this.Js).push.apply(s,tr(a)),(a=this.Js).push.apply(a,tr(o)),(o=this.Js).push.apply(o,tr(f))}}return I.ROUTE_SUCCESS},Jo:function(t,i,n){for(var r=0;r<i;r++)if(null!=t[r]&&t[r].Ai==n)return r;return-1},jo:function(t){for(var i=this.ps.Hr,n=0;n<i.length;n++){var r=i[n];if(r.Dr(t))return r.Ai}return-1},_o:function(){for(var t=this.ps.Hr,i=0;i<t.length;i++){var n=t[i],r=this.Ko(this.ps,n);this.zs.set(n.Ai,r)}this.zs.set(-1,this.ps);var e,s=Kn(this.zs);try{for(s.s();!(e=s.n()).done;){var o=e.value;o[1].oe(),this.Qs.set(o[0],new Yn(o[1]))}}catch(t){s.e(t)}finally{s.f()}},Ko:function(t,i){if(t&&i){for(var n,r=0,e=0,s=t.qr.length,o=t.Vr.length,u=t.qr,h=t.Vr,a=0,f=new Int8Array(s),c=0;c<s;c++)u[c]&&u[c].xr!=wn.NaviRoadEntry_FORBID&&(n=u[c],r=i.contain(n.dr),e=i.contain(n.br),0==r&&0==e||(a=!0),1==r&&1==e&&(f[c]=1),1==r&&0==e&&(f[c]=2),0==r&&1==e&&(f[c]=3),0==r&&0==e&&(f[c]=4),2==r&&0==e&&(f[c]=6),2==r&&1==e&&(f[c]=7),0==r&&2==e&&(f[c]=8),1==r&&2==e&&(f[c]=9));if(0==a)return null;for(var l,v,d,y,b,p,m=new Array(o),w=new Array(s),_=0,g=new Int8Array(o),x=f.length,O=0,M=x;O<M;O++)0!=f[O]&&6!=f[O]&&8!=f[O]&&1!=f[O]&&u[O]&&(v=(l=u[O]).xr,b=[l.Ai],2==f[O]||9==f[O]?(d=null,d=2==f[O]?i._t(l.dr,l.br):Object.assign({},l.br),(p=new _n).Ai=this.Re(),p.tr=wn.NaviNodeType_COMMON,p.ir=wn.NaviLiftType_NULL,p.entranceType=wn.NaviEntranceType_ACCESS,p.Vt=Object.assign({},d),(y=new En).setRoad(l),y.Ai=this.Ae(),b.push(y.Ai),p.segLinks=b,(d=new _n).setNode(p),v==wn.NaviRoadEntry_FORWARD?d.entranceType=wn.NaviEntranceType_EXIT:v==wn.NaviRoadEntry_BACK&&(d.entranceType=wn.NaviEntranceType_ENTRANCE),i.Lr.push(d),_=this.Jo(h,o,y.yr),y.br=Object.assign({},d.Vt),y.pr[1]=Object.assign({},d.Vt),y.yr=d.Ai,y.jr(),w[O]=y,m[_]=d,m[_=this.Jo(h,o,y.vr)]=h[_],m[_].segLinks.splice(m[_].segLinks.indexOf(l.Ai),1,y.Ai),(y=new _n).setNode(p),l.vr=y.Ai,l.dr=Object.assign({},y.Vt),l.pr[0]=Object.assign({},y.Vt),l.jr(),h[_].segLinks.splice(h[_].segLinks.indexOf(l.Ai),1),h.push(y),g[_]=2):3!=f[O]&&7!=f[O]||(p=null,p=3==f[O]?i._t(l.dr,l.br):Object.assign({},l.dr),(y=new _n).Ai=this.Re(),y.tr=wn.NaviNodeType_COMMON,y.ir=wn.NaviLiftType_NULL,y.entranceType=wn.NaviEntranceType_ACCESS,y.Vt=Object.assign({},p),(p=new En).setRoad(l),p.Ai=this.Ae(),b.push(p.Ai),y.segLinks=b,(b=new _n).setNode(y),v==wn.NaviRoadEntry_FORWARD?b.entranceType=wn.NaviEntranceType_ENTRANCE:v==wn.NaviRoadEntry_BACK&&(b.entranceType=wn.NaviEntranceType_EXIT),i.Lr.push(b),_=this.Jo(h,o,p.vr),p.dr=Object.assign({},b.Vt),p.pr[0]=Object.assign({},b.Vt),p.vr=b.Ai,p.jr(),w[O]=p,m[_]=b,m[_=this.Jo(h,o,p.yr)]=h[_],m[_].segLinks.splice(m[_].segLinks.indexOf(l.Ai),1,p.Ai),(p=new _n).setNode(y),l.yr=p.Ai,l.br=Object.assign({},p.Vt),l.pr[1]=Object.assign({},p.Vt),l.jr(),h[_].segLinks.splice(h[_].segLinks.indexOf(l.Ai),1),h.push(p),g[_]=2));for(var j,E=0,k=x;E<k;E++)1==f[E]&&((j=u[E])&&(w[E]=j,2!=g[_=this.Jo(h,o,j.vr)]&&(m[_]=h[_],g[_]=1),2!=g[_=this.Jo(h,o,j.yr)]&&(m[_]=h[_],g[_]=1),u[E]=null));for(var T=0;T<o;T++)1==g[T]&&(h[T]=null);for(var x=new Pn(m,w,!0,1),R=[],A=t.Yr,S=0;S<A.length;S++){var I=A[S];I&&this.tu(I,i)&&R.push(I)}return(t=x.Yr).push.apply(t,R),x}},go:function(){var t,i=Kn(this.zs);try{for(i.s();!(t=i.n()).done;)for(var n=t.value,r=n[0],e=n[1].Yr,s=0;s<e.length;s++){var o,u=e[s];wn.NaviModelPassType_PASS_NOT_THROUGH==u.pass&&((o=this.no.get(r))||(o=[],this.no.set(r,o)),o.push(u))}}catch(t){i.e(t)}finally{i.f()}},xo:function(){var t,i=Kn(this.zs);try{for(i.s();!(t=i.n()).done;)for(var n=t.value,r=n[0],e=n[1].Yr,s=0;s<e.length;s++){var o,u=e[s];wn.NaviModelPassType_NOT_PASS==u.pass&&((o=this.ro.get(r))||(o=[],this.ro.set(r,o)),o.push(u))}}catch(t){i.e(t)}finally{i.f()}},Oo:function(){var t,i=Kn(this.no);try{for(i.s();!(t=i.n()).done;)for(var n=t.value,r=n[0],e=n[1],s=this.Zo(r).qr,o=0;o<e.length;o++){for(var u=e[o],h=0;h<s.length;h++){var a,f=s[h].kr();lt.ct(f,u.Tr,u.Rr)&&(s[h].Pn=s[h].Pn*this.ao,(a=this.eo.get(u.Ai))||(a=[],this.eo.set(u.Ai,a)),a.push(s[h]))}this.No(r,u,wn.NaviRoadHinderType_HINDER_HIGH)}}catch(t){i.e(t)}finally{i.f()}},Mo:function(){var t,i=Kn(this.ro);try{for(i.s();!(t=i.n()).done;)for(var n=t.value,r=n[0],e=n[1],s=this.Zo(r).qr,o=0;o<e.length;o++)for(var u=e[o],h=0;h<s.length;h++){var a=s[h],f=a.xr,c=a.kr();if(lt.ct(c,u.Tr,u.Rr)){if(a.Pn=Number.MAX_VALUE,f==wn.NaviRoadEntry_BOTH||f==wn.NaviRoadEntry_FORWARD){var l=this.Zo(r).Jr.get(a.vr);if(l)for(var v=0;v<l.length;v++)l[v].Fe==a.yr&&(l[v].Pn=a.Pn)}if(a.xr==wn.NaviRoadEntry_BOTH||a.xr==wn.NaviRoadEntry_BACK){var d=this.Zo(r).Jr.get(a.yr);if(d)for(var y=0;y<d.length;y++)d[y].Fe==a.vr&&(d[y].Pn=a.Pn)}}}}catch(t){i.e(t)}finally{i.f()}},No:function(t,i,n){var r=this.eo.get(i.Ai);if(r){if(wn.NaviRoadHinderType_HINDER_HIGH==n)for(var e=0;e<r.length;e++){var s=r[e];if(s.jr(),s.Pn=r.length*this.ao,s.xr==wn.NaviRoadEntry_BOTH||s.xr==wn.NaviRoadEntry_FORWARD){var o=this.Zo(t).Jr.get(s.vr);if(o)for(var u=0;u<o.length;u++)o[u].Fe==s.yr&&(o[u].Pn=s.Pn)}if(s.xr==wn.NaviRoadEntry_BOTH||s.xr==wn.NaviRoadEntry_BACK){var h=this.Zo(t).Jr.get(s.yr);if(h)for(var a=0;a<h.length;a++)h[a].Fe==s.vr&&(h[a].Pn=s.Pn)}}if(wn.NaviRoadHinderType_HINDER_GENERAL==n)for(var f=0;f<r.length;f++){var c=r[f];if(c.jr(),c.xr==wn.NaviRoadEntry_BOTH||c.xr==wn.NaviRoadEntry_FORWARD){var l=this.Zo(t).Jr.get(c.vr);if(l)for(var v=0;v<l.length;v++)l[v].Fe==c.yr&&(l[v].Pn=c.Pn)}if(c.xr==wn.NaviRoadEntry_BOTH||c.xr==wn.NaviRoadEntry_BACK){var d=this.Zo(t).Jr.get(c.yr);if(d)for(var y=0;y<d.length;y++)d[y].Fe==c.vr&&(d[y].Pn=c.Pn)}}}},$o:function(t,i,n){var r=this.ps.ce(i);if(null==r)return null;for(var e=this.Zo(i).Te(t,void 0),s=(e.area,Number.MAX_VALUE),o=null,u=0;u<r.Lr.length;u++){var h,a=r.Lr[u],f=lt.vt(a.Vt,t);a.entranceType!=wn.NaviEntranceType_ACCESS&&a.entranceType!=n||f<s&&((h=this.iu(i,a.Vt))!=e&&h.pass==wn.NaviModelPassType_PASS_NOT_THROUGH||(s=f,o=a))}return o},iu:function(t,i){for(var n=null,t=this.Zo(t),r=Number.MAX_VALUE,e=Number.MAX_VALUE,s=null,o=t.Yr,u=0;u<o.length;u++){var h,a=o[u];(h=lt.nu(a.Tr,i,a.Tr.length-1))<e&&(e=h,s=a),this.vo>h&&((h=a.area)<r&&(r=h,n=a))}return null==n?s:n},tu:function(t,i){if(t.bb.isSeparate(i.bb))return!1;t=t.Dt;return!!lt.ct(t,i.Tr,i.Rr)},Yo:function(t,i,n){var r=this.do.find(function(t){return t==n.vr}),e=this.do.find(function(t){return t==n.yr});null==r&&this.do.push(n.vr),null==e&&this.do.push(n.yr);for(var s=this.ho,o=null,u=0;u<s.length;u++)if(s[u].ru==n){o=s[u];break}if(null==o)(o={}).ru=n,s.push(o);else for(;null!=o.eu;)var h=o.eu.ru,o=lt.ht(i,h.dr,h.br)?o.eu:o.su;n=o.ru;var a=new _n;a.Ai=this.Bo(),a.Vt=i;var f=new En;f.Ai=this.Bo(),f.vr=n.vr,f.dr=n.dr,f.yr=a.Ai,f.br=a.Vt,f.pr=[n.dr,a.Vt],f.gr=n.gr;var c=new En;c.Ai=this.Bo(),c.vr=a.Ai,c.dr=a.Vt,c.yr=n.yr,c.br=n.br,c.pr=[a.Vt,n.br],c.gr=n.gr,this.oo.push(f),this.oo.push(c);r={};r.ru=f;e={};e.ru=c,o.eu=r,o.su=e,a.tempType=1,f.tempType=1,c.tempType=1,f.jr(),c.jr(),f.xr=n.xr,c.xr=n.xr;e=this.Zo(t);e.Vr.push(a),e.qr.push(f),e.qr.push(c);var l,t=this.Qo(t).ps;return t.ne.set(a.Ai,e.Vr.length-1),n.xr==wn.NaviRoadEntry_BOTH&&((e=[]).push({Fe:n.vr,Pn:f.Pn}),e.push({Fe:n.yr,Pn:c.Pn}),t.Jr.set(a.Ai,e),(e=t.Jr.get(n.vr))||t.Jr.set(n.vr,e=[]),e.push({Fe:a.Ai,Pn:f.Pn}),(e=t.Jr.get(n.yr))||t.Jr.set(n.yr,e=[]),e.push({Fe:a.Ai,Pn:c.Pn})),n.xr==wn.NaviRoadEntry_FORWARD&&((l=[]).push({Fe:n.yr,Pn:c.Pn}),t.Jr.set(a.Ai,l),(l=t.Jr.get(n.vr))||t.Jr.set(n.vr,l=[]),l.push({Fe:a.Ai,Pn:f.Pn})),n.xr==wn.NaviRoadEntry_BACK&&((l=[]).push({Fe:n.vr,Pn:f.Pn}),t.Jr.set(a.Ai,l),(l=t.Jr.get(n.yr))||t.Jr.set(n.yr,l=[]),l.push({Fe:a.Ai,Pn:c.Pn})),a},ou:function(t,i){for(var n=i.length-1;0<=n;n--)if(i[n].Ai&&0<i[n].Ai)return i.splice(n+1,0,t),n+1;return-1},Wo:function(t,i,n,r){if(r)return this.Yo(t,i,n);var e=this.Zo(t),s=new _n;s.Ai=this.Re(),s.Vt=i;var o=new En;o.Ai=this.Ae(),o.vr=n.vr,o.dr=n.dr,o.yr=s.Ai,o.br=s.Vt,o.gr=n.gr,o.pr=[n.dr,s.Vt];r=new En;r.Ai=this.Ae(),r.vr=s.Ai,r.dr=s.Vt,r.yr=n.yr,r.br=n.br,r.gr=n.gr,r.pr=[s.Vt,n.br];t=[];t.push(o.Ai),t.push(r.Ai),s.segLinks=t,o.jr(),r.jr(),o.xr=n.xr,r.xr=n.xr;var u,i=e.Vr,t=e.qr,i=this.ou(s,i);return this.ou(o,t),this.ou(r,t),e.ne.set(s.Ai,i),n.xr==wn.NaviRoadEntry_BOTH&&((i=[]).push({Fe:n.vr,Pn:o.Pn}),i.push({Fe:n.yr,Pn:r.Pn}),e.Jr.set(s.Ai,i),(i=e.Jr.get(n.vr))||e.Jr.set(n.vr,i=[]),i.push({Fe:s.Ai,Pn:o.Pn}),(i=e.Jr.get(n.yr))||e.Jr.set(n.yr,i=[]),i.push({Fe:s.Ai,Pn:r.Pn})),n.xr==wn.NaviRoadEntry_FORWARD&&((u=[]).push({Fe:n.yr,Pn:r.Pn}),e.Jr.set(s.Ai,u),(u=e.Jr.get(n.vr))||e.Jr.set(n.vr,u=[]),u.push({Fe:s.Ai,Pn:o.Pn})),n.xr==wn.NaviRoadEntry_BACK&&((u=[]).push({Fe:n.vr,Pn:o.Pn}),e.Jr.set(s.Ai,u),(u=e.Jr.get(n.yr))||e.Jr.set(n.yr,u=[]),u.push({Fe:s.Ai,Pn:r.Pn})),s},uu:function(t){if(null!=t){for(var i=this.Zo(t),n=i.Vr.length-1;0<=n;n--){var r=i.Vr[n];if(null==r||0<=r.Ai)break;i.Vr.splice(n,1)}for(var e=i.qr.length-1;0<=e;e--){var s=i.qr[e];if(null==s||0<=s.Ai)break;i.qr.splice(e,1)}}},hu:function(t,i){var n=t.get(i);if(n)for(var r=0;r<n.length;r++)n[r].Fe<0&&(n.splice(r,1),r--)},au:function(t,i){for(var n=t.get(i),r=0;r<n.length;r++)this.hu(t,n[r].Fe);t.delete(i)},fu:function(t,i,n,r,e){r.cu=Number.MAX_VALUE,r.Ws=!1,r.zo=n;for(var s=Number.MAX_VALUE,o={},u=this.zs.get(t),h=Number.MAX_VALUE,a=0;a<u.qr.length;a++){var f,c=u.qr[a];null!=c&&(c.Ai<0||(c.xr!=wn.NaviRoadEntry_FORBID?!lt.gt(i,n,c.dr,c.br,o)||(f=lt.vt(i,o))<s&&(s=f,r.et=Object.assign({},o),r.vt=s,r.Gs=c,r.Ws=!0):!lt.gt(i,n,c.dr,c.br,o)||(c=lt.vt(i,o))<=h&&(h=c)))}if(r.vt>=h)return r.vt=Number.MAX_VALUE,r.Ws=!1;if(!r.Ws)return!1;for(var u=this.Zo(t),l={},v=0;v<u.Yr.length;v++){var d=u.Yr[v];if(null!=d&&d!=e&&(wn.NaviModelPassType_DECORATE!=d.pass&&(null==e||e.pass==wn.NaviModelPassType_DECORATE||!lt.ct(e.Dt,d.Tr,d.Tr.length-1))))for(var y=d.Tr.length,b=0;b<y-1;b++)if(lt.gt(i,n,d.Tr[b],d.Tr[b+1],l)){var p=lt.vt(i,l);if(p<s)return s=p,r.Zs=d,r.vt=Number.MAX_VALUE,r.Ws=!1,r.Vs=wn.NaviObstructType_MODEL,!1}}for(var m={},w=u.Xr,_=0;_<w.length;_++){for(var g=w[_],x=w[_].Cr,O=0;O<x.length;O++)for(var M=x[O],j=0;j<M.length-1;j++)if(lt.gt(i,n,M[j],M[j+1],m)){var E=lt.vt(i,m);if(E<s)return s=E,r.Zs=g,r.vt=Number.MAX_VALUE,r.Ws=!1,r.Vs=wn.NaviObstructType_EXTENT,!1}for(var k=w[_].Tr,T=0;T<k.length-1;T++)if(lt.gt(i,n,k[T],k[T+1],m)){var R=lt.vt(i,m);if(R<s)return s=R,r.Zs=g,r.vt=Number.MAX_VALUE,r.Ws=!1,r.Vs=wn.NaviObstructType_EXTENT,!1}}return!0},lu:function(t,i){return t.cu-i.cu},vu:function(t,i){return i.zo-t.zo},So:function(t){t=this.Zo(t);if(t){for(var i=t.Vr,n=t.ne,r=i.length-1;0<=r;r--){var e=i[r];if(null==e||0<=e.Ai)break;n.delete(e.Ai),i.splice(r,1)}for(var s=t.qr,o=t.re,u=s.length-1;0<=u;u--){var h=s[u];if(null==h||0<=h.Ai)break;o.delete(h.Ai),s.splice(u,1)}}},Io:function(){this.du(this.$s),this.du(this.Qs)},du:function(t){var i,n=Kn(t);try{for(n.s();!(i=n.n()).done;){var r,e=i.value[1],s=[],o=e.ps.Jr,u=Kn(o);try{for(u.s();!(r=u.n()).done;){var h=r.value;h[0]<0&&s.push(h[0])}}catch(t){u.e(t)}finally{u.f()}for(var a=0;a<s.length;a++)this.au(e.ps.Jr,s[a]);for(var f=0;f<this.do.length;f++)this.hu(o,this.do[f])}}catch(t){n.e(t)}finally{n.f()}},qo:function(t,i,n,r,e){var s=[],o={x:0,y:0};if(lt.xt(i,n.dr,n.br,o)&&this.yu(i,o,{},e)){e={};return e.et=o,e.Ws=!0,e.Gs=n,e.zo=0,e.vt=lt.vt(i,o),s.push(e),s}for(var u={x:o.x-i.x,y:o.y-i.y},h=0;h<r.length;h++){var a=r[h],f={x:a.et.x-i.x,y:a.et.y-i.y},f=lt.Tt(f,u);a.zo=f=270<f?f-360:f}r.sort(this.vu);var c,l=null;if(r[r.length-1].zo<0)return l=r[r.length-1],s.push(l),s;for(var v=0;v<r.length;v++)if(0<r[v].zo)return l=r[v],0==v?s.push(l):(c=r[v-1],lt.vt(l.et,n.dr)>lt.vt(c.et,n.dr)?(s.push(c),s.push(l)):(s.push(l),s.push(c))),s;return s},bu:function(t,i,n,r,e){for(var s=r||30,o=0;o<360;o+=s){var u=new Jn;this.fu(t,i,o,u,e),1==u.Ws&&n.push(u)}n.sort(this.lu)},Vo:function(t,i,n,r){var e=new Map,s=[];for(this.bu(t,i,s,n,r);0!=s.length;){var o=s[0],u=e.get(o.Gs.Ai);u?u.push(o):((u=[]).push(o),e.set(o.Gs.Ai,u)),s.splice(0,1)}return e},Ao:function(t,i){var n=new _n;n.Ai=this.Bo(),n.Vt=Object.assign({},i);i=this.Zo(t);return i.Vr.push(n),i.ne.set(n.Ai,i.Vr.length-1),this.Qo(t).ps=i,n},pu:function(t,i,n){if(n)return this.Ao(t,i);n=new _n;n.Ai=this.Re(),n.Vt=Object.assign({},i);i=this.Zo(t),t=i.Vr,t=this.ou(n,t);return i.ne.set(n.Ai,t),n},yu:function(t,i,n,r){for(var e,s=this.Zo(-1),o=0;o<s.Yr.length;o++)if(e=s.Yr[o],null!=e&&e!=r&&wn.NaviModelPassType_DECORATE!=e.pass)for(var u=e.Tr,h=0;h<u.length-1;h++)if(lt._t(t,i,u[h],u[h+1],n)){var a=lt.vt(t,n),f=lt.vt(i,n);if(!(a<=lt.J()||f<=lt.J()))return!1}for(var c=s.Xr,l=0;l<c.length;l++){for(var v=c[l],d=v.Cr,y=0;y<d.length;y++)for(var b=d[y],p=0;p<b.length-1;p++)if(lt._t(t,i,b[p],b[p+1],n))return!1;for(var m=v.Tr,w=0;w<m.length-1;w++)if(lt._t(t,i,m[w],m[w+1],n))return!1}return!0},Xo:function(t,i,n,r,e,s){for(var o=0;o<this.uo.length;o++){var u=this.uo[o],h={};if(1==lt._t(u.dr,u.br,i.Vt,n.Vt,h)&&lt.vt(i.Vt,h)>lt.J()&&lt.vt(n.Vt,h)>lt.J())return null}void 0===r&&(r=wn.NaviRoadEntry_BOTH),void 0===e&&(e=!0),void 0===s&&(s=!0);var a=new En;a.vr=i.Ai,a.dr=i.Vt,a.yr=n.Ai,a.br=n.Vt,a.pr=[i.Vt,n.Vt],a.gr=1,this.do.push(i.Ai),this.do.push(n.Ai),a.Ai=e?this.Bo():this.Ae(),a.xr=r,a.jr(),s&&this.uo.push(a),this.Zo(t).qr.push(a);var f,c,s=this.Qo(t);return wn.NaviRoadEntry_BOTH==r&&(t={Fe:n.Ai,Pn:a.Pn},(f=s.ps.Jr.get(i.Ai))?f.push(t):((f=[]).push(t),s.ps.Jr.set(i.Ai,f)),t={Fe:i.Ai,Pn:a.Pn},(f=s.ps.Jr.get(n.Ai))?f.push(t):((f=[]).push(t),s.ps.Jr.set(n.Ai,f))),wn.NaviRoadEntry_FORWARD==r&&(f={Fe:n.Ai,Pn:a.Pn},(c=s.ps.Jr.get(i.Ai))?c.push(f):((c=[]).push(f),s.ps.Jr(i.Ai,c))),wn.NaviRoadEntry_BACK==r&&(c={Fe:i.Ai,Pn:a.Pn},(r=s.ps.Jr.get(n.Ai))?r.push(c):((r=[]).push(c),s.ps.Jr.set(n.Ai,r))),a},Ho:function(t){var i=this.jo(t),n=this.no.get(i);if(n)for(var r=0;r<n.length;r++){var e=n[r];if(lt.ct(t,e.Tr,e.Rr))return e}return null},Zo:function(t){var i=null;return i=(i=this.mo?this.Hs.get(t):i)||this.zs.get(t)},Qo:function(t){var i=null;return i=(i=this.mo?this.$s.get(t):i)||this.Qs.get(t)},mu:function(){return this.mo?this.$s:this.Qs},Re:function(){return this.ps.Re()},Ae:function(){return this.ps.Ae()},Fo:function(t){var i=[];i.push.apply(i,tr(t.Vr));var n=[];n.push.apply(n,tr(t.qr));i=new Pn(i,n,!0,1);return(n=i.Yr).push.apply(n,tr(t.Yr)),i},Do:function(t){for(var i=[-1],n=this.ps.Hr,r=0;r<n.length;r++){var e=n[r];t.wu(e.Ut.St,e.Ut.It)&&i.push(e.Ai)}return i}});var er=g;function sr(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}function or(t){if(sr(this,or),t instanceof Number){this._u=t,this.gu=[];for(var i=0;i<t;i++)this.gu.push(null)}if(t instanceof Array){this.xu=t,this.gu=[];for(var n=0;n<t.length;n++)this.gu.push(null)}}Object.assign(or.prototype,{Ou:function(){return this.gu.length},Mu:function(t,i){if(t<0||t>=this.Ou())throw"positon is out of bounder";this.gu[t]=i},ju:function(t){var i=t;return"string"==typeof t&&(i=this.xu.indexOf(t)),this.gu[i]},Eu:function(){for(var t=[],i=0;i<this.gu.length;i++)t.push(this.gu[i]);return t},sr:function(t){if(this.gu.length!=t.gu.length)return!1;if(this.xu.length!=t.xu.length)return!1;for(var i=0;i<this.xu.length;i++)if(this.xu[i]!=t.xu[i])return!1;return!0},ku:function(){for(var t=0==this.xu.length?new or(this.gu.length):new or(this.xu),i=0;i<this.gu.length;i++)t.gu[i]=this.gu[i];return t}});function ur(t){sr(this,ur),this.xu=t,this.Tu=[]}Object.assign(ur.prototype,{Ru:function(t){if(t instanceof or){if(!new or(t.xu).sr(t))throw"the appended item is not compatible to the TupleTable";this.Tu.push(t)}else{var i,n=new or(this.xu);for(i in t){var r=this.xu.indexOf(i);0<=r&&n.Mu(r,t[i])}this.Tu.push(n)}},Au:function(t,i){for(var n=0;n<this.Tu.length;n++){var r=this.Tu[n];if(r.ju(t)==i)return r}return null},Su:function(t,i){i=i||-1;for(var n=0;n<this.Tu.length;n++)t(i<0?this.Tu[n]:this.Tu[n].ju(i))},Ou:function(){return this.Tu.length},ku:function(){for(var t=new ur(this.xu),i=0;i<this.Tu.length;i++)t.Ru(this.Tu[i].ku());return t},Iu:function(t){for(var i=0;i<this.Tu.length;i++){var n,r=!0;for(n in t)if(this.Tu[i].ju(n)!=t[n]){r=!1;break}r&&(this.Tu.splice(i,1),i--)}},Nu:function(){this.Tu=[]}});var hr=ur;function ar(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}Object.assign(function t(){ar(this,t),this.items=[]}.prototype,{Lu:function(t){this.items.push(t)},Pu:function(){return this.isEmpty()?"Underflow":this.items.shift()},Du:function(){return this.isEmpty()?"No elements in Queue":this.items[0]},Fu:function(){return 0==this.items.length},Cu:function(){for(var t="",i=0;i<this.items.length;i++)t+=this.items[i]+" ";return t}});var fr=function t(){ar(this,t),this.queue=[],this.offset=0};function cr(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}Object.assign(fr.prototype,{Uu:function(){return this.queue.length-this.offset},Fu:function(){return 0==this.queue.length},Lu:function(t){this.queue.push(t)},Pu:function(){if(0!=this.queue.length){var t=this.queue[this.offset];return 2*++this.offset>=this.queue.length&&(this.queue=this.queue.slice(this.offset),this.offset=0),t}},Bu:function(){return 0<this.queue.length?this.queue[this.offset]:void 0}});function lr(t){cr(this,lr),this.adj=t||[]}Object.assign(lr.prototype,{Gu:function(t){for(var i in this.adj)if(t==i[0])return!0;return!1},Zu:function(t){if(null==t)return null;for(var i in this.adj)if(t==this.adj[i][0])return this.adj[i][1];return null},Ru:function(t){this.adj.push(t)}});o=function t(i){for(var n in cr(this,t),this.Wu=new Map,i){var r=i[n][0];this.Wu.has(r)||this.Wu.set(r,new lr);for(var e=[],s=1;s<i[n].length;s++)e.push(i[n][s]);this.Wu.get(r).Ru(e)}};Object.assign(o.prototype,{ju:function(t){return this.Wu.has(t)?this.Wu.get(t):null},Vu:function(t,i){return this.Wu.has(t)?this.Wu.get(t).Zu(i):null},qu:function(){return this.Wu.keys},Yu:function(t,i,n){n=n||[];for(var r,e,s=this.qu(),o=1/0,u={dist:1/0,transit:null},h=0;h<s.length;h++)-1==n.indexOf(s[h])&&(r=this.Vu(t,s[h]),e=this.Vu(s[h],i),null!=r&&null!=e&&r+e<o&&(u={dist:r+e,transit:s[h]},o=r+e));return u}});var vr=o;function dr(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}function yr(t){dr(this,yr),this.Xu=t||[]}Object.assign(yr.prototype,{zu:function(t){for(var i=-1,n=0;n<this.Xu.length;n++)if(this[n]==t){i=n;break}i<0||this.Xu.splice(i,1)},Hu:function(t){for(var i=[],n=0;n<this.Xu.length;n++)i.push(this.Xu[n]);for(var r=-1,e=0;e<i.length;e++)if(i[e]==t){r=e;break}if(!(r<0))return i.splice(r,1),i},Eu:function(){for(var t=[],i=0;i<this.Xu.length;i++)t.push(this.Xu[i]);return t},Pn:function(){return this.Xu.length}});g=function t(i){dr(this,t),0!=i.length&&(this.Wu=new vr(i))};Object.assign(g.prototype,{Qu:function(t){return this.$u=t,this},Ju:function(t){return this.Ku=t,this},th:function(t){return this.Xu=t,this},ih:function(){this.Pi=this.nh(this.$u,this.Ku,this.Xu)},rh:function(){return this.Pi},nh:function(t,i,n){if(0==n.length){if(t==i)return{route:[t],dist:0};var r=this.Wu.Vu(t,i);if(null!=r)return{route:[t,i],dist:r};r=this.Wu.Yu(t,i,this.Xu);return{route:[t,r.transit,i],dist:r.dist}}for(var e=new yr(n),s=e.Eu(),o=1/0,u=[],h=0;h<e.Pn();h++){var a,f=s[h],c=this.nh(t,f,e.Hu(f));null!=c.dist&&(null==(a=this.Wu.Vu(f,i))?(a=(f=this.Wu.Yu(f,i,this.Xu)).dist)+c.dist<o&&(o=a+c.dist,c.route.push(f.transit),c.route.push(i),u=c.route):a+c.dist<o&&(o=a+c.dist,c.route.push(i),u=c.route))}return{route:u,dist:o}}});var br=g;function pr(t){return function(t){if(Array.isArray(t))return _r(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||wr(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function mr(t,i){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=wr(t))||i&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var e,s=!0,o=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return s=t.done,t},e:function(t){o=!0,e=t},f:function(){try{s||null==n.return||n.return()}finally{if(o)throw e}}}}function wr(t,i){if(t){if("string"==typeof t)return _r(t,i);var n=Object.prototype.toString.call(t).slice(8,-1);return"Map"===(n="Object"===n&&t.constructor?t.constructor.name:n)||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_r(t,i):void 0}}function _r(t,i){(null==i||i>t.length)&&(i=t.length);for(var n=0,r=new Array(i);n<i;n++)r[n]=t[n];return r}function gr(t,i){for(var n=0;n<i.length;n++){var r=i[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}o=function(){function n(t,i){!function(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}(this,n),this.Ai=t,this.qs=null,this.Ys=null,this.ps=i,this.Xs=new Map,this.zs=new Map,this.eh=null,this.sh=new Map,this.Js=[],this.Ks=Number.INT_MIN,this.to=Number.INT_MIN,this.io=-1,this.ms=null,this.ws=null,this.xs=x.MODULE_SHORTEST,this.no=new Map,this.ro=new Map,this.eo=new Map,this.so=[],this.oo=[],this.uo=[],this.ho=[],this.ao=100,this.fo=-1,this.co=15,this.vo=.1,this.oh=[],this.uh=[],this.hh=[],this._o(),this.go(),this.xo(),this.Oo(),this.Mo(),this.ah=new hr(["num","id","idx","node"]),this.fh=new Map,this.ch=new fr,this.Jn=!1,this.lh=[]}var t,i,r;return t=n,(i=[{key:"level",get:function(){return this.Ln},set:function(t){this.Ln=t}}])&&gr(t.prototype,i),r&&gr(t,r),n}();Object.assign(o.prototype,{vh:function(t){this.dh=null==t?[]:t,this.yh()},bh:function(t){var i;t instanceof _n?(this.ms=t,this.ah.Ru({num:this.ah.Ou(),id:t.Ai,idx:this.ps.Ce(t.Ai),node:t})):(i=new _n,this.ph(t,i)||this.uh.push(t),this.ms=i,this.ah.Ru({num:this.ah.Ou(),id:i.Ai,idx:this.ps.Ce(i.Ai),node:i}))},mh:function(t){var i;t instanceof _n?(this.ws=t,this.ah.Ru({num:this.ah.Ou(),id:t.Ai,idx:this.ps.Ce(t.Ai),node:t})):(i=new _n,this.ph(t,i)||this.uh.push(t),this.ws=i,this.ah.Ru({num:this.ah.Ou(),id:i.Ai,idx:this.ps.Ce(i.Ai),node:i}))},wh:function(t,i){for(var n=0,r=0;r<i.length;r++){var e=(t.x-i[r].x)*(t.x-i[r].x)+(t.y-i[r].y)*(t.y-i[r].y);n+=Math.sqrt(e)}return n},_h:function(){for(var t=this.ps.ze(),i=0;i<t.length;i++)t[i].$n=this.wh(t[i].Vt,this.gh().dh),t[i].$n+=this.wh(t[i].Vt,this.dh),t[i].$n=t[i].$n/(0==this.gh().dh.length?1:this.gh().dh.length),t[i].ir==wn.NaviLiftType_Escalator&&(t[i].$n-=25),t[i].ir==wn.NaviLiftType_Lift&&(t[i].$n-=25);t.sort(function(t,i){return t.$n-i.$n});for(var n=this.Ln-this.gh().Ln<0,r=0;r<t.length;r++){var e=t[r];if(n){if(e.nr==wn.NaviLiftEntry_DOWN||e.nr==wn.NaviLiftEntry_FORBID)continue}else if(e.nr==wn.NaviLiftEntry_UP||e.nr==wn.NaviLiftEntry_FORBID)continue;if(-1!=e.qn.indexOf(this.gh().Ln)&&this.gh().xh(e.Xn))return e}return null},Oh:function(t){for(var i=this.ps.ze(),n=t.Ln,r=this.Ln,e=0;e<i.length;e++){var s=i[e];if((wn.NaviLiftType_Stair==s.ir||-1!=s.qn.indexOf(n))&&null!=t.xh(s.Xn))if(s.nr!=wn.NaviLiftEntry_UP){if(s.nr!=wn.NaviLiftEntry_DOWN){if(s.nr==wn.NaviLiftEntry_BOTH)return{related:!0,dist:Math.abs(r-n)}}else if(n<r)return{related:!0,dist:Math.abs(r-n)}}else if(r<n)return{related:!0,dist:Math.abs(r-n)}}return{related:!1,dist:1/0}},xh:function(t){0==this.lh.length&&(this.lh=this.ps.ze());for(var i=0;i<this.lh.length;i++)if(this.lh[i].Xn==t)return this.lh[i];return null},Mh:function(t){var i=this.ps.Xr[0].Tr;return!!lt.ct(t,i,i.length-1)},Ps:function(){return this.Js},pi:function(){this.qs=null,this.Ys=null,this.ps.pi(),this.ps=null,this.Xs.clear(),this.Xs=null;var t,i=mr(this.zs);try{for(i.s();!(t=i.n()).done;)t.value[1].pi()}catch(t){i.e(t)}finally{i.f()}this.zs.clear(),(this.zs=null)!=this.eh&&(this.eh.pi(),this.eh=null),this.sh.each(function(t,i){i.pi()}),this.sh.clear(),this.sh=null,this.Js=[],this.ms=null,this.ws=null,this.no.clear(),this.no=null,this.ro.clear(),this.ro=null,this.eo.clear(),this.ro=null,this.so=[],this.oo=[],this.uo=[],this.ho=[]},ln:function(){this.Js=[],this.So(-1),this.So(this.Ks),this.Ks=Number.INT_MIN,this.So(this.to),this.to=Number.INT_MIN,this.Io(),this.oh=[],this.io=-1;for(var t=0;t<this.so.length;t++){var i=this.so[t];this.No(i.Lo,i.Zs,wn.NaviRoadHinderType_HINDER_HIGH)}this.so=[],this.oo=[],this.uo=[],this.ho=[]},jh:function(t){this.ch.Lu(t)},gh:function(){return this.ch.Bu()},Eh:function(){return this.ch.Pu()},kh:function(){var o=this;this.Th=[],this.ah.Su(function(t){var i=t.ju("node"),t=o.ah.ku();t.Iu({node:i});var n=[];t.Su(function(t){n.push(t.ju("id"))}),o.sh.get(-1).Es(i.Ai,n,o.xs);for(var r=o.sh.get(-1).As(),e=0;e<r.length;e++){var s=r[e];o.Th.push([i.Ai,s[s.length-1].Ai,function(t){for(var i=0,n=0;n<t.length-1;n++){var r=t[n].Vt.x-t[n+1].Vt.x,e=t[n].Vt.y-t[n+1].Vt.y;i+=Math.sqrt(r*r+e*e)}return i}(s),s])}})},Rh:function(){this.Pi=[];for(var t=function(t,i){for(var n=0;n<this.length;n++)if(this[n][0]==t&&this[n][1]==i)return this[n]},i=0;i<this.ih.route.length-1;i++)for(var n=this.ih.route[i],r=this.ih.route[i+1],e=t.apply(this.Th,[n,r]),s=0;s<e[3].length;s++)this.Pi.push(e[3][s])},rh:function(){return this.Pi},Go:function(t){var i=this.ps.ue(t);if(-1==i)return null;var n=this.Ah(t),r=this.zs.get(n).findModel(t,-0);if(null==r)return{mr:i,Zs:null};if(r.pass==wn.NaviModelPassType_PASS_THROUGH||r.pass==wn.NaviModelPassType_PASS_NOT_THROUGH){if(0<r.Ur.length)return{mr:i,Zs:r};for(var e={},s=[],o=[],u=this.zs.get(n).qr,h=!0,a=0;a<r.Rr;a++)for(var f=r.Tr[a],c=r.Tr[a+1],l=0;l<u.length;l++){var v=u[l];1==lt._t(f,c,v.dr,v.br,e)&&(h=!1,wn.NaviRoadEntry_FORBID!=v.xr&&((v=new Object).x=e.x,v.y=e.y,s.push(v),o.push(u[l])))}if(h)return{mr:i,Zs:r};if(0==s.length)return null;r.Ur=[],r.Gr=[],r.Br=[];for(var d=0;d<s.length;d++){var y=s[d],b=o[d],y=this.Wo(n,y,b);y.tr=wn.NaviNodeType_COMMON,b.xr==wn.NaviRoadEntry_BOTH?y.entranceType=wn.NaviEntranceType_ACCESS:lt.ct(b.dr,r.Tr,r.Rr)?(b.xr==wn.NaviRoadEntry_FORWARD&&(y.entranceType=wn.NaviEntranceType_EXIT),b.xr==wn.NaviRoadEntry_BACK&&(y.entranceType=wn.NaviEntranceType_ENTRANCE)):(b.xr==wn.NaviRoadEntry_FORWARD&&(y.entranceType=wn.NaviEntranceType_ENTRANCE),b.xr==wn.NaviRoadEntry_BACK&&(y.entranceType=wn.NaviEntranceType_EXIT)),r.Ur.push(y),r.Gr.push(y.entranceType),r.Br.push(y.tr)}}return r.pass!=wn.NaviModelPassType_NOT_PASS?{mr:i,Zs:r}:null},Eo:function(t,i){var n=this;this.ms=this.Ao(this.Ks,t);var r=null,e=!0,r=null!=this.qs&&this.qs.pass==wn.NaviModelPassType_PASS_THROUGH&&0==this.qs.Ur.length?this.Vo(this.Ks,t,i,30,this.qs):this.Vo(this.Ks,t,i);if(null==this.qs&&(e=!1),0<r.size){var s,e=!1,o=mr(r);try{for(o.s();!(s=o.n()).done;)for(var u=s.value[1],h=0;h<u.length;h++)0!=u[h].Gs.xr&&(e=!0)}catch(t){o.e(t)}finally{o.f()}var a,f=!1,c=[],l=mr(r);try{for(l.s();!(a=l.n()).done;){var v,d=a.value[1],y=d[0].Gs,b=this.qo(this.Ks,t,y,d,this.qs);if(0==b.length){var p,m=mr(d);try{for(m.s();!(p=m.n()).done;){var w=p.value,_=this.Yo(this.Ks,w.et,w.Gs);this.Xo(this.Ks,this.ms,_)}}catch(t){m.e(t)}finally{m.f()}}else Math.abs(b[0].zo)>lt.J()?c.push.apply(c,pr(b)):(f=!0,v=this.Yo(this.Ks,b[0].et,b[0].Gs),this.Xo(this.Ks,this.ms,v))}}catch(t){l.e(t)}finally{l.f()}f||c.forEach(function(t){t=n.Yo(n.Ks,t.et,t.Gs);n.Xo(n.Ks,n.ms,t)})}if(e&&null!=this.qs&&0<this.qs.Ur.length){for(var g=!1,x=0;x<this.qs.Ur.length;x++){var O=this.qs.Ur[x],M=this.qs.Gr[x];M!=wn.NaviEntranceType_EXIT&&M!=wn.NaviEntranceType_ACCESS||(this.Xo(this.Ks,this.ms,O),g=!0)}if(!g)return I.ROUTE_FAILED_NO_DATA_START}},ko:function(t,i){var n=this;this.ws=this.Ao(this.to,t);var r=null,e=!0,r=null!=this.Ys&&this.Ys.pass==wn.NaviModelPassType_PASS_THROUGH&&0==this.Ys.Ur.length?this.Vo(this.to,t,i,30,this.Ys):this.Vo(this.to,t,i);if(null==this.Ys&&(e=!1),0<r.size){var s,e=!1,o=mr(r);try{for(o.s();!(s=o.n()).done;)for(var u=s.value[1],h=0;h<u.length;h++)0!=u[h].Gs.xr&&(e=!0)}catch(t){o.e(t)}finally{o.f()}var a,f=!1,c=[],l=mr(r);try{for(l.s();!(a=l.n()).done;){var v,d=a.value[1],y=d[0].Gs,b=this.qo(this.to,t,y,d,this.Ys);if(0==b.length){var p,m=mr(d);try{for(m.s();!(p=m.n()).done;){var w=p.value,_=this.Yo(this.to,w.et,w.Gs);this.Xo(this.to,this.ws,_)}}catch(t){m.e(t)}finally{m.f()}}else Math.abs(b[0].zo)>lt.J()?c.push.apply(c,pr(b)):(f=!0,v=this.Yo(this.to,b[0].et,b[0].Gs),this.Xo(this.to,this.ws,v))}}catch(t){l.e(t)}finally{l.f()}f||c.forEach(function(t){t=n.Yo(n.to,t.et,t.Gs);n.Xo(n.to,n.ws,t)})}if(e&&null!=this.Ys&&0<this.Ys.Ur.length){for(var g=!1,x=0;x<this.Ys.Ur.length;x++){var O=this.Ys.Ur[x],M=this.Ys.Gr[x];M!=wn.NaviEntranceType_EXIT&&M!=wn.NaviEntranceType_ACCESS||(this.Xo(this.to,this.ws,O),g=!0)}if(!g)return I.ROUTE_FAILED_NO_DATA_DEST}},ph:function(t,i,n){var r=this,e=null,s=!0,o={x:(t=t instanceof Array&&2==t.length?{x:t[0],y:t[1]}:t).x,y:t.y},u=this.ps.We(t),h=this.ps.Ve(t),a=this.Ao(h,t);if(a.Sh=void 0!==n&&n,Object.assign(i,a),null==u&&(s=!1),0<(e=null!=u&&u.pass==wn.NaviModelPassType_PASS_THROUGH&&0==u.Ur.length?this.Vo(h,t,o,30,u):this.Vo(h,t,o)).size){var f,s=!1,c=mr(e);try{for(c.s();!(f=c.n()).done;)for(var l=f.value[1],v=0;v<l.length;v++)0!=l[v].Gs.xr&&(s=!0)}catch(t){c.e(t)}finally{c.f()}var d,y=!1,b=[],p=mr(e);try{for(p.s();!(d=p.n()).done;){var m,w=d.value[1],_=w[0].Gs,g=this.qo(h,t,_,w,u);if(0==g.length){var x,O=mr(w);try{for(O.s();!(x=O.n()).done;){var M=x.value,j=this.Yo(h,M.et,M.Gs);this.Xo(h,i,j)}}catch(t){O.e(t)}finally{O.f()}}else Math.abs(g[0].zo)>lt.J()?b.push.apply(b,pr(g)):(y=!0,m=this.Yo(h,g[0].et,g[0].Gs),this.Xo(h,i,m))}}catch(t){p.e(t)}finally{p.f()}y||b.forEach(function(t){t=r.Yo(h,t.et,t.Gs);r.Xo(h,i,t)})}if(s&&null!=u&&0<u.Ur.length){for(var E=!1,k=0;k<u.Ur.length;k++){var T=u.Ur[k],R=u.Gr[k];R!=wn.NaviEntranceType_EXIT&&R!=wn.NaviEntranceType_ACCESS||(this.Xo(h,i,T),E=!0)}if(!E)return!1}return!0},Ls:function(){var t=this.Ho(this.ms.Vt);t&&(this.No(this.Ks,t,wn.NaviRoadHinderType_HINDER_GENERAL),this.so.push({Lo:this.Ks,Zs:t}));t=this.Ho(this.ws.Vt);if(t&&(this.No(this.to,t,wn.NaviRoadHinderType_HINDER_GENERAL),this.so.push({Lo:this.to,Zs:t})),this.Js=[],this.Ks==this.to){var i=this.sh.get(this.Ks),n=i.Ls(this.ms,this.ws,this.xs);if(n!=I.ROUTE_SUCCESS)return n;var r=i.Ps();this.Js=[],r.reverse(),(n=this.Js).push.apply(n,pr(r))}else{if(-1!=this.Ks&&-1==this.to){var i=this.$o(this.ms.Vt,this.Ks,wn.NaviEntranceType_EXIT),n=this.sh.get(this.Ks),r=n.Ls(this.ms,i,this.xs);if(r!=I.ROUTE_SUCCESS)return r;var e=n.Ps(e),n=this.sh.get(-1);if((r=n.Ls(i,this.ws,this.xs))!=I.ROUTE_SUCCESS)return r;r=n.Ps();e.reverse(),r.reverse(),(n=this.Js).push.apply(n,pr(e)),(e=this.Js).push.apply(e,pr(r))}if(-1==this.Ks&&-1!=this.to){var s=this.$o(this.ws.Vt,this.to,wn.NaviEntranceType_ENTRANCE),o=this.sh.get(this.to),u=o.Ls(s,this.ws,this.xs);if(u!=I.ROUTE_SUCCESS)return u;var h=o.Ps(),o=this.sh.get(-1);if((u=o.Ls(this.ms,s,this.xs))!=I.ROUTE_SUCCESS)return u;s=o.Ps();s.reverse(),h.reverse(),(u=this.Js).push.apply(u,pr(s)),(o=this.Js).push.apply(o,pr(h))}if(-1!=this.Ks&&-1!=this.to){var u=this.$o(this.ms.Vt,this.Ks,wn.NaviEntranceType_EXIT),s=this.sh.get(this.Ks),o=s.Ls(this.ms,u,this.xs);if(o!=I.ROUTE_SUCCESS)return o;var a=s.Ps(a),h=this.$o(this.ws.Vt,this.to,wn.NaviEntranceType_ENTRANCE),s=this.sh.get(this.to);if((o=s.Ls(h,this.ws,this.xs))!=I.ROUTE_SUCCESS)return o;var f=s.Ps(f),s=this.sh.get(-1);if((o=s.Ls(u,h,this.xs))!=I.ROUTE_SUCCESS)return o;o=s.Ps();a.reverse(),o.reverse(),f.reverse(),(s=this.Js).push.apply(s,pr(a)),(a=this.Js).push.apply(a,pr(o)),(o=this.Js).push.apply(o,pr(f))}}return I.ROUTE_SUCCESS},Jo:function(t,i,n){for(var r=0;r<i;r++)if(null!=t[r]&&t[r].Ai==n)return r;return-1},Ah:function(t){for(var i=this.ps.Hr,n=0;n<i.length;n++){var r=i[n];if(r.Dr(t))return r.Ai}return-1},_o:function(){for(var t=this.ps.Hr,i=0;i<t.length;i++){var n=t[i],r=this.Ko(this.ps,n);this.zs.set(n.Ai,r)}this.zs.set(-1,this.ps);var e,s=mr(this.zs);try{for(s.s();!(e=s.n()).done;){var o=e.value;o[1].oe(),this.sh.set(o[0],new Yn(o[1]))}}catch(t){s.e(t)}finally{s.f()}},Ko:function(t,i){if(t&&i){for(var n,r=0,e=0,s=t.qr.length,o=t.Vr.length,u=t.qr,h=t.Vr,a=0,f=new Int8Array(s),c=0;c<s;c++)u[c]&&u[c].xr!=wn.NaviRoadEntry_FORBID&&(n=u[c],r=i.contain(n.dr),e=i.contain(n.br),0==r&&0==e||(a=!0),1==r&&1==e&&(f[c]=1),1==r&&0==e&&(f[c]=2),0==r&&1==e&&(f[c]=3),0==r&&0==e&&(f[c]=4),2==r&&0==e&&(f[c]=6),2==r&&1==e&&(f[c]=7),0==r&&2==e&&(f[c]=8),1==r&&2==e&&(f[c]=9));if(0==a)return null;for(var l,v,d,y,b,p,m=new Array(o),w=new Array(s),_=0,g=new Int8Array(o),x=f.length,O=0,M=x;O<M;O++)0!=f[O]&&6!=f[O]&&8!=f[O]&&1!=f[O]&&u[O]&&(v=(l=u[O]).xr,b=[l.Ai],2==f[O]||9==f[O]?(d=null,d=2==f[O]?i._t(l.dr,l.br):Object.assign({},l.br),(p=new _n).Ai=this.ps.Re(),p.tr=wn.NaviNodeType_COMMON,p.ir=wn.NaviLiftType_NULL,p.entranceType=wn.NaviEntranceType_ACCESS,p.Vt=Object.assign({},d),(y=new En).setRoad(l),y.Ai=this.ps.Ae(),b.push(y.Ai),p.segLinks=b,(d=new _n).setNode(p),v==wn.NaviRoadEntry_FORWARD?d.entranceType=wn.NaviEntranceType_EXIT:v==wn.NaviRoadEntry_BACK&&(d.entranceType=wn.NaviEntranceType_ENTRANCE),i.Lr.push(d),_=this.Jo(h,o,y.yr),y.br=Object.assign({},d.Vt),y.pr[1]=Object.assign({},d.Vt),y.yr=d.Ai,y.jr(),w[O]=y,m[_]=d,m[_=this.Jo(h,o,y.vr)]=h[_],m[_].segLinks.splice(m[_].segLinks.indexOf(l.Ai),1,y.Ai),(y=new _n).setNode(p),l.vr=y.Ai,l.dr=Object.assign({},y.Vt),l.pr[0]=Object.assign({},y.Vt),l.jr(),h[_].segLinks.splice(h[_].segLinks.indexOf(l.Ai),1),h.push(y),g[_]=2):3!=f[O]&&7!=f[O]||(p=null,p=3==f[O]?i._t(l.dr,l.br):Object.assign({},l.dr),(y=new _n).Ai=this.ps.Re(),y.tr=wn.NaviNodeType_COMMON,y.ir=wn.NaviLiftType_NULL,y.entranceType=wn.NaviEntranceType_ACCESS,y.Vt=Object.assign({},p),(p=new En).setRoad(l),p.Ai=this.ps.Ae(),b.push(p.Ai),y.segLinks=b,(b=new _n).setNode(y),v==wn.NaviRoadEntry_FORWARD?b.entranceType=wn.NaviEntranceType_ENTRANCE:v==wn.NaviRoadEntry_BACK&&(b.entranceType=wn.NaviEntranceType_EXIT),i.Lr.push(b),_=this.Jo(h,o,p.vr),p.dr=Object.assign({},b.Vt),p.pr[0]=Object.assign({},b.Vt),p.vr=b.Ai,p.jr(),w[O]=p,m[_]=b,m[_=this.Jo(h,o,p.yr)]=h[_],m[_].segLinks.splice(m[_].segLinks.indexOf(l.Ai),1,p.Ai),(p=new _n).setNode(y),l.yr=p.Ai,l.br=Object.assign({},p.Vt),l.pr[1]=Object.assign({},p.Vt),l.jr(),h[_].segLinks.splice(h[_].segLinks.indexOf(l.Ai),1),h.push(p),g[_]=2));for(var j,E=0,k=x;E<k;E++)1==f[E]&&((j=u[E])&&(w[E]=j,2!=g[_=this.Jo(h,o,j.vr)]&&(m[_]=h[_],g[_]=1),2!=g[_=this.Jo(h,o,j.yr)]&&(m[_]=h[_],g[_]=1),u[E]=null));for(var T=0;T<o;T++)1==g[T]&&(h[T]=null);for(var x=new Pn(m,w,!0,1),R=[],A=t.Yr,S=0;S<A.length;S++){var I=A[S];I&&this.tu(I,i)&&R.push(I)}return(t=x.Yr).push.apply(t,R),x}},go:function(){var t,i=mr(this.zs);try{for(i.s();!(t=i.n()).done;)for(var n=t.value,r=n[0],e=n[1].Yr,s=0;s<e.length;s++){var o,u=e[s];wn.NaviModelPassType_PASS_NOT_THROUGH==u.pass&&((o=this.no.get(r))||(o=[],this.no.set(r,o)),o.push(u))}}catch(t){i.e(t)}finally{i.f()}},xo:function(){var t,i=mr(this.zs);try{for(i.s();!(t=i.n()).done;)for(var n=t.value,r=n[0],e=n[1].Yr,s=0;s<e.length;s++){var o,u=e[s];wn.NaviModelPassType_NOT_PASS==u.pass&&((o=this.ro.get(r))||(o=[],this.ro.set(r,o)),o.push(u))}}catch(t){i.e(t)}finally{i.f()}},Oo:function(){var t,i=mr(this.no);try{for(i.s();!(t=i.n()).done;)for(var n=t.value,r=n[0],e=n[1],s=this.zs.get(r).qr,o=0;o<e.length;o++){for(var u=e[o],h=0;h<s.length;h++){var a,f=s[h].kr();lt.ct(f,u.Tr,u.Rr)&&(s[h].Pn=s[h].Pn*this.ao,(a=this.eo.get(u.Ai))||(a=[],this.eo.set(u.Ai,a)),a.push(s[h]))}this.No(r,u,wn.NaviRoadHinderType_HINDER_HIGH)}}catch(t){i.e(t)}finally{i.f()}},yh:function(){for(var t=0;t<this.dh.length;t++){var i=new _n;this.ph(this.dh[t],i,!0)?(this.hh.push(i),this.ah.Ru({num:this.ah.Ou(),id:i.Ai,idx:this.ps.Ce(i.Ai),node:i})):this.uh.push(this.dh[t])}},Mo:function(){var t,i=mr(this.ro);try{for(i.s();!(t=i.n()).done;)for(var n=t.value,r=n[0],e=n[1],s=this.zs.get(r).qr,o=0;o<e.length;o++)for(var u=e[o],h=0;h<s.length;h++){var a=s[h],f=a.xr,c=a.kr();if(lt.ct(c,u.Tr,u.Rr-1)){if(a.Pn=Number.MAX_VALUE,f==wn.NaviRoadEntry_BOTH||f==wn.NaviRoadEntry_FORWARD){var l=this.zs.get(r).Jr.get(a.vr);if(l)for(var v=0;v<l.length;v++)l[v].Fe==a.yr&&(l[v].Pn=a.Pn)}if(a.xr==wn.NaviRoadEntry_BOTH||a.xr==wn.NaviRoadEntry_BACK){var d=this.zs.get(r).Jr.get(a.yr);if(d)for(var y=0;y<d.length;y++)d[y].Fe==a.vr&&(d[y].Pn=a.Pn)}}}}catch(t){i.e(t)}finally{i.f()}},No:function(t,i,n){var r=this.eo.get(i.Ai);if(r){if(wn.NaviRoadHinderType_HINDER_HIGH==n)for(var e=0;e<r.length;e++){var s=r[e];if(s.jr(),s.Pn=r.length*this.ao,s.xr==wn.NaviRoadEntry_BOTH||s.xr==wn.NaviRoadEntry_FORWARD){var o=this.zs.get(t).Jr.get(s.vr);if(o)for(var u=0;u<o.length;u++)o[u].Fe==s.yr&&(o[u].Pn=s.Pn)}if(s.xr==wn.NaviRoadEntry_BOTH||s.xr==wn.NaviRoadEntry_BACK){var h=this.zs.get(t).Jr.get(s.yr);if(h)for(var a=0;a<h.length;a++)h[a].Fe==s.vr&&(h[a].Pn=s.Pn)}}if(wn.NaviRoadHinderType_HINDER_GENERAL==n)for(var f=0;f<r.length;f++){var c=r[f];if(c.jr(),c.xr==wn.NaviRoadEntry_BOTH||c.xr==wn.NaviRoadEntry_FORWARD){var l=this.zs.get(t).Jr.get(c.vr);if(l)for(var v=0;v<l.length;v++)l[v].Fe==c.yr&&(l[v].Pn=c.Pn)}if(c.xr==wn.NaviRoadEntry_BOTH||c.xr==wn.NaviRoadEntry_BACK){var d=this.zs.get(t).Jr.get(c.yr);if(d)for(var y=0;y<d.length;y++)d[y].Fe==c.vr&&(d[y].Pn=c.Pn)}}}},$o:function(t,i,n){var r=this.ps.getZone(i);if(null==r)return null;for(var e=this.zs.get(i).Te(t,void 0),s=(e.area,Number.MAX_VALUE),o=null,u=0;u<r.Lr.length;u++){var h,a=r.Lr[u],f=lt.vt(a.Vt,t);a.entranceType!=wn.NaviEntranceType_ACCESS&&a.entranceType!=n||f<s&&((h=this.iu(i,a.Vt))!=e&&h.pass==wn.NaviModelPassType_PASS_NOT_THROUGH||(s=f,o=a))}return o},iu:function(t,i){for(var n=null,t=this.zs.get(t),r=Number.MAX_VALUE,e=Number.MAX_VALUE,s=null,o=t.Yr,u=0;u<o.length;u++){var h,a=o[u];(h=lt.ct(i,a.Tr,a.Tr.length-1))<e&&(e=h,s=a),this.vo>h&&((h=a.area)<r&&(r=h,n=a))}return null==n?s:n},tu:function(t,i){if(t.bb.isSeparate(i.bb))return!1;t=t.Dt;return!!lt.ct(t,i.Tr,i.Rr)},Yo:function(t,i,n){var r=this.oh.find(function(t){return t==n.vr}),e=this.oh.find(function(t){return t==n.yr});null==r&&this.oh.push(n.vr),null==e&&this.oh.push(n.yr);for(var s=this.ho,o=null,u=0;u<s.length;u++)if(s[u].ru==n){o=s[u];break}if(null==o)(o={}).ru=n,s.push(o);else for(;null!=o.eu;)var h=o.eu.ru,o=lt.ht(i,h.dr,h.br)?o.eu:o.su;n=o.ru;var a=new _n;a.Ai=this.Ih(),a.Vt=i;var f=new En;f.Ai=this.Ih(),f.vr=n.vr,f.dr=n.dr,f.yr=a.Ai,f.br=a.Vt,f.pr=[n.dr,a.Vt];var c=new En;c.Ai=this.Ih(),c.vr=a.Ai,c.dr=a.Vt,c.yr=n.yr,c.br=n.br,c.pr=[a.Vt,n.br],this.oo.push(f),this.oo.push(c);r={};r.ru=f;e={};e.ru=c,o.eu=r,o.su=e,a.tempType=1,f.tempType=1,c.tempType=1,f.jr(),c.jr(),f.xr=n.xr,c.xr=n.xr;e=this.zs.get(t);e.Vr.push(a),e.qr.push(f),e.qr.push(c);var l,t=this.sh.get(t).ps;return t.ne.set(a.Ai,e.Vr.length-1),n.xr==wn.NaviRoadEntry_BOTH&&((e=[]).push({Fe:n.vr,Pn:f.Pn}),e.push({Fe:n.yr,Pn:c.Pn}),t.Jr.set(a.Ai,e),(e=t.Jr.get(n.vr))||t.Jr.set(n.vr,e=[]),e.push({Fe:a.Ai,Pn:f.Pn}),(e=t.Jr.get(n.yr))||t.Jr.set(n.yr,e=[]),e.push({Fe:a.Ai,Pn:c.Pn})),n.xr==wn.NaviRoadEntry_FORWARD&&((l=[]).push({Fe:n.yr,Pn:c.Pn}),t.Jr.set(a.Ai,l),(l=t.Jr.get(n.vr))||t.Jr.set(n.vr,l=[]),l.push({Fe:a.Ai,Pn:f.Pn})),n.xr==wn.NaviRoadEntry_BACK&&((l=[]).push({Fe:n.vr,Pn:f.Pn}),t.Jr.set(a.Ai,l),(l=t.Jr.get(n.yr))||t.Jr.set(n.yr,l=[]),l.push({Fe:a.Ai,Pn:c.Pn})),a},ou:function(t,i){for(var n=i.length-1;0<=n;n--)if(i[n].Ai&&0<i[n].Ai)return i.splice(n+1,0,t),n+1;return-1},Wo:function(t,i,n,r){if(r)return this.Yo(t,i,n);var e=this.zs.get(t),s=new _n;s.Ai=e.Re(),s.Vt=i;var o=new En;o.Ai=e.Ae(),o.vr=n.vr,o.dr=n.dr,o.yr=s.Ai,o.br=s.Vt,o.pr=[n.dr,s.Vt];r=new En;r.Ai=e.Ae(),r.vr=s.Ai,r.dr=s.Vt,r.yr=n.yr,r.br=n.br,r.pr=[s.Vt,n.br];t=[];t.push(o.Ai),t.push(r.Ai),s.segLinks=t,o.jr(),r.jr(),o.xr=n.xr,r.xr=n.xr;var u,i=e.Vr,t=e.qr,i=this.ou(s,i);return this.ou(o,t),this.ou(r,t),e.ne.set(s.Ai,i),n.xr==wn.NaviRoadEntry_BOTH&&((i=[]).push({Fe:n.vr,Pn:o.Pn}),i.push({Fe:n.yr,Pn:r.Pn}),e.Jr.set(s.Ai,i),(i=e.Jr.get(n.vr))||e.Jr.set(n.vr,i=[]),i.push({Fe:s.Ai,Pn:o.Pn}),(i=e.Jr.get(n.yr))||e.Jr.set(n.yr,i=[]),i.push({Fe:s.Ai,Pn:r.Pn})),n.xr==wn.NaviRoadEntry_FORWARD&&((u=[]).push({Fe:n.yr,Pn:r.Pn}),e.Jr.set(s.Ai,u),(u=e.Jr.get(n.vr))||e.Jr.set(n.vr,u=[]),u.push({Fe:s.Ai,Pn:o.Pn})),n.xr==wn.NaviRoadEntry_BACK&&((u=[]).push({Fe:n.vr,Pn:o.Pn}),e.Jr.set(s.Ai,u),(u=e.Jr.get(n.yr))||e.Jr.set(n.yr,u=[]),u.push({Fe:s.Ai,Pn:r.Pn})),s},uu:function(t){if(null!=t){for(var i=this.zs.get(t),n=i.Vr.length-1;0<=n;n--){var r=i.Vr[n];if(null==r||0<=r.Ai)break;i.Vr.splice(n,1)}for(var e=i.qr.length-1;0<=e;e--){var s=i.qr[e];if(null==s||0<=s.Ai)break;i.qr.splice(e,1)}}},hu:function(t,i){var n=t.get(i);if(n)for(var r=0;r<n.length;r++)n[r].Fe<0&&(n.splice(r,1),r--)},au:function(t,i){for(var n=t.get(i),r=0;r<n.length;r++)this.hu(t,n[r].Fe);t.delete(i)},Nh:function(t,i,n,r,e,s){e.cu=Number.MAX_VALUE,e.Ws=!1,e.zo=n;for(var o=Number.MAX_VALUE,u={},h=this.zs.get(t),a=0;a<h.qr.length;a++){var f,c=h.qr[a];null!=c&&(c.Ai<0||!lt.At(i,n,c.dr,c.br,u)||(f=lt.vt(i,u))<o&&(o=f,e.et=Object.assign({},u),e.vt=o,e.Gs=c,e.Ws=!0))}if(!e.Ws)return!1;for(var h=this.zs.get(-1),l={},v=0;v<h.Yr.length;v++){var d=h.Yr[v];if(null!=d&&d!=s&&(wn.NaviModelPassType_DECORATE!=d.pass&&(null==s||s.pass==wn.NaviModelPassType_DECORATE||!lt.ct(s.Dt,d.Tr,d.Tr.length-1))))for(var y=d.Tr.length,b=0;b<y-1;b++)if(lt.At(i,n,d.Tr[b],d.Tr[b+1],l)){var p=lt.vt(i,l);if(p<o)return o=p,e.Zs=d,e.vt=Number.MAX_VALUE,e.Ws=!1,e.Vs=wn.NaviObstructType_MODEL,!1}}for(var m={},w=h.Xr,_=0;_<w.length;_++){for(var g=w[_],x=w[_].Cr,O=0;O<x.length;O++)for(var M=x[O],j=0;j<M.length-1;j++)if(lt.At(i,n,M[j],M[j+1],m)){var E=lt.vt(i,m);if(E<o)return o=E,e.Zs=g,e.vt=Number.MAX_VALUE,e.Ws=!1,e.Vs=wn.NaviObstructType_EXTENT,!1}for(var k=w[_].Tr,T=0;T<k.length-1;T++)if(lt.At(i,n,k[T],k[T+1],m)){var R=lt.vt(i,m);if(R<o)return o=R,e.Zs=g,e.vt=Number.MAX_VALUE,e.Ws=!1,e.Vs=wn.NaviObstructType_EXTENT,!1}}return e.cu=lt.vt(e.et,r),!0},lu:function(t,i){return t.cu-i.cu},vu:function(t,i){return i.zo-t.zo},So:function(t){t=this.zs.get(t);if(t){for(var i=t.Vr,n=t.ne,r=i.length-1;0<=r;r--){var e=i[r];if(null==e||0<=e.Ai)break;n.delete(e.Ai),i.splice(r,1)}for(var s=t.qr,o=t.re,u=s.length-1;0<=u;u--){var h=s[u];if(null==h||0<=h.Ai)break;o.delete(h.Ai),s.splice(u,1)}}},Io:function(){var t,i=mr(this.sh);try{for(i.s();!(t=i.n()).done;){var n,r=t.value[1],e=[],s=r.ps.Jr,o=mr(s);try{for(o.s();!(n=o.n()).done;){var u=n.value;u[0]<0&&e.push(u[0])}}catch(t){o.e(t)}finally{o.f()}for(var h=0;h<e.length;h++)this.au(r.ps.Jr,e[h]);for(var a=0;a<this.oh.length;a++)this.hu(s,this.oh[a])}}catch(t){i.e(t)}finally{i.f()}},qo:function(t,i,n,r,e){for(var s=[],o=0;o<r.length;o++)if(r[o].vt<lt.J())return s.push(r[o]),s;var u={x:0,y:0};if(lt.xt(i,n.dr,n.br,u)&&this.yu(i,u,{},e)){e={};return e.et=u,e.Ws=!0,e.Gs=n,e.zo=0,e.dist=lt.vt(i,u),s.push(e),s}for(var h={x:u.x-i.x,y:u.y-i.y},a=0;a<r.length;a++){var f=r[a],c={x:f.et.x-i.x,y:f.et.y-i.y},c=lt.Tt(c,h);f.zo=c=270<c?c-360:c}r.sort(this.vu);var l,v=null;if(r[r.length-1].zo<0)return v=r[r.length-1],s.push(v),s;for(var d=0;d<r.length;d++)if(0<r[d].zo)return v=r[d],0==d?s.push(v):(l=r[d-1],lt.vt(v.et,n.dr)>lt.vt(l.et,n.dr)?(s.push(l),s.push(v)):(s.push(v),s.push(l))),s;return s},bu:function(t,i,n,r,e,s){for(var o=e||30,u=0;u<360;u+=o){var h=new Jn;this.Nh(t,i,u,n,h,s),1==h.Ws&&r.push(h)}r.sort(this.lu)},Vo:function(t,i,n,r,e){var s=new Map,o=[];for(this.bu(t,i,n,o,r,e);0!=o.length;){var u=o[0],h=s.get(u.Gs.Ai);h?h.push(u):((h=[]).push(u),s.set(u.Gs.Ai,h)),o.splice(0,1)}return s},Ao:function(t,i){var n=new _n;n.Ai=this.Ih(),n.Vt=Object.assign({},i);t=this.zs.get(t);return t.Vr.push(n),t.ne.set(n.Ai,t.Vr.length-1),n},pu:function(t,i,n){if(n)return this.Ao(t,i);n=new _n;n.Ai=this.ps.Re(),n.Vt=Object.assign({},i);i=this.zs.get(t),t=i.Vr,t=this.ou(n,t);return i.ne.set(n.Ai,t),n},yu:function(t,i,n,r){for(var e,s=this.zs.get(-1),o=0;o<s.Yr.length;o++)if(e=s.Yr[o],null!=e&&e!=r&&wn.NaviModelPassType_DECORATE!=e.pass)for(var u=e.Tr,h=0;h<u.length-1;h++)if(lt._t(t,i,u[h],u[h+1],n)){var a=lt.vt(t,n),f=lt.vt(i,n);if(!(a<=lt.J()||f<=lt.J()))return!1}for(var c=s.Xr,l=0;l<c.length;l++){for(var v=c[l],d=v.Cr,y=0;y<d.length;y++)for(var b=d[y],p=0;p<b.length-1;p++)if(lt._t(t,i,b[p],b[p+1],n))return!1;for(var m=v.Tr,w=0;w<m.length-1;w++)if(lt._t(t,i,m[w],m[w+1],n))return!1}return!0},Xo:function(t,i,n,r,e,s){for(var o=0;o<this.uo.length;o++){var u=this.uo[o],h={};if(1==lt._t(u.dr,u.br,i.Vt,n.Vt,h)&&lt.vt(i.Vt,h)>lt.J()&&lt.vt(n.Vt,h)>lt.J())return null}void 0===r&&(r=wn.NaviRoadEntry_BOTH),void 0===e&&(e=!0),void 0===s&&(s=!0);var a=new En;a.vr=i.Ai,a.dr=i.Vt,a.yr=n.Ai,a.br=n.Vt,a.pr=[i.Vt,n.Vt],this.oh.push(i.Ai),this.oh.push(n.Ai),a.Ai=e?this.Ih():this.ps.Ae(),a.xr=r,a.jr(),s&&this.uo.push(a),this.zs.get(t).qr.push(a);var f,c,s=this.sh.get(t);return wn.NaviRoadEntry_BOTH==r&&(t={Fe:n.Ai,Pn:a.Pn},(f=s.ps.Jr.get(i.Ai))?f.push(t):((f=[]).push(t),s.ps.Jr.set(i.Ai,f)),t={Fe:i.Ai,Pn:a.Pn},(f=s.ps.Jr.get(n.Ai))?f.push(t):((f=[]).push(t),s.ps.Jr.set(n.Ai,f))),wn.NaviRoadEntry_FORWARD==r&&(f={Fe:n.Ai,Pn:a.Pn},(c=s.ps.Jr.get(i.Ai))?c.push(f):((c=[]).push(f),s.ps.Jr(i.Ai,c))),wn.NaviRoadEntry_BACK==r&&(c={Fe:i.Ai,Pn:a.Pn},(r=s.ps.Jr.get(n.Ai))?r.push(c):((r=[]).push(c),s.ps.Jr.set(n.Ai,r))),a},Ho:function(t){var i=this.Ah(t),n=this.no.get(i);if(n)for(var r=0;r<n.length;r++){var e=n[r];if(lt.ct(t,e.Tr,e.Rr))return e}return null},Ih:function(){return this.io--},Lh:function(){var t=null;if(this.gh()){if(!(t=this._h()))return!1;this.mh(t)}var i=[];if(this.Jn){var n=this.ah.Au("node",this.ws),r=this.ah.Au("node",this.ms);this.ah.Nu(),this.ah.Ru(n),this.ah.Ru(r)}else for(var e=0;e<this.hh.length;e++)i.push(this.hh[e].Ai);this.kh();r=new br(this.Th);return r.Qu(this.ms.Ai).Ju(this.ws.Ai).th(i),r.ih(),this.ih=r.rh(),this.Rh(),this.gh()&&this.gh().bh(this.gh().ps.Xe(t.Xn)),this.ah=new hr(["num","id","idx","node"]),this.Jn=!0}});var xr=o;function Or(t,i){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,i){if(t){if("string"==typeof t)return Mr(t,i);var n=Object.prototype.toString.call(t).slice(8,-1);return"Map"===(n="Object"===n&&t.constructor?t.constructor.name:n)||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Mr(t,i):void 0}}(t))||i&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var e,s=!0,o=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return s=t.done,t},e:function(t){o=!0,e=t},f:function(){try{s||null==n.return||n.return()}finally{if(o)throw e}}}}function Mr(t,i){(null==i||i>t.length)&&(i=t.length);for(var n=0,r=new Array(i);n<i;n++)r[n]=t[n];return r}g=function t(){!function(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}(this,t),this.Ph=[]};Object.assign(g.prototype,{Dh:function(t){var i,n=0,r=Or(t);try{for(r.s();!(i=r.n()).done;)for(var e=i.value,s=e[1],o=s.Xr,u=0;u<o.length;u++){var h=o[u].Ai,a=s.He(h),f=new xr(n++,a);f.Ln=e[0],this.Ph.push(f)}}catch(t){r.e(t)}finally{r.f()}},Fh:function(t){for(var i=0;i<this.Ph.length;i++)t&&t(this.Ph[i])},Pn:function(){return this.Ph.length},ju:function(t){return this.Ph[t]},Ch:function(t,i){var n,r=this.Ph;for(n in r){var e=r[n];if(t==e.Ln&&e.Mh(i))return e}return null},Uh:function(t){var i,n=this.Ph;for(i in n){var r=n[i];if(r.Ai==t)return r}return null}});var jr=g;o=function t(){!function(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}(this,t),this.Bh=null,this.Gh=[]};Object.assign(o.prototype,{hn:function(t){if(0!=t.length){this.Bh=t[0];for(var i=this.Bh,n=1;n<t.length;n++)i.jh(t[n]),i=t[n];i.jh(null)}},Zh:function(t,i){var n=this.Bh;for(n.bh(t);n.gh();){if(!n.Lh())return!1;this.Gh.push({Ln:n.Ln,Pi:n.rh()}),n=n.Eh()}n.mh(i),n.Lh(),this.Gh.push({Ln:n.Ln,Pi:n.rh()})}});var Er=o;function kr(t,i){for(var n=0;n<i.length;n++){var r=i[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}g=function(){function e(t,i,n,r){!function(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}(this,e),this.Wh=t,this.Vh=i,this.qh=n,this.Ph=r,this.Yh={}}var t,i,n;return t=e,(i=[{key:"routes",get:function(){return this.Gh},set:function(t){this.Gh=t}},{key:"failInsertedPts",get:function(){return this.Yh}}])&&kr(t.prototype,i),n&&kr(t,n),e}();Object.assign(g.prototype,{Xh:function(){for(var t={},i=0;i<this.qh.length;i++){var n=this.qh[i],r=this.Ph.Ch(n.level,n);r?(t[r.Ai]||(t[r.Ai]=[]),t[r.Ai].push(n)):(null==this.Yh[n.level]&&(this.Yh[n.level]=[]),this.Yh[n.level].push(n))}this.qh=t},Hh:function(){this.Qh=[];for(var t=0;t<this.Ph.Pn();t++)for(var i,n,r=this.Ph.ju(t),e=0;e<this.Ph.Pn();e++)t!=e&&(i=this.Ph.ju(e),(n=r.Oh(i)).related&&this.Qh.push([r.Ai,i.Ai,n.dist]))},$h:function(){this.ln(),this.Hh(),this.Xh();var t,i=[];for(t in this.qh)i.push(parseInt(t));var n=this.Ph.Ch(this.Wh.level,this.Wh).Ai,r=this.Ph.Ch(this.Vh.level,this.Vh).Ai,e=new br(this.Qh);e.Qu(n),e.Ju(r);n=i.indexOf(n);-1!=n&&i.splice(n,1),-1!=(n=i.indexOf(r))&&i.splice(n,1),e.th(i),e.ih();var s=e.rh();if(2==s.route.length&&s.route[0]==s.route[1]&&(s.route=[s.route[0]]),s.dist!=1/0){for(var o=[],u=0;u<s.route.length;u++){var h=this.Ph.Uh(s.route[u]);if(-1==o.indexOf(h)&&h.vh(this.qh[s.route[u]]),o.push(h),0<h.uh.length){null==this.Yh[h.fid]&&(this.Yh[h.fid]=[]);for(var a=0;a<h.uh.length;a++)this.Yh[h.fid].push(h.uh[a])}}this.Jh=new Er,this.Jh.hn(o),this.Jh.Zh(this.Wh,this.Vh),this.Gh=this.Jh.Gh}},ln:function(){this.Ph.Fh(function(t){t.ln(),t.ch=new fr,t.ms=null,t.ws=null,t.Jn=!1,t.hh=[],t.uh=[]})}});var Tr=g;function Rr(t){return function(t){if(Array.isArray(t))return Ir(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||Sr(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ar(t,i){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=Sr(t))||i&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var e,s=!0,o=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return s=t.done,t},e:function(t){o=!0,e=t},f:function(){try{s||null==n.return||n.return()}finally{if(o)throw e}}}}function Sr(t,i){if(t){if("string"==typeof t)return Ir(t,i);var n=Object.prototype.toString.call(t).slice(8,-1);return"Map"===(n="Object"===n&&t.constructor?t.constructor.name:n)||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ir(t,i):void 0}}function Ir(t,i){(null==i||i>t.length)&&(i=t.length);for(var n=0,r=new Array(i);n<i;n++)r[n]=t[n];return r}function Nr(t,i){for(var n=0;n<i.length;n++){var r=i[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}o=function(){function i(t){!function(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}(this,i),this.Ht=t,this.dr=null,this.Kh=null,this.br=null,this.ta=null,this.ia=null,this.xs=x.MODULE_SHORTEST,this.na=p.PRIORITY_DEFAULT,this.ra=new Map,this.ea=null,this.sa=new Map,this.oa=new Map,this.ua=[],this.ha=[],this.aa=[],this.fa=[],this.Pi=[],this.ca=1,this.la=.1,this.va=1,this.da=10,this.ya=.1,this.ba=1,this.pa=10,this.ma=.1,this.wa=1,this._a=10,this.as=null,this.ga=null,this.xa=null,this.Oa=!1,this.qs=null,this.Ys=null,this.Ma=null,this.ja=[],this.mo=!0,this.wo=new Map}var t,n,r;return t=i,(n=[{key:"assginedInfos",get:function(){return this.ja},set:function(t){this.ja=t}},{key:"passPts",set:function(t){this.qh=t}},{key:"failedInsertedPts",get:function(){return this.Yh}},{key:"toDoors",get:function(){return this.Oa},set:function(t){this.Oa=t}},{key:"obstruct",get:function(){return this.mo},set:function(t){this.mo=t}}])&&Nr(t.prototype,n),r&&Nr(t,r),i}();Object.assign(o.prototype,{kn:function(t){t&&t.scene&&t.floors&&(this.as=t.scene,this.ga=new Wn,0!=(t=t.floors).size&&(this.Ea(t),this.ka(),this.xa=new jr,this.xa.Dh(this.ra)))},pi:function(){this.Ht=null,this.as=null,this.ga&&(this.ga.pi(),this.ga=null);var t,i=Ar(this.ra);try{for(i.s();!(t=i.n()).done;)t.value[1].pi()}catch(t){i.e(t)}finally{i.f()}this.ra.clear(),this.ra=null,this.ea.pi(),this.ea=null;var n,r=Ar(this.sa);try{for(r.s();!(n=r.n()).done;)n.value[1].pi()}catch(t){r.e(t)}finally{r.f()}this.sa.clear(),this.sa=null,this.oa.clear(),this.oa=null,this.ua=null,this.ha=null,this.aa=null,this.fa=null,this.Pi=null},Ta:function(t,i){this.ln();for(var n=new Map,r=0;r<this.qh.length;r++){var e=this.qh[r].order;void 0===e&&(e=Number.MAX_VALUE);var s=n.get(e);s||n.set(e,s=[]),s.push(this.qh[r])}var o=Array.from(n);o.sort(function(t,i){return t[0]-i[0]});var u=t,h=i,a=0;this.Pi=[],this.Yh={};for(var f,c=null,l=null,v=0;v<o.length;v++){var d=o[v][1];this.ln();var y,b,p=new Tr(u,h,d,this.xa);for(y in p.$h(),c=p.routes,f=p.failInsertedPts,this.Ra(p.failInsertedPts)!=d.length&&(p=this.Aa(c),(d=this.Pi).push.apply(d,Rr(p[0])),p=(d=(l=p[1])[0]).Pi,u=Object.assign({level:d.Ln,x:t.x,y:t.y},p[0].Vt),a++),f)this.Yh[y]||(this.Yh[y]=[]),(b=this.Yh[y]).push.apply(b,Rr(f[y]))}return 0==a?this.Pi=c:(i=this.Pi).push.apply(i,Rr(l)),this.Pi=this.Sa(this.Pi),I.ROUTE_SUCCESS},Sa:function(t){for(var i,n=-1,r=[],e=null,s=0;s<t.length;s++)n!=t[s].Ln?(e=t[s],r.push(e),n=t[s].Ln):(i=e.Pi).push.apply(i,Rr(t[s].Pi));return r},Ra:function(t){if(0==Object.keys(t).length)return 0;var i,n=0;for(i in t)n+=t[i].length;return n},Aa:function(t){for(var i=[-1,-1],n=t.length-1;0<=n;n--){for(var r=t[n].Pi,e=r.length-1;0<=e;e--)if(r[e].Sh){i[1]=e;break}if(-1!=i[1]){i[0]=n;break}}var s=[];if(-1!=i[0]&&-1!=i[1]){s[0]=[],s[1]=[];for(var o=0;o<t.length;o++){var u=t[o];if(o<i[0])s[0].push(u);else if(o>i[0])s[1].push(u);else{for(var h=u.Pi,a=[{Ln:u.Ln,Pi:[]},{Ln:u.Ln,Pi:[]}],f=0;f<h.length;f++)(f<i[1]?a[0]:a[1]).Pi.push(h[f]);s[0].push(a[0]),s[1].push(a[1])}}}else s.push(t);return s},Ia:function(t,i){return this.ln(),this.Na=new Tr(t,i,this.qh,this.xa),this.Na.$h(),this.Pi=this.Na.routes,this.Yh=this.Na.failInsertedPts,I.ROUTE_SUCCESS},La:function(t){for(var i=0,n=0;n<t.length-1;n++)i+=Math.abs(t[n].Ln-t[n+1].Ln);return{dist:i,seq:t}},Pa:function(t){for(var i=[],n=0;n<t.length;n++)i.push(this.La(t[n]));return i.sort(function(t,i){return t.dist-i.dist}),i},Da:function(t){t.sort(function(t,i){return t.seq.length-i.seq.length})},Ro:function(){for(var t in this.ja){var i=parseInt(t),t=this.sa.get(i);t.assignedPts=this.ja[i],t.Ro(),this.Pi.push({Ln:i,Pi:t.Ps()})}},ih:function(t,l,i,v,d,n){var y=this;this.ln();var r=this.sa.get(t);if(!r)return I.ROUTE_FAILED_NO_DATA_START;var e=r.Go(l);if(!e)return I.ROUTE_FAILED_NO_DATA_START;this.qs=e.Zs;r=this.sa.get(i);if(!r)return I.ROUTE_FAILED_NO_DATA_DEST;r=r.Go(v);if(!r)return I.ROUTE_FAILED_NO_DATA_DEST;this.Ys=r.Zs,this.Pi=[],this.Kh=t,this.dr=l,this.ta=i,this.br=v;var s=e.mr,o=r.mr,b=e.Zs,p=r.Zs;if(0===s||0===o)return I.ROUTE_FAILED_CANNOT_ARRIVE;var m=null;this.xs=d,this.Fa(n);function u(){y.Pi=[];for(var t=[],i=[y.dr],n=0;n<y.aa.length-1;n++){var r=[],e=[];if(!y.Ca(y.aa[n],y.aa[n+1],i[i.length-1],r,e))return I.ROUTE_FAILED_CANNOT_ARRIVE;for(var s=!1,o=0;o<r.length;o++){var u,h=r[o].lr,a=e[o].lr,f=r[o].Ln,c=e[o].Ln;if(m=0==n?((u=y.sa.get(f)).qs=b,u.Ls(l,h,d)):y.sa.get(f).Ls(t[t.length-1],h,d),I.ROUTE_SUCCESS==m){h=y.sa.get(f).Ps();if(y.Pi.push({Ln:f,Pi:h}),t.push(a),i.push(a.Vt),s=!0,y.aa.length-2==n){h=y.sa.get(c);if(h.Ys=p,m=h.Ls(a,v,d),I.ROUTE_SUCCESS!=m){y.Pi.splice(y.Pi.length-1,1),s=!1,i.splice(i.length-1,1),t.splice(t.length-1,1);continue}h=h.Ps();y.Pi.push({Ln:c,Pi:h})}if(I.ROUTE_SUCCESS==m)break}}if(!s)return I.ROUTE_FAILED_CANNOT_ARRIVE}return I.ROUTE_SUCCESS}if(t===i&&s===o){var h=this.sa.get(t);if(h.qs=b,h.Ys=p,(m=h.Ls(l,v,d))!==I.ROUTE_SUCCESS){for(var a=[],f=0;f<this.ua.length;f++)this.ua[f].Ln==t&&this.ua[f].mr==s&&a.push(this.ua[f]);n=this.Ua(a,a[0],1);if(0==n.length)return I.ROUTE_FAILED_OUTLINE;for(var c=this.Pa(n),w=0;w<c.length;w++){this.aa=c[w].seq;var _=u();if(_==I.ROUTE_SUCCESS)return _}return I.ROUTE_FAILED_CANNOT_ARRIVE}h=h.Ps();this.Pi.push({Ln:t,Pi:h})}else{if(this.Ba(t,s,i,o,this.dr,this.br)!=I.ROUTE_SUCCESS)return I.ROUTE_FAILED_OUTLINE;this.aa.reverse();h=u();if(I.ROUTE_SUCCESS!=h){for(var g=null,x=null,O=0;O<this.ua.length;O++)this.ua[O].Ln==t&&this.ua[O].mr==s&&(g=this.ua[O]),this.ua[O].Ln==i&&this.ua[O].mr==o&&(x=this.ua[O]);h=[];if(h.push([g]),this.Ga(g,x,h),0==h.length)return I.ROUTE_FAILED_OUTLINE;var M=this.Pa(h);this.Da(M);for(var j=0;j<M.length;j++){this.aa=M[j].seq;var E=u();if(E==I.ROUTE_SUCCESS)return E}return I.ROUTE_FAILED_CANNOT_ARRIVE}}return I.ROUTE_SUCCESS},Za:function(){if(this.Oa&&(this.Ma=null,this.Ys&&0<this.Pi.length)){for(var t,i=this.Pi[this.Pi.length-1].Pi,n={x:-1,y:-1},r=i.length-1;0<r;r--){var e=i[r],s=i[r-1];if(lt.Rt(e.Vt,s.Vt,this.Ys.Tr,n)){t=r;break}}i.splice(t);var o=new _n;o.Ai=-1,o.Vt=n,i.push(o),this.Ma=n}for(var u=[],h=0;h<this.Pi.length;h++)1<this.Pi[h].Pi.length&&u.push(this.Pi[h]);for(var a=[],f=0;f<u.length;f++){this.Wa(u[f]);for(var c=u[f],l=c.Ln,v=c.Pi,d=[],y=0,b=0;b<v.length;b++)d.push(v[b].Vt),b!=v.length-1&&(y+=lt.vt(v[b].Vt,v[b+1].Vt));c=new an;c.Ln=l,c.Fn=v,c.Dn=d,c.Pn=y,a.push(c),f!=u.length-1&&(l=this.Va(u[f]),c=this.qa(u[f+1]),a.push(l),a.push(c))}return a},Po:function(t){for(var i=new Map,n=0;n<t.length;n++){var r=t[n],e=i.get(r.Ln);e||i.set(r.Ln,e=[]),e.push(r)}var s,o=Ar(i);try{for(o.s();!(s=o.n()).done;){var u=s.value,h=this.wo.get(u[0]);h&&!this.Ya(u[1],h)||(this.sa.get(u[0]).Po(u[1]),this.wo.set(u[0],u[1]),0)}}catch(t){o.e(t)}finally{o.f()}},Xa:function(){var t,i=Ar(this.wo);try{for(i.s();!(t=i.n()).done;){var n=t.value;this.sa.get(n[0]).Xa()}}catch(t){i.e(t)}finally{i.f()}this.wo.clear()},Ya:function(t,i){if(t.length!=i.length)return!0;for(var n=0;n<t.length;n++){for(var r=!1,e=0;e<i.length;e++)i[e].za(t[n])&&(r=!0);if(!r)return!0}return!1},Wa:function(t){if(t&&t.Pi){var i=t.Pi;if((u=i.length)&&!(u<2)){var n=[];n.push(i[0]);var r=i[0],e=i[u-1];lt.vt(r.Vt,e.Vt),lt.J();for(var s=1;s<u-1;s++){var o=i[s];null!=r&&lt.vt(r.Vt,o.Vt)<lt.J()||null!=e&&lt.vt(e.Vt,o.Vt)<lt.J()||n.push(o)}n.push(e);for(var u=n.length,h=new Array(u),a=0;a<u;a++)h[a]=0;for(var f=1;f<u-1;f++){for(var c=n[f],l=f-1;0!=h[l];)l--;var v=n[l],d=n[f+1];lt.lt(c.Vt,v.Vt,d.Vt)&&(h[f]=1)}for(var y=[],b=0;b<u;b++)0==h[b]&&y.push(n[b]);t.Pi=y}}},ln:function(){this.aa=[],this.fa=[];var t,i=Ar(this.sa);try{for(i.s();!(t=i.n()).done;){var n=t.value;n[1].ln(),n[1].obstruct=this.mo}}catch(t){i.e(t)}finally{i.f()}},Ha:function(n,r){var e=this;if(this.sa.size<=0)return null;var t=this.sa.get(n.level);if(!t)return null;var i=t.ps;if(!i)return null;var s=[];s.push.apply(s,Rr(i.qr));var o,u=Ar(t.zs);try{for(u.s();!(o=u.n()).done;){var h=o.value;s.push.apply(s,Rr(h[1].qr))}}catch(t){u.e(t)}finally{u.f()}var a={},f=i.ue(n),c={distance:Number.MAX_VALUE,road:null,coords:{level:n.level}},i=null;return s.length&&(s.forEach(function(t){var i;t.xr!==wn.NaviRoadEntry_FORBID&&(r?0<=r.indexOf(t.gr)&&(f!==t.mr||(i=lt.bt(n,t.dr,t.br,a))<c.distance&&(c.distance=i,c.road=t,c.angle=e.Qa(t.dr,t.br),Object.assign(c.coords,a))):f!==t.mr||(i=lt.bt(n,t.dr,t.br,a))<c.distance&&(c.distance=i,c.road=t,c.angle=e.Qa(t.dr,t.br),Object.assign(c.coords,a)))}),i=c),i},Qa:function(t,i){var n=new bn(0,0,1),t=new bn(t.x,0,t.y),i=new bn(i.x,0,i.y).clone().sub(t).normalize(),t=i.angleTo(n)*lt.tt();return 0<i.clone().cross(n).y?360-t:t},Ea:function(t){this.ra=new Map,this.ga.cs(this.as);var i,n=Ar(t);try{for(n.s();!(i=n.n()).done;){var r=i.value,e=r[1].gid;if(null!=e){var s=r[1].geo[0],o=r[1].biz[0],u=r[1].navi[0],h=this.ga.bs(e,s,o,u);if(0!=h.naviNodes.length&&0!=h.naviSegments.length){var a=new Map,f=this.$a(h,a),c=this.Ja(h),l=this.Ka(h),v=this.tf(h),d=this.if(h);this.nf(d,f,u,a);var y=new Pn(f,c,!0,1);y.Ln=e,0!=v.length&&(y.Xr=v),0!=l.length&&(y.Hr=l),0!=d.length&&(y.Yr=d);for(var b=0;b<c.length;b++)c[b].mr=y.ue(c[b].dr);this.ra.set(h.level,y)}}}}catch(t){n.e(t)}finally{n.f()}},$a:function(r,e){var t,s=[];for(t in r.naviNodes)(function(t){var i=r.naviNodes[t];if(null==i.nodeId)return;var n=new _n;n.Ai=i.nodeId,n.Vt={x:parseFloat(i.geoArr.x.toFixed(3)),y:parseFloat(i.geoArr.y.toFixed(3))},n.tr=i.nodeType,n.ir=i.liftType,n.Xn=i.liftFlag,n.nr=i.liftEntry,i.linkSegArr.forEach(function(t){n.Yn.push(parseInt(t))}),i.liftFloorArr.forEach(function(t){n.qn.push(parseInt(t))}),s.push(n),e.set(i.nodeId,t)})(t);return s},Ja:function(t){var i,n=[];for(i in t.naviSegments){var r,e=t.naviSegments[i],s=e.geoArr;s&&((r=new En).Ai=e.segmentId,r.vr=e.snode,r.dr={x:parseFloat(s[0].x.toFixed(3)),y:parseFloat(s[0].y.toFixed(3))},r.yr=e.enode,r.br={x:parseFloat(s[1].x.toFixed(3)),y:parseFloat(s[1].y.toFixed(3))},r.Pn=e.length,r.xr=e.entry,r.gr=e.rank,n.push(r))}return n},tf:function(t){for(var i=[],n=0,r=t.extentLayer.length;n<r;n++){var e=t.extentLayer[n],s=e.geoArr,s=new An(e.eid,t.gid,0,s=s||[],e.Dt,e.holes);s.fid=e.fid,i.push(s)}return i},if:function(t){for(var i=[],n=0,r=t.modelLayer.length;n<r;n++){var e=t.modelLayer[n],s=e.geoArr,s=new An(e.eid,t.gid,0,s=s||[],e.Dt,e.holes);s.fid=e.fid,s.pass=e.pass,i.push(s)}return i},Ka:function(t){for(var i=[],n=0,r=t.naviZones.length;n<r;n++){var e=t.naviZones[n],e=new Tn(e.Ai,t.gid,e.type,e.geoArr);i.push(e)}return i},nf:function(t,i,n,r){for(var e=new Map,s=0;s<t.length;s++){var o=t[s];e.set(o.Ai,s)}for(var u=0;u<n.naviModels.length;u++)for(var h=n.naviModels[u],a=h.modelid,f=t[e.get(a)],c=0;c<h.doorids.length;c++){var l=h.doorids[c],v=i[r.get(l)];f.Ur.push(v);l=h.nodetypes[c],v=h.entrytypes[c];f.Br.push(l),f.Gr.push(v)}},rf:function(){if(!(this.ra.size()<=0)){var t,i={},n=Ar(this.ra);try{for(n.s();!(t=n.n()).done;){var r,e=t.value[1],s=[];for(r in e.ge(wn.NaviLiftType_Escalator,s),s){var o,u=s[r];u.Xn&&(i[o=u.Xn]?i[o]=i[o].concat(u.qn):i[o]=u.qn)}}}catch(t){n.e(t)}finally{n.f()}var h,a=Ar(this.ra);try{for(a.s();!(h=a.n()).done;){var f,c=h.value[1],l=[];for(f in c.ge(wn.NaviLiftType_Escalator,l),l){var v,d=l[f];d.Xn&&(i[v=d.Xn]&&(d.qn=i[v]))}}}catch(t){a.e(t)}finally{a.f()}}},ka:function(){this.ef(),this.sf();var t=new Pn(this.ua,this.ha);this.ea=new Yn(t);var i,n=Ar(this.ra);try{for(n.s();!(i=n.n()).done;){var r=i.value;this.sa.set(r[0],new er(r[1]))}}catch(t){n.e(t)}finally{n.f()}},ef:function(){this.ua=[];var t,i=0,n=Ar(this.ra);try{for(n.s();!(t=n.n()).done;)for(var r=t.value,e=r[1],s=e.Xr,o=0;o<s.length;o++){var u=s[o],h=new Zn;h.Ai=i++,h.Ln=r[0],h.mr=u.Ai,h.Ns=u;for(var a=0;a<e.Vr.length;a++){var f,c,l=e.Vr[a];l.ir!=wn.NaviLiftType_NULL&&lt.ct(l.Vt,u.Tr,u.Rr)&&(f=new jn,c=e.le(l.Vt),f.cr=c,f.or(l),f.Ln=r[0],f.lr=l,f.ir=l.ir,h.Qe.push(f))}this.ua.push(h)}}catch(t){n.e(t)}finally{n.f()}},sf:function(){this.ha=[];for(var t=0;t<this.ua.length;t++)for(var i=this.ua[t],n=0;n<this.ua.length;n++){var r,e,s=this.ua[n];t!=n&&(null!=(r=this.uf(i,s))&&(r*=0==(e=Math.abs(i.Ln-s.Ln))?1:e,(e=new En).vr=i.Ai,e.yr=s.Ai,e.Pn=r,e.xr=wn.NaviRoadEntry_FORWARD,this.ha.push(e)))}},uf:function(t,i){for(var n=Number.MAX_VALUE,r=!1,e=t.Ln,s=i.Ln,o=e<s?wn.NaviLiftEntry_DOWN:wn.NaviLiftEntry_UP,u=0;u<t.Qe.length;u++){var h=t.Qe[u],a=h.nr;if(a!=wn.NaviLiftEntry_FORBID&&a!=o){var f=h.ir;if(p.PRIORITY_LIFTONLY==this.na){if(wn.NaviLiftType_Lift!=f)continue}else if(p.PRIORITY_ESCALATORONLY==this.na){if(wn.NaviLiftType_Escalator!=f)continue}else if(p.PRIORITY_STAIRONLY==this.na){if(wn.NaviLiftType_Stair!=f)continue}else if(p.PRIORITY_ACCESSIBLEONLY==this.na&&wn.NaviLiftType_Accessible!=f)continue;if(f==wn.NaviLiftType_Stair||-1!=h.qn.indexOf(s))for(var c=0;c<i.Qe.length;c++){var l=i.Qe[c];if(null!=l&&h.Xn==l.Xn)if(p.PRIORITY_LIFTFIRST==this.na||p.PRIORITY_DEFAULT==this.na){if(wn.NaviLiftType_Lift==f||wn.NaviLiftType_Accessible==f)return this.la;if(wn.NaviLiftType_Escalator==f){var v=this.ba;v<n&&(n=v),r=!0;break}if(wn.NaviLiftType_Stair==f){v=this._a;v<n&&(n=v),r=!0;break}}else if(p.PRIORITY_ESCALATORFIRST==this.na){if(wn.NaviLiftType_Lift==f||wn.NaviLiftType_Accessible==f){var d=this.va;d<n&&(n=d),r=!0;break}if(wn.NaviLiftType_Escalator==f)return this.ya;if(wn.NaviLiftType_Stair==f){d=this._a;d<n&&(n=d),r=!0;break}}else if(p.PRIORITY_STAIRFIRST==this.na){if(wn.NaviLiftType_Lift==f){var y=this.va;y<n&&(n=y),r=!0;break}if(wn.NaviLiftType_Escalator==f||wn.NaviLiftType_Accessible==f){y=this.hf;y<n&&(n=y),r=!0;break}if(wn.NaviLiftType_Stair==f)return this.ma}else{if(p.PRIORITY_LIFTFIRST1==this.na||p.PRIORITY_STAIRFIRST1==this.na||p.PRIORITY_ESCALATORFIRST1==this.na)return this.ca;if(p.PRIORITY_LIFTONLY==this.na||p.PRIORITY_ESCALATORONLY==this.na||p.PRIORITY_STAIRONLY==this.na||p.PRIORITY_ACCESSIBLEONLY==this.na)return this.ca}}}}return r?n:null},af:function(t,i){for(var n=0;n<i.length;n++)if(i[n].Xn==t)return i[n];return null},Fa:function(t){this.na===t&&this.ea||(this.na=t,this.sf(),t=new Pn(this.ua,this.ha),this.ea=new Yn(t))},qa:function(t){var i=t.Pi,n=new an;return n.Ln=t.Ln,n.Fn.push(i[0]),n.Dn.push(i[0].Vt),n.Pn=0,n},Va:function(t){var i=t.Pi,n=new an;return n.Ln=t.Ln,n.Fn.push(i[i.length-1]),n.Dn.push(i[i.length-1].Vt),n.Pn=0,n},ff:function(t,i){for(var n=0;n<this.ua.length;n++)if(this.ua[n].Ln==t&&this.ua[n].mr==i)return this.ua[n];return null},Ba:function(t,i,n,r,e,s){i=this.ff(t,i),r=this.ff(n,r),s=this.ea.Ls(i,r,null,e,s);if(s!=I.ROUTE_SUCCESS)return s;var o=this.ea.Ps();this.aa=[];for(var u=0;u<o.length;u++)this.aa.push(o[u]);return s},cf:function(t,i){return t.ir==wn.NaviLiftType_Lift&&i.ir==wn.NaviLiftType_Lift?t.$n-i.$n:t.ir==wn.NaviLiftType_Lift?-1:i.ir==wn.NaviLiftType_Lift?1:t.$n-i.$n},lf:function(t,i){return t.ir==wn.NaviLiftType_Escalator&&i.ir==wn.NaviLiftType_Escalator?t.$n-i.$n:t.ir==wn.NaviLiftType_Escalator?-1:i.ir==wn.NaviLiftType_Escalator?1:t.$n-i.$n},vf:function(t,i){return t.ir==wn.NaviLiftType_Stair&&i.ir==wn.NaviLiftType_Stair?t.$n-i.$n:t.ir==wn.NaviLiftType_Stair?-1:i.ir==wn.NaviLiftType_Stair?1:t.$n-i.$n},df:function(t,i){if(null==t)return!1;for(var n=0;n<t.length;n++)if(t[n].Ai==i.Ai)return!0;return!1},yf:function(t,i){if(null==t)return!1;for(var n=0;n<t.length;n++)if(t[n].Fe==i.Ai)return!0;return!1},Ua:function(t,i,n){var r=this.ea.ps.Jr;if(0==r.size)return[];var e=t.length-1,s=r.get(t[e].Ai);if(null==s)return[];if(0==n)return this.yf(s,i)?(t.push(i),t):[];for(var o=[],u=0;u<s.length;u++){var h,a=s[u];this.df(t,a)||a.Fe==i.Ai||(h=t.concat(),a=this.ea.ps.je(a.Fe),h.push(this.ea.ps.Vr[a]),0!=(h=this.Ua(h,i,n-1)).length&&o.push(h))}return o},Ga:function(t,i,n){var r=this.ea.ps.Jr;if(0!=r.size){for(var e=-1,s=0;s<n.length;s++)n[s].indexOf(t)==n[s].length-1&&(e=s);if(-1!=e){var o=n[e];n.splice(e,1);var u=r.get(t.Ai);if(null!=u)for(var h=0;h<u.length;h++){var a,f=this.ua[u[h].Fe];this.df(o,f)||((a=[]).push.apply(a,Rr(o)),a.push(f),n.push(a),f.Ai!=i.Ai&&this.Ga(f,i,n))}}}},bf:function(t,i,n){for(var r=t.Qe,e=n.Qe,s=0;s<r.length;s++){var o=r[s];o.$n=lt.distanceOfTwoPoints(o.Vt,i)}p.PRIORITY_DEFAULT==this.na||p.PRIORITY_LIFTONLY==this.na||p.PRIORITY_LIFTONLY==this.na?r.sort(this.cf):p.PRIORITY_ESCALATORFIRST==this.na||p.PRIORITY_ESCALATORONLY==this.na?r.sort(this.lf):p.PRIORITY_STAIRFIRST!=this.na&&p.PRIORITY_STAIRONLY!=this.na||r.sort(this.cf);for(var u=null,h=null,a=!1,f=0;f<r.length;f++){for(var c=r[f],l=c.Xn,v=0;v<e.length;v++)if(e[v].Xn==l){u=c,h=e[v],a=!0;break}if(a)break}return null==u||null==h?null:{startLiftNodes:u,endLiftNodes:h}},pf:function(t,i,n,r,e){this.ia=this.sa.get(t.Ln).ps.le(n);for(var s=t.queryLiftNodes(this.ia,n,this.br,this.na),o=0;o<s.length;o++){var u=s[o];if(wn.NaviLiftType_Stair!=u.ir)if(-1==u.qn.indexOf(i.Ln))continue;for(var h=0;h<i.Qe.length;h++){var a=i.Qe[h];if(u.Xn==a.Xn){r.push(u),e.push(a);break}}}return 0==r.length},Ca:function(n,t,i,r,e){this.ia=this.sa.get(n.Ln).ps.le(i);var s=[];function o(t,i){i=n.Ke(t,i);s.push.apply(s,Rr(i))}for(var u=n.Qe,h=0;h<u.length;h++){var a=u[h];a.$n=lt.vt(a.Vt,this.br)+lt.vt(a.Vt,i)}var f=n.Ns.Ut.size,c=f.x+f.y;p.PRIORITY_LIFTONLY!==this.na&&p.PRIORITY_ESCALATORONLY!==this.na&&p.PRIORITY_STAIRONLY!==this.na&&p.PRIORITY_ACCESSIBLEONLY!==this.na||(f=null,p.PRIORITY_LIFTONLY===this.na&&(f=wn.NaviLiftType_Lift),p.PRIORITY_ESCALATORONLY===this.na&&(f=wn.NaviLiftType_Escalator),p.PRIORITY_STAIRONLY===this.na&&(f=wn.NaviLiftType_Stair),p.PRIORITY_ACCESSIBLEONLY===this.na&&(f=wn.NaviLiftType_Accessible),s=n.Ke(f)),p.PRIORITY_LIFTFIRST!==this.na&&p.PRIORITY_ESCALATORFIRST!==this.na&&p.PRIORITY_STAIRFIRST!==this.na&&p.PRIORITY_DEFAULT!==this.na||(p.PRIORITY_LIFTFIRST!==this.na&&p.PRIORITY_DEFAULT!==this.na||(o(wn.NaviLiftType_Lift,-15),o(wn.NaviLiftType_Escalator,-8),o(wn.NaviLiftType_Stair,0)),p.PRIORITY_ESCALATORFIRST===this.na&&(o(wn.NaviLiftType_Lift,-8),o(wn.NaviLiftType_Escalator,-15),o(wn.NaviLiftType_Stair,0)),p.PRIORITY_STAIRFIRST===this.na&&(o(wn.NaviLiftType_Lift,-8),o(wn.NaviLiftType_Escalator,0),o(wn.NaviLiftType_Stair,-15))),p.PRIORITY_LIFTFIRST1!==this.na&&p.PRIORITY_ESCALATORFIRST1!==this.na&&p.PRIORITY_STAIRFIRST1!==this.na||(p.PRIORITY_LIFTFIRST1===this.na&&(o(wn.NaviLiftType_Lift,-c),o(wn.NaviLiftType_Escalator,0),o(wn.NaviLiftType_Stair,0)),p.PRIORITY_ESCALATORFIRST1===this.na&&(o(wn.NaviLiftType_Lift,0),o(wn.NaviLiftType_Escalator,-c),o(wn.NaviLiftType_Stair,0)),p.PRIORITY_STAIRFIRST1===this.na&&(o(wn.NaviLiftType_Lift,0),o(wn.NaviLiftType_Escalator,0),o(wn.NaviLiftType_Stair,-c)));var l=this;s.sort(function(t,i){if(t.zone!==i.zone){if(t.zone===l.ia)return-1;if(i.zone===l.ia)return 1}return t.$n-i.$n});for(var v=0;v<s.length;v++){var d=s[v];if(!(1===d.nr&&t.Ln<n.Ln)&&!(2===d.nr&&t.Ln>n.Ln))for(var y=0;y<t.Qe.length;y++){var b=t.Qe[y];if(d.Xn===b.Xn){r.push(d),e.push(b);break}}}return 0!==r.length}});var Lr=o,Pr={zh:{straight:"直行",still_go_straight:"继续直行",back_to:"往回走",turn_right:"右转",turn_left:"左转",right_front:"右前方 继续直行",left_front:"左前方 继续直行",turn_right_rear:"右后方转",turn_left_rear:"左后方转",up:"上",down:"下",up_to:"上行到达",down_to:"下行到达",meter:"米",pass:"经过",arrived:"到达目的地",front:"前方",stair:"楼梯",stair_pure:"楼梯",escalator_pure:"扶梯",lift_pure:"直梯",take:"乘",take_stair:"乘梯",front_pure:"前",right_front_pure:"右前",right_pure:"右",right_back_pure:"右后",back_pure:"后",left_back_pure:"左后",left_pure:"左",left_front_pure:"左前",east:"东",west:"西",south:"南",north:"北",southeast:"东南",northeast:"东北",southwest:"西南",northwest:"西北",face_to:"向",start:"起",dest:"终"},en:{straight:"go straight",still_go_straight:"go straight",back_to:"turn back",turn_right:"turn right",turn_left:"turn left",right_front:"go straight right front ",left_front:"go straight left front ",turn_right_rear:"turn right rear",turn_left_rear:"turn left rear",up:"up",down:"up",up_to:"up to",down_to:"down to",meter:"meter",pass:"pass",arrived:"arrived",front:"front",stair:"stair",stair_pure:"stair",escalator_pure:"escalator",lift_pure:"lift",take:"take",take_stair:"take stair",front_pure:"front",right_front_pure:"right front",right_pure:"right",right_back_pure:"right back",back_pure:"back",left_back_pure:"left back",left_pure:"left",left_front_pure:"left front",east:"east",west:"west",south:"south",north:"north",southeast:"southeast",northeast:"northeast",southwest:"southwest",northwest:"northwest",face_to:"face to",start:"start",dest:"dest"}};g=function t(i){!function(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}(this,t),this.mf=i.data||null,this.wf=i.directionAssert||10,this._f=i.combineAsset||5,this.gf=i.language||s.ZH,this.xf=0,this.Of=[],this.Mf=["north","northeast","east","southeast","south","southwest","west","northwest","north"],this.jf=["front_pure","right_front_pure","right_pure","right_back_pure","back_pure","left_back_pure","left_pure","left_front_pure","front_pure"],this.Ef=["still_go_straight","right_front","turn_right","turn_right_rear","back_to","turn_left_rear","turn_left","left_front","still_go_straight"],this.kf=!1,this.Tf=0,Object.assign(this,i)};Object.assign(g.prototype,{pi:function(){},H:function(t){return this.Rf(t)},Af:function(t){for(var i=[],n=0;n<t.length;n++)i=i.concat(t[n].Fn);return i},Sf:function(t,i){var n=Math.PI/4,r=t/n,t=parseInt(r),r=r%1*n;return t%2==0?i<r&&(t+=1):n-i<=r&&(t+=1),t},If:function(t,i){var n=i.angleTo(t);return n=new bn(i.x,i.z,i.y).cross(new bn(t.x,t.z,t.y)).z<0?2*Math.PI-n:n},Nf:function(t,i){if(i==t.length-1)return{index:t[t.length-1].index};var n=new bn(0,0,1),r=n;0!=i&&((r=t[i].clone().sub(t[i-1]).normalize()).y=0,r.z*=-1);var e=t[i+1].clone().sub(t[i]);e.y=0;var s=e.length(),e=e.normalize();e.z*=-1;n=this.Sf(this.If(n,e),22.5*lt.K()),r=this.If(r,e),e=this.Sf(r,this.wf*lt.K());return{relField:e,relDesc:this.Lf(this.jf[e]),relAngle:r*lt.tt(),absField:n,absDesc:this.Lf(this.Mf[n]),distance:s,index:t[i].index}},vn:function(){var t={center:{x:0,y:0,z:0}};return this.mf&&(t.center.x=this.mf.scene.defCenX,t.center.y=this.mf.scene.defCenY,t.center.z=this.mf.scene.defCenZ),t},mn:function(t){var i={level:t,height:0,gname:"",desc:""};if(this.mf)for(var n=this.mf.scene,r=0;r<n.layerGroups.length;r++){var e=n.layerGroups[r];if(e.gid==t){i.height=e.height,i.gname=e.gname,i.desc=e.desc;break}}return i},Pf:function(t,i){var n=0;return i.level&&(n=this.mn(i.level).height),new bn(i.x-t.x,t.y+n,-i.y+t.y)},Df:function(t,i){for(var n=this,r=this.vn().center,e=t.map(function(t,i){t=n.Pf(r,t);return t.index=i,t}),s=[],o=0;o<e.length;o++){var u=this.Nf(e,o);u.point=t[o],u.level=i,s.push(u)}for(var h=[s[0]],a=1;a<s.length;a++)s[a].relAngle<=this._f||360-s[a].relAngle<=this._f?h[h.length-1].distance+=s[a].distance:h.push(s[a]);return h},Ff:function(t,i){var n=[],r=0;if(i.forEach(function(t){t.Sh&&n.push(r),r++}),0!=n.length)for(;0!=n.length;){for(var e=0;e<t.length-1;e++)if(t[e].index<=n[0]&&t[e+1].index>=n[0]){t[e+1].Sh=!0;break}n.splice(0,1)}},Cf:function(t){var i="",t=this.mn(t);return null!=t&&(""+(i=this.gf==s.ZH?t.desc:t.gname.toUpperCase())!="null"&&""+i!=""&&""+i!="undefined"||(i=t.gname.toUpperCase())),i},Uf:function(t,i,n,r,e){var s=t[i],o=t[i+1],u=this.Lf(this.Ef[o.relField]);this.kf=i==t.length-3&&o.distance<this.xf,u&&!this.kf||(r?(this.kf=!1,u||(e=this.Bf(t[i+1].point,n,e),n=n<r?this.Lf("up_to"):this.Lf("down_to"),h=this.Cf(r),u=this.Lf("take")+e+" "+n+" "+h)):(this.kf&&(this.Tf=o.distance),u=this.Lf("arrived")));var h=null,h=0==i?2==t.length?this.Lf("face_to")+" "+s.absDesc+" "+this.Lf("straight")+" "+Math.ceil(s.distance)+" "+this.Lf("meter")+" "+u:this.Lf("face_to")+" "+s.absDesc+" "+this.Lf("straight")+" "+Math.ceil(s.distance)+" "+this.Lf("meter")+" "+this.Lf(this.Ef[t[i+1].relField]):this.Lf("straight")+" "+Math.ceil(s.distance+(this.kf&&!r?o.distance:0))+" "+this.Lf("meter")+" "+u;return o.Sh&&(h+=" ",h+=this.Lf("pass")),h},Gf:function(t,i,n,r){var e=t[i],s=t[i+1];return this.Lf(this.Ef[t[i+1].relField])&&!this.kf||(r?(n=n<r?this.Lf("up"):this.Lf("down"),s.relDesc=n):s.relDesc=this.Lf("dest")),{startPoint:e.point,startLevel:e.level,startIndex:e.index,endPoint:s.point,endLevel:s.level,endIndex:s.index,startDirection:e.absDesc,endDirection:s.relDesc,distance:e.distance+(this.kf&&!r?s.distance:0)}},Bf:function(t,i,n){t.z=this.mn(i).height;for(var r,e=Number.MAX_SAFE_INTEGER,s=-1,o=0;o<n.length;o++)n[o]&&((r=Math.pow(n[o].Vt.x-t.x,2)+Math.pow(n[o].Vt.y-t.y,2))<e&&(e=r,s=n[o].ir));if(-1!=s)switch(s){case 2:return" "+this.Lf("stair_pure");case 3:return" "+this.Lf("escalator_pure");case 1:return" "+this.Lf("lift_pure");default:return""}return this.Lf("stair")},Lf:function(t){t=Pr[this.gf][t];return t||""},Rf:function(t){for(var i,n,r=[],e=[],s=null,o=0,u=[],h=!(this.Of=[]),a=null,f=null,c=this.Af(t),l=0;l<t.length;l++){if(i=(n=t[l]).level,s=null,l<t.length-1)for(var v=l;v<t.length;v++)if(t[v].level!=i){s=t[v].level;break}var d,y,b=n.pointList,p=this.Df(b,i);if(this.Ff(p,n.Fn),1<p.length&&(this.Of=this.Of.concat(p)),1==p.length)(s||h)&&(h?e.length&&(l==t.length-1&&(r[r.length-1]+=" "+this.Lf("arrived"),e[e.length-1].endDirection=this.Lf("dest")),e[e.length-1].endPoint=b[0],e[e.length-1].endLevel=i):a!=i&&null!=a||(d=i<s?this.Lf("up_to"):this.Lf("down_to"),y=this.Cf(s),f=this.Lf("take_stair")+" "+d+" "+y,r.push(f),e.push({startPoint:b[0],startDirection:i<s?this.Lf("up"):this.Lf("down"),startLevel:i})),h=!h);else for(var a=i,m=0;m<p.length-1&&!this.kf;m++)r.push(this.Uf(p,m,i,s,c)),e.push(this.Gf(p,m,i,s));1<p.length&&(y=p.reduce(function(t,i){return t+(i.distance||0)},0),u.push({level:i,distance:y}),o+=y)}return[r,e,o,u,this.Tf]}});var Dr=g;function Fr(t){return function(t){if(Array.isArray(t))return Cr(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,i){if(t){if("string"==typeof t)return Cr(t,i);var n=Object.prototype.toString.call(t).slice(8,-1);return"Map"===(n="Object"===n&&t.constructor?t.constructor.name:n)||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Cr(t,i):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Cr(t,i){(null==i||i>t.length)&&(i=t.length);for(var n=0,r=new Array(i);n<i;n++)r[n]=t[n];return r}function Ur(t,i){for(var n=0;n<i.length;n++){var r=i[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}o=function(){function r(t,i,n){!function(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}(this,r),this.Ht=Object.assign({tile:!0,isPreview:!1},t),this.Zf=null,this.Wf=[],this.Vf=[],this.qf=null,this.On=!!t.map,this.Mn=t.map?t.map.getDataManager():new qi,this.jn=i,this.En=n,this.kn()}var t,i,n;return t=r,(i=[{key:"setObstructions",value:function(t){this.Zf&&this.Zf.Po(t)}},{key:"route",value:function(t,i,n){this.Zf.toDoors=void 0!==t.toDoors&&t.toDoors,this.Zf.obstruct=void 0===t.obstruct||t.obstruct;var r=I.ROUTE_FAILED_CANNOT_ARRIVE;(r=t.viapoints&&0<t.viapoints.length?(this.Zf.qh=t.viapoints,this.Zf.Ta(t.start,t.dest)):this.Zf.ih(t.start.level,t.start,t.dest.level,t.dest,t.mode||x.MODULE_SHORTEST,t.priority||p.PRIORITY_DEFAULT))===I.ROUTE_SUCCESS?(this.Wf=this.Zf.Za(),this.Vf=[this.Yf(this.Wf,{language:s.ZH}),this.Yf(this.Wf,{language:s.EN})],this.qf=this.Zf.Ma,i&&i(this.Sn())):n&&n(r)}},{key:"dispose",value:function(){this.Xf=null,this.Wf=[],this.Vf=[],this.Zf&&(this.Zf.pi(),this.Zf=null)}},{key:"pathConstraint",value:function(t,i){return this.Zf?this.Zf.Ha(t,i):null}},{key:"getNaviGraph",value:function(t){return this.Zf.ra.get(t)}}])&&Ur(t.prototype,i),n&&Ur(t,n),r}();Object.assign(o.prototype,{kn:function(){var t,n=this;this.On&&(t=this.Ht.map.getMapOptions(),this.Ht.mapID=t.mapID,this.Ht.appName=t.appName,this.Ht.key=t.key,this.Ht.license=t.license,this.Ht.mapURL=t.mapURL,this.Ht.mapURLAbsolute=t.mapURLAbsolute,this.Ht.isPreview="undefined"!=typeof KjWzhWlSj);var i={buildingID:this.Ht.mapID,appName:this.Ht.appName,key:this.Ht.key,license:this.Ht.license,mapURL:this.Ht.mapURL,mapURLAbsolute:this.Ht.mapURLAbsolute,merge:this.Ht.merge,loadNavi:!0,justDecode:!0,preLoad:!0,isPreview:"undefined"!=typeof KjWzhWlSj};setTimeout(function(){n.Ht.tile?n.Mn.load(i,function(t,i){n.Nn(t,i)}):n.Mn.loadWhole(i,function(t,i){n.Nn(t,i)})},0)},Nn:function(t,i){"error"===t&&this.En&&this.En(i),"decode"===t&&(this.Zf=new Lr(this.Ht),this.Zf.kn(i),this.jn&&this.jn())},Sn:function(){if(0==this.Wf.length||0==this.Vf.length)return null;for(var t={viapoints:[],subs:[],levels:[],distance:0},i=this.Vf[0].descriptions,n=this.Vf[0].descriptionsData,r=this.Vf[1].descriptions,e=this.Vf[1].descriptionsData,s=[],o=!1,u=[],h=0;h<n.length;h++){var a={instruction:{zh:null,en:null},waypoint:{points:null,direction:{zh:null,en:null}},viapoint:null,levels:null,distance:Number.NaN},f=i[h],c=n[h],l=r[h],v=e[h];a.instruction.zh=f,a.instruction.en=l,a.levels=[c.startLevel,c.endLevel],a.distance=void 0!==c.distance?c.distance:0,a.waypoint.direction.zh=[c.startDirection,c.endDirection||c.startDirection],a.waypoint.direction.en=[v.startDirection,v.endDirection||v.startDirection],a.levels[0]!=a.levels[1]?(o=!0,s.push.apply(s,Fr(a.levels))):0!=s.length&&s.slice(-1)[0]==a.levels[0]&&!o||(s.push(a.levels[0]),o=!1);c=this.zf([c.startIndex,c.endIndex],s);a.waypoint.points=c.points,c.via&&-1==u.indexOf(c.via)&&(a.viapoint=Object.assign({},c.via.Vt),t.viapoints.push(Object.assign({},c.via.Vt)),u.push(c.via)),t.distance+=a.distance,t.subs.push(a)}for(var d=0;d<s.length;d++)0!=t.levels.length&&t.levels.slice(-1)[0]==s[d]||t.levels.push(s[d]);return t.door=this.qf,t},zf:function(t,i){for(var n=[],r=[],e=null,s=[],o=0;o<this.Wf.length;o++){var u=this.Wf[o];if(s.push(u.Ln),i.toString()==s.toString()){var h=i[i.length-1],a=u.Dn,f=u.Fn;if(void 0===t[0]||void 0===t[1])n.push(Object.assign({level:u.Ln},u.Dn[0])),r.push(u.Fn[0]),u=this.Wf[o-1],n.unshift(Object.assign({level:u.Ln},u.Dn[0])),r.unshift(u.Fn[0]);else for(var c=t[0];c<=t[1];c++)n.push({x:a[c].x,y:a[c].y,level:h}),r.push(f[c]);break}}return r.forEach(function(t){t.Sh&&(e=t)}),{points:n,via:e}},Yf:function(t,i){if(!this.Hf(t))return{};t=new Dr(Object.assign({data:this.Mn.getDecode(this.Ht),directionAssert:10,combineAsset:10,language:s.ZH},i)).H(t);return{descriptions:t[0],descriptionsData:t[1],distance:t[2],distances:t[3]}},Qf:function(t){this.Zf.ja=t,this.Zf.Ro(),this.Wf=this.Zf.Za()},$f:function(){return this.Wf},Jf:function(t){var i=t||this.Wf;if(!this.Hf(i))return[];var n,r=[];for(n in i)i[n].getPointList&&r.push.apply(r,Fr(i[n].pointList));return r},Kf:function(t){var i=t||this.Wf;if(!this.Hf(i))return[];for(var n=[],r=0;r<i.length;r++){for(var e=i[r],s=e.level,o=e.pointList,u={level:s,points:[]},h=0;h<o.length;h++)u.points.push(Object.assign({},o[h]));n.push(u)}return n},tc:function(t){t=t||this.Wf;if(!this.Hf(t))return 0;var i=this.Jf(t);if(0==i.length)return 0;for(var n=0,r=0;r<i.length-1;r++)n+=lt.vt(i[r],i[r+1]);return n},ic:function(t){var i=t||this.Wf;if(!this.Hf(i))return[];var n,r=[];for(n in i)!i[n].level||0!=n&&r[r.length-1]==i[n].level||r.push(i[n].level);return r},nc:function(t,i){var n=i||this.Wf;if(!this.Hf(n))return[];var r,e=[];for(r in n)n[r].level&&n[r].level==t&&(e=e.concat(n[r].pointList));return e},Hf:function(t){if(!Array.isArray(t))return!1;if(0==t.length)return!1;for(var i=0;i<t.length;i++)if(!(t[i]instanceof an))return!1;return!0}});g=o;function Br(t){return function(t){if(Array.isArray(t))return Gr(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,i){if(t){if("string"==typeof t)return Gr(t,i);var n=Object.prototype.toString.call(t).slice(8,-1);return"Map"===(n="Object"===n&&t.constructor?t.constructor.name:n)||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Gr(t,i):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Gr(t,i){(null==i||i>t.length)&&(i=t.length);for(var n=0,r=new Array(i);n<i;n++)r[n]=t[n];return r}o=function t(i){!function(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}(this,t),this.Ln=void 0!==i.level?i.level:null,this.Tr=void 0!==i.points?i.points:null,this.rc=-1,this.Ut=null,this.kn()};Object.assign(o.prototype,{kn:function(){this.Tr&&(this.Ut=new dt,this.Ut.Pt(this.Tr),this.rc=this.Tr.length,this.Tr[0].x==this.Tr[this.rc-1].x&&this.Tr[0].y==this.Tr[this.rc-1].y?this.rc--:this.Tr.push(this.Tr[0]))},wu:function(t,i){return lt.st(t,i,this.Ut.St,this.Ut.It)},Ze:function(t){return!!lt.ut(t,this.Ut.min,this.Ut.max)&&lt.ct(t,this.Tr,this.rc)},ec:function(t){var i=0;return this.Ze(t[0])&&(i|=1),this.Ze(t[1])&&(i|=2),i},Ge:function(t,i){if(!lt.st(t[0],t[1],this.Ut.min,this.Ut.max))return!1;for(var n,r,e=!1,s=0;s<this.rc;s++){var o={};1==lt._t(t[0],t[1],this.Tr[s],this.Tr[s+1],o)&&(e=!0,i.push(o))}return t[0].x!=t[1].x?(n=t[0].x<t[1].x,i.sort(function(t,i){return n?t.x-i.x:i.x-t.x})):(r=t[0].y<t[1].y,i.sort(function(t,i){return r?t.y-i.y:i.y-t.y})),e},sc:function(t,i){var n=[];n.push(t[0]),n.push.apply(n,Br(i)),n.push(t[1]);for(var r=[],e=0;e<n.length-1;e++)r.push([n[e],n[e+1]]);return r},za:function(t){if(this.Ln!=t.Ln)return!1;if(this.Tr.length!=t.Tr.length)return!1;for(var i=0;i<this.Tr.length;i++){if(this.Tr[i].x!=t.Tr[i].x)return!1;if(this.Tr[i].y!=t.Tr[i].y)return!1}return!0}});var Zr,o=o,n=n(28),Wr={VERSION:u,BUILD:h,XMLHttpRequest:n.a,FMType:e,FMNaviMode:x,FMNaviPriority:p,FMRouteResult:I,FMLanguageType:s,FMSearchRequest:d,FMSearchAnalyser:r,FMNaviAnalyser:g,FMNaviObstruction:o},o=Gt.a.global(),Vr=void 0!==o?o.fengmap:{};for(Zr in void 0===Vr&&(Vr={}),Wr)Vr[Zr]=Wr[Zr];void 0!==o&&(o.fengmap=Vr);i.default=Vr}],f={},g.m=d,g.c=f,g.d=function(t,i,n){g.o(t,i)||Object.defineProperty(t,i,{enumerable:!0,get:n})},g.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"oc",{value:!0})},g.t=function(i,t){if(1&t&&(i=g(i)),8&t)return i;if(4&t&&"object"==typeof i&&i&&i.oc)return i;var n=Object.create(null);if(g.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:i}),2&t&&"string"!=typeof i)for(var r in i)g.d(n,r,function(t){return i[t]}.bind(null,r));return n},g.n=function(t){var i=t&&t.oc?function(){return t.default}:function(){return t};return g.d(i,"a",i),i},g.o=function(t,i){return Object.prototype.hasOwnProperty.call(t,i)},g.p="",g(g.s=50).default;function g(t){if(f[t])return f[t].exports;var i=f[t]={i:t,l:!1,exports:{}};return d[t].call(i.exports,i,i.exports,g),i.l=!0,i.exports}var d,f});